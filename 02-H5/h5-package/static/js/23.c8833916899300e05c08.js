webpackJsonp([23],{BO9h:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),o=s.n(i),a=s("Dd8w"),r=s.n(a),n=s("MJLE"),c=s.n(n),_=s("eMjc"),l=s.n(_),p=s("fqE/"),u=s("Au9i"),d=s("NYxO"),m=s("Jtwt"),v=s("WVZN"),h=s("gyMJ"),g=s("HUDw"),y={name:"ProDetail",components:{QRCode:c.a,html2canvas:l.a,commonHeader:p.a,Toast:u.Toast,Indicator:u.Indicator,Button:u.Button,Swipe:u.Swipe,SwipeItem:u.SwipeItem,Lazyload:u.Lazyload,returnTop:m.a,Field:u.Field},data:function(){return{FontWidth:0,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/",sharePro:0,isMember:this.$store.state.home.is_member,isShare:this.$store.state.home.is_share,h_title:"商品详情",bindtop:0,top:0,allowbind:!0,success_num:0,userInfo:{},title_tips:"",g_list_height:3.5,groupTotal:0,comHeight:0,moreHeight:0,proHeight:0,topNum:0,hiddenFix:!1,isShow:!1,imgUrls:[],height:"",min_height:0,sale_type:"",price_type:"",default_price_type:"",default_chose_paytype:!1,chose_paytype:!1,choseName:"pro",rate:"",chosecap:!0,modelShow:!0,groupShow:!0,specNum:1,isColl:!1,allow_coll:!0,isSign:!0,page:1,is_up:"",is_retail:!0,limit:10,buyType:0,product_id:null,redShow:!1,default_spec:{},maxNum:0,totalNum:0,summary:"",proInfo:[],recomList:[],goods_info:[],comList:[],comDetail:[],comTotal:0,specNameList:[],specDetailList:[],specList:[],showSpec:[],toView:"",proType:"normal",proDetail:"",proBuy:"",intrDetail:"",specDetail:"",afterDetail:"",serviceTitle:"",serviceDetail:"",servershow:!0,choseid:"p",allCom:!1,activity:{},endTime:null,saleTime:[],time:null,timeList:[],endTimeList:[],canvas_pro_img:"",canvas_title:[],canvas_avatar:"",canvas_qrcode:"",saleTimeList:[{hou:0,min:0,sec:0}],addgroup:"",groupId:"",isgroup:0,goods_id:"",type:"",hasSpec:!0,groupList:[],isFlash:0,firstImg:"",price_market_from:"",price_market:0,staticImg:"",activity_price_type:"",normal_price_type:"",group_start:0,imgShow:!1,img_show_big:"",sharewx:"",shareUrl:"",spec_up:!0,showShare:!0,allShare:!0,erweima:"",codeOk:0,shareInfo:{},erweimasrc:"",saveImgBtnHidden:!1,htmlUrl:"",codeShow:!1,showAvatar:!1,showPro:!1,loading:!0,autoOpen:!1,timer:""}},mounted:function(){var t=window.localStorage;console.log(t.getItem("isLogin")),u.Indicator.open("加载中..."),this.goods_id=this.$route.query.id,this.type=this.$route.query.type,"normal"!==this.type&&("group"===this.type&&void 0!==this.$route.query.gid?(this.proType=this.$route.query.type,this.groupId=this.$route.query.id,this.addgroup=this.$route.query.gid):(this.groupId=this.$route.query.goods_id,this.goods_id=this.$route.query.id,this.proType=this.$route.query.type,this.addgroup=""));var e="";switch(!0!==t.getItem("isLogin")&&"true"!==t.getItem("isLogin")||(e=t.getItem("token").split(";")[0].split("=")[1]),this.type){case"normal":this.shareUrl="/pages/proDetail/proDetail?type=normal&id="+this.goods_id+"&uid="+e;break;case"flash":this.shareUrl="/pages/proDetail/proDetail?type=flash&id="+this.goods_id+"&uid="+e;break;case"birthday":this.shareUrl="/pages/proDetail/proDetail?type=birthday&id="+this.goods_id+"&uid="+e;break;case"group":""!==this.addgroup?this.shareUrl="/pages/proDetail/proDetail?type=group&id="+this.groupId+"&gid="+this.addgroup:this.shareUrl="/pages/proDetail/proDetail?type=group&id="+this.goods_id+"&goods_id="+this.groupId}this.userInfo=this.$store.state.home.userInfo,!0!==t.getItem("isLogin")&&"true"!==t.getItem("isLogin")||(""!=this.userInfo.avatar&&(console.log("转换用户头像"),this.getAvatarBy64(this.userInfo.avatar,"avatar")),this.getShareCode()),this.$store.state.home.carnum>0&&(this.redShow=!0);var s=this;(this.getPro(),this.getCom(),this.getRecomm(),this.tabScroll(),window.plus)&&window.plus.share.getServices(function(t){var e={};for(var i in t){var o=t[i];e[o.id]=o}s.sharewx=e.weixin,console.log(s.sharewx)},function(t){console.log("获取分享服务列表失败："+t.message)})},methods:r()({},Object(d.c)({setCarnum:"SET_CARNUM"}),{getAvatarBy64:function(t,e){var s=this;Object(g.g)({url:t}).then(function(t){t.isSuccess&&(console.log(t),"avatar"==e?(s.showAvatar=!0,s.canvas_avatar=t.data):(s.showPro=!0,s.canvas_pro_img=t.data))})},goPro:function(t){var e=this,s={id:t};""!==t?Object(h._12)(s).then(function(s){0==s.isSuccess?Object(u.Toast)({title:s.msg,icon:"none",duration:2e3}):e.$router.replace({path:"/proDetailRec?type=normal&id="+t})}):e.$router.replace({path:"/proDetailRec?type=normal&id="+t})},toImage:function(){var t=this;console.log(document.getElementsByClassName("share_content_canvas")[0]),console.log(document.getElementsByClassName("share_content_canvas")[0].offsetWidth),console.log(document.getElementsByClassName("share_content_canvas")[0].offsetHeight);var e=this;u.Indicator.close(),e.showShare=!1;var s=document.getElementsByClassName("share_content_canvas")[0];console.log(this.$refs.imageTofile);var i,o,a=document.createElement("canvas"),r=a.getContext("2d"),n=(o=(i=r).backingStorePixelRatio||i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,(window.devicePixelRatio||1)/o);r.scale(n,n);var c=s.offsetWidth,_=s.offsetHeight;console.log(c,_),a.style.width=c*n+"px",a.style.height=_*n+"px",console.log(s),console.log(c,_),console.log(a),e.$nextTick(function(){l()(t.$refs.imageTofile,{backgroundColor:null,allowTaint:!0,useCORS:!0,logging:!0,canvas:a}).then(function(t){console.log(t);var s=t.toDataURL("image/png");e.htmlUrl=s})})},goTop:function(){console.log("回到顶部"),document.getElementById("pro").scrollIntoView({block:"start",behavior:"smooth"}),this.choseName="pro"},getShareCode:function(){var t=this;console.log(this.$route);var e="",s=this.$route.query,i=window.localStorage;for(var o in s){var a=s[o];"type"==o&&(o="t",a=a.substring(0,1)),console.log(i.getItem("token")),"uid"==o&&(a=!0===i.getItem("isLogin")||"true"===i.getItem("isLogin")?i.getItem("token").split(";")[0].split("=")[1]:""),e+=o+"="+a+"&"}-1==e.indexOf("uid=")&&(e+="uid="+i.getItem("token").split(";")[0].split("=")[1]);var r={path:"pages/proDetail/proDetail",url:e};console.log(r),Object(g.x)(r).then(function(e){console.log("二维码成功加载"),console.log(e),t.erweimasrc="data:image/png;base64,"+Object(v.d)(e),t.codeShow=!0})},tabScroll:function(){window.addEventListener("scroll",this.handleScroll)},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;if(this.top=t,t>window.outerHeight)if(0==this.allCom){var e=document.getElementsByClassName("pro_show")[0].offsetHeight+document.getElementsByClassName("pro_info")[0].offsetHeight+document.getElementsByClassName("pro_com")[0].offsetHeight;this.recomList.length>0?this.choseName=t>e?"recommend":"more":this.choseName="more"}else this.choseName="com";else!1===this.allCom&&(t<500?this.choseName="pro":t>500&&(this.comList.length<=0?this.choseName=t>684?"more":"com":this.choseName="com"))},tohome:function(){window.localStorage.setItem("backDetail",!0),this.isShow=!1,console.log(document.getElementsByTagName("canvas")),document.getElementsByTagName("canvas").length>0&&(console.log(document.getElementsByTagName("canvas")[0]),document.getElementsByTagName("canvas")[0].removeChild()),this.$router.goBack()},golink:function(t,e){this.$router.togo({path:t+e})},goIndex:function(t){this.$router.replace({path:t})},openCar:function(t){this.activity.is_qualification?1===t&&(this.buyType=1,this.modelShow=!1,document.querySelector(".pro_detail").style.top=-this.top+"px",this.bindtop=-document.querySelector(".pro_detail").offsetTop):Object(u.Toast)({message:"您不符合兑换/购买资格！",duration:1e3})},buyNow:function(t){console.log(this.activity.is_qualification),"group"===this.proType||this.activity.is_qualification?(0===t?(this.buyType=-1,this.isgroup=1,this.modelShow=!1,document.querySelector(".pro_detail").style.top=-this.top+"px",this.sale_type=this.activity_price_type):10===t&&(this.buyType=-2,this.modelShow=!1,this.isgroup=0,document.querySelector(".pro_detail").style.top=-this.top+"px",this.sale_type=this.normal_price_type,!1===this.default_chose_paytype&&(parseInt(this.sale_type)>=4?this.default_price_type=4:2===parseInt(this.sale_type)?this.default_price_type=2:this.default_price_type=1)),""===this.price_type&&10!==t&&(parseInt(this.sale_type)>=4?this.price_type=4:2===parseInt(this.sale_type)?this.price_type=2:this.price_type=1),console.log(document.querySelector(".pro_detail").offsetTop),this.bindtop=-document.querySelector(".pro_detail").offsetTop):Object(u.Toast)({message:"您不符合兑换/购买资格！",duration:1e3})},addColl:function(t){var e=this;if("true"===window.localStorage.getItem("isLogin")||!0===window.localStorage.getItem("isLogin"))1==this.allow_coll&&(""===this.isColl?(e.allow_coll=!1,Object(h.p)(t).then(function(t){t.isSuccess?(e.isColl=t.data.collect_id,Object(u.Toast)({message:"收藏成功",iconClass:"iconfont icon-dui1",duration:1e3}),setTimeout(function(){e.allow_coll=!0},1e3)):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){e.allow_coll=!0},1e3))})):Object(h.l)(t).then(function(t){t.isSuccess?(e.isColl="",Object(u.Toast)({message:"取消收藏成功",duration:1e3}),setTimeout(function(){e.allow_coll=!0},1e3)):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){e.allow_coll=!0},1e3))}));else{var s=this;window.plus.nativeUI.confirm("您当前未登录，是否立即前往登录",function(t){0!==t.index&&"0"!==t.index||s.$router.togo({path:"/login?back=1"})},{title:"提示",buttons:["确定","取消"],verticalAlign:"center"})}},share:function(t){console.log("判断是否授权");var e=window.plus;console.log(this.sharewx),!1===t&&(t="_www/img/mp.png"),console.log("压缩后"+t);var s="https://share.gongzhugou.com/"+"downApp/downApp.html",i={type:"miniProgram",title:this.goods_info.name,thumbs:[t],content:"公主购：一个专注省钱的会员制电商平台~",miniProgram:{id:"gh_a0cfbcaf8fa2",path:this.shareUrl,webUrl:s,type:0},extra:{scene:"WXSceneSession"}};console.log(i),this.sharewx?this.isAuth(i):e.nativeUI.alert("当前环境不支持微信分享操作!")},zipImg:function(){var t=this,e=window.plus;""!==t.goods_info.img?e.downloader.createDownload(t.goods_info.img,{},function(s,i){if(200===i){console.log(s),console.log("Download success: "+s.filename);var o="_doc/shareImg"+(new Date).getTime()+".jpg";console.log("压缩后的文件名"+o),e.zip.compressImage({src:s.filename,dst:o,quality:50,format:"jpg",width:"50%",height:"50%"},function(e){console.log(e),console.log("压缩成功"),t.share(e.target)},function(e){console.log(e),t.share(!1)})}else console.log("下载失败: "+i),t.share(!1)}).start():t.share(!1)},saveImg:function(){u.Indicator.open("图片保存中..."),console.log("测试保存图片");var t=this,e=new plus.nativeObj.Bitmap,s="news_picture_"+(new Date).getTime()+".png";console.log(this.htmlUrl),e.loadBase64Data(this.htmlUrl),e.save("_doc/"+s,{overwrite:!0},function(i){plus.gallery.save(i.target,function(i){console.log("保存图片成功："+o()(i)),u.Indicator.close(),t.fileUrl="_doc/"+s,e.clear(),Object(u.Toast)({message:"图片已保存到相册",iconClass:"iconfont icon-dui1",duration:2e3})},function(t){u.Indicator.close(),console.log("加载Base64图片数据失败："+o()(t)),e.clear(),console.log("保存失败",i)})},function(){e.clear()})},isAuth:function(t){console.log("判断是否授权"),console.log(t),this.sharewx.authenticated?this.shareAction(t):this.sharewx.authorize(function(){this.shareAction(t)},function(t){console.log(t),-8==t.code&&Object(u.Toast)({message:"检测到您未安装微信，请通过应用商店下载",duration:1e3}),console.log("认证授权失败")})},shareAction:function(t){console.log("开始分享"),console.log(t),this.sharewx.send(t,function(){console.log("分享成功")},function(t){console.log("失败失败啊"+t.message)})},chose:function(t){var e=this;window.removeEventListener("scroll",this.handleScroll),this.choseName=t,this.allCom=!1,console.log(t,this.choseName,"类型"),this.$nextTick(function(){document.getElementById(t).scrollIntoView({block:"start",behavior:"smooth"})}),clearInterval(this.timer),this.timer="recommend"===t?setTimeout(function(){e.tabScroll()},4e3):setTimeout(function(){e.tabScroll()},1e3)},chosePriceType:function(t,e){0===t?(this.price_type=e,this.chose_paytype=!0):(this.default_price_type=e,this.default_chose_paytype=!0)},closeModel:function(){this.modelShow=!this.modelShow,document.querySelector(".pro_detail").style.top="",window.scrollTo(0,this.bindtop)},closeShare:function(){this.showShare=!0,this.allShare=!0,u.Indicator.close(),document.querySelector(".pro_detail").style.top="",window.scrollTo(0,this.bindtop)},toshare:function(){var t=this;document.querySelector(".pro_detail").style.top=-this.top+"px",this.bindtop=-document.querySelector(".pro_detail").offsetTop,""==this.htmlUrl&&u.Indicator.open("图片生成中..."),console.log("二维码是否加载成功"+this.codeShow),console.log("产品主图是否加载成功"+this.showPro),console.log("头像是否加载成功"+this.showAvatar);var e=this;if(this.allShare)if(this.allShare=!1,console.log(this.allShare),this.showAvatar&&this.codeShow&&this.showPro)""==this.htmlUrl?this.$nextTick(function(){t.toImage()}):(console.log("展示图片"),e.showShare=!1,u.Indicator.close());else if(this.codeShow)console.log(e.userInfo.avatar),Object(g.g)({url:e.userInfo.avatar}).then(function(t){t.isSuccess&&(e.showAvatar=!0,e.canvas_avatar=t.data,Object(g.g)({url:e.proInfo.img}).then(function(t){t.isSuccess&&(e.showPro=!0,e.canvas_pro_img=t.data,""==e.htmlUrl?e.$nextTick(function(){e.toImage()}):(console.log("展示图片"),u.Indicator.close(),e.showShare=!1))}))});else{var s="",i=this.$route.query,o=window.localStorage;for(var a in i){var r=i[a];"type"==a&&(a="t",r=r.substring(0,1)),console.log(o.getItem("token")),console.log(o.getItem("token").split(";")[0].split("=")[1]),"uid"==a&&(r=!0===o.getItem("isLogin")||"true"===o.getItem("isLogin")?o.getItem("token").split(";")[0].split("=")[1]:""),s+=a+"="+r+"&"}-1==s.indexOf("uid=")&&(s+="uid="+o.getItem("token").split(";")[0].split("=")[1]);var n={path:"pages/proDetail/proDetail",url:s};console.log(n),this.showAvatar&&this.showPro?(console.log("主图和头像已经显示"),Object(g.x)(n).then(function(t){e.erweimasrc="data:image/png;base64,"+Object(v.d)(t),e.codeShow=!0,""==e.htmlUrl?e.$nextTick(function(){e.toImage()}):(console.log("展示图片"),u.Indicator.close(),e.showShare=!1)})):this.showAvatar&&!this.showPro?(console.log("头像已经显示"),Object(g.g)({url:e.proInfo.img}).then(function(t){t.isSuccess&&(e.showPro=!0,e.canvas_pro_img=t.data,Object(g.x)(n).then(function(t){e.erweimasrc="data:image/png;base64,"+Object(v.d)(t),e.codeShow=!0,""==e.htmlUrl?e.$nextTick(function(){e.toImage()}):(console.log("展示图片"),u.Indicator.close(),e.showShare=!1)}))})):!this.showAvatar&&this.showPro?Object(g.g)({url:e.userInfo.avatar}).then(function(t){t.isSuccess&&(e.showAvatar=!0,e.canvas_avatar=t.data,Object(g.x)(n).then(function(t){e.erweimasrc="data:image/png;base64,"+Object(v.d)(t),e.codeShow=!0,""==e.htmlUrl?e.$nextTick(function(){e.toImage()}):(console.log("展示图片"),u.Indicator.close(),e.showShare=!1)}))}):Object(g.g)({url:e.userInfo.avatar}).then(function(t){t.isSuccess&&(e.showAvatar=!0,e.canvas_avatar=t.data,Object(g.g)({url:e.proInfo.img}).then(function(t){t.isSuccess&&(e.showPro=!0,e.canvas_pro_img=t.data,Object(g.x)(n).then(function(t){e.erweimasrc="data:image/png;base64,"+Object(v.d)(t),e.codeShow=!0,""==e.htmlUrl?e.$nextTick(function(){e.toImage()}):(console.log("展示图片"),u.Indicator.close(),e.showShare=!1)}))}))})}else console.log("不允许重复点击")},showModel:function(){document.querySelector(".pro_detail").style.top=-this.top+"px",this.bindtop=-document.querySelector(".pro_detail").offsetTop,"group"===this.proType?null!=this.endTime&&this.endTime<=0?(this.buyType=-2,this.modelShow=!1,this.sale_type=this.normal_price_type,!1===this.default_chose_paytype&&(parseInt(this.sale_type)>=4?this.default_price_type=4:2===parseInt(this.sale_type)?this.default_price_type=2:this.default_price_type=1)):(this.buyType=-1,this.modelShow=!1,this.sale_type=this.activity_price_type,!1===this.chose_paytype&&(parseInt(this.sale_type)>=4?this.price_type=4:2===parseInt(this.sale_type)?this.price_type=2:this.price_type=1)):1===this.isFlash?(this.modelShow=!1,this.buyType=-1):(this.modelShow=!1,this.buyType=0)},choseType:function(t,e){for(var s=[],i=[],o=this.specList,a=0;a<o.length;a++)if(o[a].id===e){for(var r=0;r<o[a].list.length;r++)o[a].list[r].ischose=!1;for(var n=0;n<o[a].list.length;n++)o[a].list[n].tid===t&&(o[a].list[n].ischose=!0)}for(var c=0;c<o.length;c++)for(var _=0;_<o[c].list.length;_++)o[c].list[_].ischose&&(s.push(o[c].list[_].tid),i.push(o[c].list[_].name));var l="",p="";console.log(this.isgroup),1==this.isgroup?(l=this.groupId,p="group"):p="",console.log(l);var u={goods_id:this.proInfo.goods_id,marketing_type:0,group_id:l,get_type:p,spec:s.join(";")},d=this;Object(h._14)(u).then(function(t){t.isSuccess&&(d.proInfo=t.data.product,d.product_id=t.data.product.product_id,d.maxNum=t.data.product.store,d.default_spec=t.data.product,d.spec_up=t.data.is_up,void 0!==t.data.product.price_market_from&&(d.price_market_from=t.data.product.price_market_from,d.price_market=t.data.product.price_market),1==d.isgroup&&(d.activity.back_rebate=t.data.back_rebate),""!==t.data.product.img&&null!==t.data.product.img?d.staticImg=t.data.product.img:d.staticImg=d.data.firstImg)})},addNum:function(t){var e=parseInt(this.specNum);e++,this.specNum=e},changeValue:function(t){console.log(this.specNum);new RegExp("^[ ]+$").test(this.specNum)&&(this.specNum=1),""!=this.specNum?(this.specNum.length>0&&("number"!=typeof parseInt(this.specNum)||isNaN(parseInt(this.specNum)))?(Object(u.Toast)({message:"价格只能为数字",duration:1e3}),this.specNum=1):this.specNum>99?this.specNum>this.maxNum?this.maxNum>99?(Object(u.Toast)({message:"该商品最多可购买99件~",duration:1e3}),this.specNum=99):(Object(u.Toast)({message:"库存不足",duration:1e3}),this.specNum=this.maxNum):(Object(u.Toast)({message:"该商品最多可购买99件~",duration:1e3}),this.specNum=99):this.specNum>this.maxNum?this.specNum=this.maxNum:this.specNum=parseInt(this.specNum),this.specNum<=1&&(this.specNum=1)):this.specNum=1},lessNum:function(t){var e=parseInt(this.specNum);e<=1?this.specNum=1:e--,this.specNum=e},addCar:function(t){var e=this,s=this;if("true"===window.localStorage.getItem("isLogin")||!0===window.localStorage.getItem("isLogin")){if(s.allowbind)if(s.allowbind=!1,"false"===s.$store.state.home.isbind||!1===s.$store.state.home.isbind)s.$router.togo({path:"/bind?visit=4"});else if("group"===this.proType||this.activity.is_qualification){for(var i=!0,o=[],a=this.specList,r=0;r<a.length;r++){o.push(!1);for(var n=0;n<a[r].list.length;n++)a[r].list[n].ischose&&(o[r]=!0)}for(var c=0;c<o.length;c++)!1===o[c]&&(i=!1);if(1===this.buyType||0===t)if(i)if(Number(s.specNum)>Number(s.maxNum))Object(u.Toast)({message:"库存不足",duration:1e3}),Number(s.maxNum)<=0?(s.specNum=1,s.allowbind=!0):(s.specNum=s.maxNum,s.allowbind=!0);else{var _={pid:s.product_id,quantity:s.specNum,checked:0,deal_type:s.default_price_type};Object(h.e)(_).then(function(t){t.isSuccess?(Object(u.Toast)({message:"加入购物车成功",iconClass:"iconfont icon-dui1",duration:1e3}),Object(h.D)().then(function(t){s.setCarnum(t.data.rows_total)}),s.allowbind=!0):(Object(u.Toast)({message:t.msg,duration:1e3}),s.allowbind=!0)})}else Object(u.Toast)({message:"未选择规格",duration:1e3}),s.allowbind=!0;else if(-1===this.buyType||1===t)if(i)if(Number(s.specNum)>Number(s.maxNum))Object(u.Toast)({message:"库存不足",duration:1e3}),Number(s.maxNum)<=0?(s.specNum=1,s.allowbind=!0):(s.specNum=s.maxNum,s.allowbind=!0);else if("group"===s.proType&&-1===this.buyType){var l={id:s.addgroup,group_id:s.groupId,product_id:s.product_id,num:s.specNum,deal_type:s.price_type};Object(h.b)(l).then(function(t){t.isSuccess?(s.allowbind=!0,window.localStorage.setItem("neworder",!0),e.$router.togo({path:"/sureOrder?addType=2&proType=group&id="+s.product_id})):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){s.modelShow=!0,s.allowbind=!0},1e3))})}else if("point"===s.proType||"birthday"===s.proType){s.isFlash=-2;var p={active:s.activity.id,checked:s.product_id,quantity:s.specNum,deal_type:s.default_price_type};Object(h.d)(p).then(function(t){t.isSuccess?(s.allowbind=!0,window.localStorage.setItem("neworder",!0),e.$router.togo({path:"/sureOrder?addType=3&proType=birthday&id="+s.product_id})):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){s.allowbind=!0},1e3))})}else{var d=1;console.log(t),console.log(s.isFlash),1!==s.isFlash&&"1"!==s.isFlash||(d=0);var m={pid:s.product_id,num:s.specNum,goods_id:s.goods_id,deal_type:s.default_price_type};if(console.log(d),0===d)Object(h.c)(m).then(function(t){t.isSuccess?(s.allowbind=!0,window.localStorage.setItem("neworder",!0),e.$router.togo({path:"/sureOrder?addType=3&id="+s.product_id+"&group_normal="+d})):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){s.allowbind=!0},1e3))});else{console.log(111);var v={pid:s.product_id,num:s.specNum,goods_id:s.goods_id,deal_type:s.default_price_type};Object(h.c)(v).then(function(t){t.isSuccess?(s.allowbind=!0,window.localStorage.setItem("neworder",!0),e.$router.togo({path:"/sureOrder?addType=3&id="+s.product_id+"&group_normal="+d})):(Object(u.Toast)({message:t.msg,duration:1e3}),setTimeout(function(){s.allowbind=!0},1e3))})}}else Object(u.Toast)({message:"未选择规格",duration:1e3}),s.allowbind=!0}else Object(u.Toast)({message:"您不符合兑换/购买资格！",duration:1e3}),s.allowbind=!0}else{var g=this;window.plus.nativeUI.confirm("您当前未登录，是否立即前往登录",function(t){0!==t.index&&"0"!==t.index||g.$router.togo({path:"/login?back=1"})},{title:"提示",buttons:["确定","取消"],verticalAlign:"center"})}},moreGroup:function(){this.groupShow=!1},closeGroup:function(){this.groupShow=!0},viewAllCom:function(){this.allCom=!0,this.choseName="com",this.loading=!1,this.autoOpen=!0,this.getCom()},viewImg:function(){},choseTab:function(t){this.choseid=t,this.proDetail="p"===t?this.intrDetail:"s"===t?this.specDetail:this.afterDetail},showService:function(){document.querySelector(".pro_detail").style.top=-this.top+"px",this.bindtop=-document.querySelector(".pro_detail").offsetTop,this.servershow=!1},closeserver:function(){this.servershow=!0,document.querySelector(".pro_detail").style.top="",window.scrollTo(0,this.bindtop)},previewImg:function(t){this.imgShow=!0,this.img_show_big=t},hiddenImg:function(){this.imgShow=!1},getPro:function(){var t=this,e=this,s={id:this.goods_id,type:this.type};Object(h._12)(s).then(function(s){if(u.Indicator.close(),s.isSuccess){e.proInfo=s.goods_info;var i=Number(e.proInfo.price_market.length);e.FontWidth=.15*i+.48,""!=e.proInfo.img&&(console.log("转换商品主图"),e.getAvatarBy64(e.proInfo.img,"pro_img"));var o,a=[];if((o=e.proInfo.name.replace(/\s*/g,"")).length>0){for(var r="",n=0;n<o.length;n++)r+=o[n],(n+1)%13==0&&(a.push(r),r="");r.length>0&&a.push(r),console.log(a),a.length>2?(a[1]=a[1].substring(0,10),a[1]+="...",e.canvas_title.push(a[0]),e.canvas_title.push(a[1])):e.canvas_title=a,console.log(a)}if(e.sale_type=s.goods_info.deal_type,e.goods_info=s.goods_info,e.summary=s.goods_info.summary,e.staticImg=s.product_default.img,e.isColl=s.is_collect,e.imgUrls=s.pic,e.activity=s.marketing,e.default_spec=s.product_default,e.maxNum=s.product_default.store,e.totalNum=s.goods_info.store,e.product_id=s.product_default.product_id,e.isFlash=s.goods_info.promotion,e.is_up=s.goods_info.is_up,e.is_retail=s.goods_info.is_retail,e.intrDetail=s.goods_info.intro,e.specDetail=s.goods_info.specification,e.afterDetail=s.goods_info.packaging,e.serviceTitle=s.goods_info.service_title,null!=s.goods_info.service_note){var c={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'},_=s.goods_info.service_note;e.serviceDetail=_.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(t,e){return c[e]})}else e.serviceDetail="";if(e.proBuy=s.goods_info.purchase_note,e.firstImg=s.goods_info.img,e.activity_price_type=s.marketing.deal_type,e.normal_price_type=s.goods_info.deal_type,e.title_tips=s.site_exemption,e.proDetail=e.intrDetail,parseInt(s.goods_info.deal_type)>=4?(e.price_type=4,e.default_price_type=4):2===parseInt(s.goods_info.deal_type)?(e.price_type=2,e.default_price_type=2):(e.price_type=1,e.default_price_type=1),void 0!==s.product_default.price_market_from&&(e.price_market_from=s.product_default.price_market_from,e.price_market=s.product_default.price_market),"group"===e.type){if(s.allow_group.length>0){for(var l=[],p=0;p<s.allow_group.length;p++)l.push(s.allow_group[p].countdown);e.endTimeList=l;var d=Object(v.b)(l);e.time=setInterval(function(){for(var t=0;t<l.length;t++)l[t]>0?l[t]=--l[t]:l[t]=0;e.endTimeList=l,d=Object(v.b)(l),e.saleTimeList=d},1e3)}if(e.endTime=s.marketing.countdown,e.groupTotal=s.allow_total,e.groupList=s.allow_group,e.isFlash=-1,e.sale_type=s.marketing.deal_type,e.group_start=s.marketing.status,e.success_num=s.join_num,s.allow_total>=4)e.g_list_height=6.4;else{var m=1.54*s.allow_total;e.g_list_height=m}parseInt(s.marketing.deal_type)>=4?e.price_type=4:2===parseInt(s.marketing.deal_type)?e.price_type=2:t.price_type=1,e.isShow=!0}else e.isShow=!0;if(void 0===s.marketing?e.groupId="":void 0!==s.marketing.id?e.groupId=s.marketing.id:e.groupId="",1===e.isFlash||"1"===e.isFlash){console.log("进入促销");var h=Object(v.a)(s.marketing.countdown);e.endTime=s.marketing.countdown,e.saleTime=h,e.time=setInterval(function(){h=Object(v.a)(--e.endTime),e.saleTime=h},1e3)}if(void 0!==s.spec_key_name&&void 0!==s.spec_key_nameval){e.specNameList=s.spec_key_name,e.specDetailList=s.spec_key_nameval;a=[];var g=[];for(var y in e.specNameList)a.push({id:y,name:e.specNameList[y],list:[]});for(var b in e.specDetailList){var f=[];for(var C in e.specDetailList[b])f.push({tid:b+":"+C,pid:b,name:e.specDetailList[b][C],ischose:!1});g.push({id:b,list:f})}for(var w=0;w<a.length;w++)for(var k=0;k<g.length;k++)a[w].id===g[k].id&&(a[w].list=g[k].list);for(var T=s.product_default.spec.split(";"),x=0;x<T.length;x++)for(var N=0;N<a.length;N++)for(var S=0;S<a[N].list.length;S++)a[N].list[S].tid===T[x]&&(a[N].list[S].ischose=!0,e.showSpec.push(a[N].list[S].name));e.proInfo.price_sell=s.product_default.price_sell,""!==s.product_default.bn&&null!=s.product_default.bn&&(e.proInfo.bn=s.product_default.bn),e.specList=a}else e.flag=!1,e.product_id=s.product_info.product_id,e.hasSpec=!1;document.getElementById("top").scrollIntoView(!1)}})},getRecomm:function(){var t=this;Object(h._17)(this.goods_id).then(function(e){e.isSuccess&&(null==e.data.rows&&(e.data.rows=[]),t.recomList=e.data.rows)})},getCom:function(){var t=this,e=this,s={goods_id:this.goods_id,page:this.page,limit:this.limit};Object(h.G)(s).then(function(s){s.isSuccess&&(e.comList=s.rows,e.rate=s.rate,e.comTotal=s.total,t.comDetail=s.rows)})},loadMore:function(){var t=this;t.loading=!0,t.page=++t.page,console.log("更多架子啊");var e={goods_id:t.goods_id,page:t.page,limit:t.limit};Object(h.G)(e).then(function(e){e.isSuccess&&(t.comDetail=t.comDetail.concat(e.rows),t.comTotal=e.total,t.loading=!1,t.choseName="com",e.rows.length<t.limit&&(t.loading=!0))})}}),beforeDestroy:function(){this.isShow=!1,u.Indicator.close(),window.removeEventListener("scroll",this.handleScroll),clearInterval(this.time)},computed:r()({},Object(d.b)(["number","carnum","isbind","score","news","newsnum","issign"]))},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("return-top",{on:{returnTop:t.goTop}}),t._v(" "),s("div",{attrs:{id:"top"}}),t._v(" "),1==t.sharePro?s("div",{staticClass:"pro_information"},[s("div",{staticClass:"pro_information_block"},[s("div",{staticClass:"pro_information_blockInfo"},[s("img",{staticClass:"image",attrs:{src:t.shareInfo.image}}),t._v(" "),s("text",[t._v("来自"+t._s(t.shareInfo.nickname)+"的分享")])])])]):t._e(),t._v(" "),t.isShow?s("div",{class:t.modelShow&&t.servershow?"pro_detail":"pro_detail pro_detail_fixed",attrs:{id:"detail"}},[s("div",{staticClass:"goIndex",on:{click:function(e){return t.goIndex("/index")}}},[s("i",{staticClass:"iconfont icon-home"})]),t._v(" "),s("div",{staticClass:"pro_header"},[s("div",{staticClass:"pro_header_left head_between"},[s("i",{staticClass:"iconfont icon-jiantouarrowhead7",on:{click:t.tohome}})]),t._v(" "),s("div",{staticClass:"pro_header_nav"},[s("span",{class:"pro"==t.choseName?"text_active":"",on:{click:function(e){return t.chose("pro")}}},[t._v("商品")]),t._v(" "),s("span",{class:"com"==t.choseName?"text_active":"",on:{click:function(e){return t.chose("com")}}},[t._v("评价")]),t._v(" "),s("span",{class:"more"==t.choseName?"text_active":"",on:{click:function(e){return t.chose("more")}}},[t._v("详情")]),t._v(" "),t.recomList.length>0?s("span",{class:"recommend"==t.choseName?"text_active":"",on:{click:function(e){return t.chose("recommend")}}},[t._v("推荐")]):t._e()]),t._v(" "),s("div",{staticClass:"pro_header_icon head_between"})]),t._v(" "),s("div",{staticClass:"head_top",attrs:{id:"pro"}}),t._v(" "),t.allCom?t._e():s("div",{staticClass:"pro_body",attrs:{id:"top"}},[s("div",{staticClass:"pro_info"},[s("div",{staticClass:"pro_swiper"},[s("mt-swipe",{staticClass:"swiper_bg",attrs:{auto:3e3,speed:1e3,defaultIndex:0,continuous:!0,stopPropagation:!0}},t._l(t.imgUrls,function(e,i){return s("mt-swipe-item",{key:i},[s("img",{staticClass:"slide-img",style:{transform:"translate(0px,"+t.top/1.5+"px)"},attrs:{src:e}})])}),1)],1),t._v(" "),1!=t.isFlash||"normal"!=t.proType&&"flash"!=t.proType?t._e():s("div",{staticClass:"pro_down_sale"},[s("div",{staticClass:"pro_price"},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[1==t.price_type?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(t.default_spec.price_sell))]):t._e(),t._v(" "),4==t.price_type?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(t.default_spec.price_combine)+"+")]):t._e(),t._v(" "),1!=t.price_type?s("div",{staticClass:"pro_inter_img"},[s("i",{staticClass:"iconfont icon-jifen1"})]):t._e(),t._v(" "),4==t.price_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(t.default_spec.point_combine))]):t._e(),t._v(" "),2==t.price_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(t.default_spec.point))]):t._e()]),t._v(" "),s("div",[s("span",[t._v(t._s(t.price_market_from))]),t._v(" "),s("span",{staticClass:"pro_orig"},[t._v("￥"+t._s(t.price_market))]),t._v(" "),s("span",{staticClass:"pro_num"},[t._v("已抢"+t._s(t.activity.count_num)+"件")])])]),t._v(" "),s("div",{staticClass:"pro_right"},[s("div",{staticClass:"pro_time"},[s("span",{staticClass:"title"},[t._v("距结束还剩:")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTime.day))]),t._v(" "),s("span",{staticClass:"text"},[t._v("天")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTime.hou))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTime.min))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTime.sec))])]),t._v(" "),s("div",{staticClass:"pro_prop"},[s("div",{staticClass:"prop_bg"},[t.activity.count_num/t.totalNum*100<100?s("span",{style:{width:t.activity.count_num/t.totalNum*100+"%"}}):t._e(),t._v(" "),t.activity.count_num/t.totalNum*100>=100?s("span",{staticStyle:{width:"100%"}}):t._e()])])])]),t._v(" "),s("div",{staticClass:"pro_title"},[0!=t.isFlash||"normal"!=t.proType&&"flash"!=t.proType?t._e():s("div",{staticClass:"pro_price"},[s("div",[t.proInfo.is_third>0?s("span",{staticClass:"pro_price_third"},[t._v(t._s(t.proInfo.third_name))]):s("span",{staticClass:"pro_price_third"},[t._v("平台自营")]),t._v(" "),1==t.proInfo.is_gift_zone?s("span",{staticClass:"pro_price_gift"},[t._v(t._s(t.proInfo.gift_title))]):t._e()]),t._v(" "),s("div",{staticClass:"pro_sale_num"},[t._v("已售出"+t._s(t.proInfo.buy_count)+"件")])]),t._v(" "),"point"==t.proType||"birthday"==t.proType?s("div",{staticClass:"pro_price"},[s("div",[t.proInfo.is_third>0?s("span",{staticClass:"pro_price_third"},[t._v(t._s(t.proInfo.third_name))]):s("span",{staticClass:"pro_price_third"},[t._v("平台自营")]),t._v(" "),1==t.proInfo.is_gift_zone?s("span",{staticClass:"pro_price_gift"},[t._v(t._s(t.proInfo.gift_title))]):t._e()]),t._v(" "),s("div",{staticClass:"pro_sale_num"},[t._v("已售出"+t._s(t.proInfo.buy_count)+"件")])]):t._e(),t._v(" "),s("div",{staticClass:"pro_name_block",class:"group"==t.proType?" group_top":""},[s("div",{staticClass:"pro_name"},[1==t.isFlash&&("normal"==t.proType||"flash"==t.proType)||"group"==t.proType?s("div",{staticClass:"pro_name_icon"},["group"==t.proType?s("img",{staticStyle:{width:"0.65rem",height:"0.29rem"},attrs:{src:t.imgPath+"pro/group_pro.png"}}):t._e(),t._v(" "),1!=t.isFlash||"normal"!=t.proType&&"flash"!=t.proType?t._e():s("img",{staticStyle:{width:"0.65rem",height:"0.29rem"},attrs:{src:t.imgPath+"pro/sale_pro.png"}})]):t._e(),t._v(" "),s("span",[t._v(t._s(t.proInfo.name))])]),t._v(" "),s("div",{staticClass:"pro_name_right"},[""==t.isColl?s("mt-button",{on:{click:function(e){return t.addColl(t.proInfo.goods_id)}}},[s("i",{staticClass:"iconfont icon-shoucang"})]):t._e(),t._v(" "),""!=t.isColl?s("mt-button",{staticStyle:{color:"#ff4e79"},on:{click:function(e){return t.addColl(t.isColl)}}},[s("i",{staticClass:"iconfont icon-yishoucang",staticStyle:{color:"#ff4e79"}})]):t._e(),t._v(" "),""==t.isColl?s("span",[t._v("收藏")]):t._e(),t._v(" "),""!=t.isColl?s("span",[t._v("取消")]):t._e()],1)]),t._v(" "),"group"!=t.proType?s("div",{staticClass:"pro_tips"},[s("span",[t._v(t._s(t.summary))])]):t._e(),t._v(" "),0==t.isFlash&&("normal"==t.proType||"flash"==t.proType)||"birthday"==t.proType?s("div",{staticClass:"pro_pay_type"},["group"==t.proType&&-2!=t.buyType?s("div",{staticClass:"pay_spec"},[t.sale_type>=4?s("mt-button",{class:4==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,4)}}},[t._v("\n                ￥"+t._s(t.activity.price_combine)+"+"),s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.activity.point_combine))]):t._e(),t._v(" "),2!=t.sale_type&&6!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:1==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,1)}}},[t._v("￥"+t._s(t.activity.price)+"\n              ")]):t._e(),t._v(" "),1!=t.sale_type&&5!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:2==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,2)}}},[s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.activity.point))]):t._e()],1):s("div",{staticClass:"pay_spec"},[t.sale_type>=4?s("mt-button",{class:4==t.default_price_type?"button_click":"",attrs:{size:"small","data-type":"1"},on:{click:function(e){return t.chosePriceType(1,4)}}},[t._v("\n                ￥"+t._s(t.default_spec.price_combine)+"+"),s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.default_spec.point_combine)+"\n              ")]):t._e(),t._v(" "),2!=t.sale_type&&6!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:1==t.default_price_type?"button_click":"",attrs:{size:"small","data-type":"1"},on:{click:function(e){return t.chosePriceType(1,1)}}},[t._v("\n                ￥"+t._s(t.default_spec.price_sell))]):t._e(),t._v(" "),1!=t.sale_type&&5!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:2==t.default_price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(1,2)}}},[s("i",{staticClass:"iconfont icon-jifen1"}),t._v(" "+t._s(t.default_spec.point))]):t._e()],1)]):t._e(),t._v(" "),0==t.isFlash&&("normal"==t.proType||"flash"==t.proType)||"birthday"==t.proType?s("div",{staticClass:"pro_market"},[s("span",[t._v(t._s(t.price_market_from))]),t._v(" "),s("span",{staticClass:"pro_orig"},[t._v("￥"+t._s(t.price_market))])]):t._e(),t._v(" "),"group"==t.proType?s("div",{staticClass:"pro_price pro_price_group"},[s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",margin:"0.2rem 0"}},[s("div",{staticStyle:{display:"inline-flex","align-items":"center",background:"#f9f9f9",padding:"0.08rem 0"}},[1==t.activity.deal_type?s("span",{staticClass:"pro_nowprice"},[t._v("￥"+t._s(t.activity.price))]):t._e(),t._v(" "),t.activity.deal_type>=4?s("span",{staticClass:"pro_nowprice"},[t._v("￥"+t._s(t.activity.price_combine)+"+")]):t._e(),t._v(" "),1!=t.activity.deal_type?s("div",{staticClass:"pro_group_img"},[s("i",{staticClass:"iconfont icon-jifen1"})]):t._e(),t._v(" "),t.activity.deal_type>=4?s("span",{staticClass:"pro_integral_group"},[t._v(t._s(t.activity.point_combine))]):t._e(),t._v(" "),2==t.activity.deal_type||3==t.activity.deal_type?s("span",{staticClass:"pro_integral_group"},[t._v(t._s(t.activity.point))]):t._e(),t._v(" "),s("span",{staticClass:"pro_orig_group"},[t._v("￥"+t._s(t.price_market))])]),t._v(" "),s("div",{staticStyle:{display:"inline-flex","align-items":"center","font-size":"0.24rem",color:"#777777"}},[t._v(t._s(t.success_num)+"人已成功\n              ")])]),t._v(" "),s("div",[s("span",{staticClass:"group_num"},[t._v(t._s(t.activity.startnum)+"人团")]),t._v(" "),s("span",{staticClass:"group_tags"},[t._v("·NEW")])])]):t._e()]),t._v(" "),"normal"!=t.proType&&"flash"!=t.proType||""==t.title_tips?t._e():s("div",{staticClass:"pro_title_tips"},[s("span",[t._v(t._s(t.title_tips))])]),t._v(" "),s("div",{staticClass:"pro_spec",attrs:{id:"com"}},[t._m(0),t._v(" "),s("div",{staticStyle:{display:"inline-flex",width:"4rem",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(t.showSpec,function(e,i){return s("span",{key:i},[t._v(t._s(e))])}),0),t._v(" "),s("div",{staticStyle:{display:"inline-flex",width:"0.8rem",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[s("span",[t._v(t._s(t.specNum)+"件")])]),t._v(" "),s("div",{staticClass:"spec_icon",on:{click:t.showModel}},[s("i",{staticClass:"iconfont icon-yuandianzhong"}),t._v(" "),s("i",{staticClass:"iconfont icon-yuandianzhong"}),t._v(" "),s("i",{staticClass:"iconfont icon-yuandianzhong"})])]),t._v(" "),s("div",{staticClass:"pro_service",on:{click:t.showService}},[t._m(1),t._v(" "),s("div",{staticClass:"pro_service_b"},[t._v("\n            "+t._s(t.serviceTitle)+"\n          ")])])]),t._v(" "),"group"==t.proType&&t.groupList.length>0?s("div",{staticClass:"pro_group_title"},[s("span",[t._v(t._s(t.groupTotal)+"人在拼单")]),t._v(" "),s("div",{on:{click:t.moreGroup}},[s("span",[t._v("查看更多")]),t._v(" "),s("i",{staticClass:"iconfont icon-iconfontjiantou5"})])]):t._e(),t._v(" "),"group"==t.proType&&t.groupList.length>0?s("div",{staticClass:"pro_group"},t._l(t.groupList,function(e,i){return s("div",{key:i},[i<2&&0!=t.endTimeList[i]?s("div",{staticClass:"group",staticStyle:{padding:"0.2rem 0"}},[s("div",{staticClass:"group_user"},[s("img",{staticClass:"group_img",attrs:{src:e.image}}),t._v(" "),s("span",[t._v(t._s(e.nickname))])]),t._v(" "),s("div",[s("div",[s("span",[t._v("还差")]),t._v(" "),s("span",{staticClass:"group_num"},[t._v(t._s(e.need_num))]),t._v(" "),s("span",[t._v("人拼成")])]),t._v(" "),s("div",[s("span",{staticClass:"title"},[t._v("剩余")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].hou))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].min))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].sec))])])]),t._v(" "),s("mt-button",{attrs:{size:"small"},on:{click:function(s){return t.golink("/groupResult?type=payshare&orderId=",e.id)}}},[t._v("去拼单")])],1):t._e()])}),0):t._e(),t._v(" "),""!=t.activity.rule&&null!=t.activity.rule?s("div",{staticClass:"pro_group_tips"},[t._m(2),t._v(" "),s("div",{staticClass:"group_text"},[s("span",[t._v(t._s(t.activity.rule))])])]):t._e(),t._v(" "),s("div",{staticClass:"pro_com"},[s("div",{staticClass:"com_head"},[s("span",[t._v("精选评价")]),t._v(" "),t.comList.length>0?s("div",{staticClass:"head_right",on:{click:t.viewAllCom}},[t._v("\n            好评度\n            "),s("span",[t._v(t._s(t.rate))]),t._v(" "),s("i",{staticClass:"iconfont icon-iconfontjiantou5"})]):t._e()]),t._v(" "),0==t.comList.length?s("div",{staticClass:"com_list",attrs:{id:"more"}},[s("div",{staticClass:"com_tips"},[t._v("暂无评价")])]):t._e(),t._v(" "),t.comList.length>0?s("div",{staticClass:"com_list",attrs:{id:"more"}},[t._l(t.comList,function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:i<2,expression:"index<2"}],key:i,staticClass:"com_info"},[s("div",{staticClass:"com_info_head"},[s("div",{staticClass:"user_info"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}],attrs:{src:e.image}}),t._v(" "),s("span",[t._v(t._s(e.nickname))])]),t._v(" "),s("div",{staticClass:"star_level"},[e.score<1?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=1?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<2?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=2?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<3?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=3?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<4?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=4?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<5?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=5?s("i",{staticClass:"iconfont icon-xingping light"}):t._e()])]),t._v(" "),s("div",{staticClass:"com_content"},[s("span",[t._v(t._s(e.comment))])]),t._v(" "),s("div",{staticClass:"com_img"},t._l(e.pic,function(e,i){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"com"}],key:i,attrs:{src:e,"data-comid":"item.id"},on:{click:function(s){return t.previewImg(e)}}})}),0)])}),t._v(" "),s("div",{staticClass:"com_btn",on:{click:t.viewAllCom}},[s("mt-button",{attrs:{size:"normal"}},[t._v("查看全部评价")])],1)],2):t._e()]),t._v(" "),s("div",{staticClass:"pro_show"},[s("div",{staticClass:"show_head"},[s("div",{staticClass:"header_nav"},[s("span",{class:"p"==t.choseid?"nav_text_active":"",attrs:{id:"p"},on:{click:function(e){return t.choseTab("p")}}},[t._v("商品介绍")])])]),t._v(" "),s("div",{staticClass:"pro_img"},[s("div",{staticClass:"pro_html",domProps:{innerHTML:t._s(t.proDetail)}}),t._v(" "),""!=t.proBuy?s("div",{staticClass:"pro_html",domProps:{innerHTML:t._s(t.proBuy)}}):t._e(),t._v(" "),s("div",{staticStyle:{height:"0.94rem",position:"absolute",bottom:"0"},attrs:{id:"recommend",hidden:t.recomList.length<=0}})])]),t._v(" "),s("div",{staticClass:"pro_recomm",attrs:{hidden:t.recomList.length<=0}},[s("span",{staticClass:"i_title"},[t._v("—————— 你可能还喜欢 ——————")]),t._v(" "),s("div",{staticClass:"recom_list"},t._l(t.recomList,function(e,i){return s("div",{key:i,staticClass:"i_pro",on:{click:function(s){return t.goPro(e.goods_id)}}},[s("div",{staticClass:"pro_img"},[s("img",{attrs:{src:e.img}})]),t._v(" "),s("div",{staticClass:"pro_title pro_line_two"},[1==e.promotion?s("div",{staticClass:"pro_level"},[s("img",{attrs:{src:t.imgPath+"member/cu.png"}}),t._v(" "),s("span",[t._v("限时购")])]):t._e(),t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),s("div",{staticClass:"pro_price"},[s("div",{staticStyle:{display:"flex","align-items":"center","line-height":"0.48rem"}},[s("div",{staticClass:"pro_flex",attrs:{hidden:2==e.deal_type}},[1==e.deal_type?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(e.price_sell)),t.isMember?s("span",{staticStyle:{color:"#ff4e79","font-size":"0.23rem"}},[t._v(" / 赚"+t._s(e.back_rebate))]):t._e()]):t._e(),t._v(" "),e.deal_type>=4?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(e.price_sell)),t.isMember?s("span",{staticStyle:{color:"#ff4e79","font-size":"0.23rem"}},[t._v(" / 赚"+t._s(e.back_rebate))]):t._e(),t._v("+")]):t._e()]),t._v(" "),s("div",{staticClass:"pro_flex",attrs:{hidden:1==e.deal_type}},[t._m(3,!0),t._v(" "),2==e.deal_type||3==e.deal_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(e.point))]):t._e(),t._v(" "),1!=e.deal_type&&2!=e.deal_type&&3!=e.deal_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(e.point))]):t._e()])]),t._v(" "),s("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[s("div",{staticStyle:{display:"inline-flex","align-items":"center"}},[s("span",{staticClass:"pro_bg"},[t._v(t._s(e.price_market_from))]),t._v(" "),s("span",{staticClass:"pro_orig line"},[t._v("￥"+t._s(e.price_market))])]),t._v(" "),s("div",{staticClass:"pro_count"},[t._v("销量:"+t._s(e.buy_count))])])])])}),0)])]),t._v(" "),t.allCom?s("div",{staticClass:"pro_com_detail"},[s("div",{staticClass:"com_detail_head"},[s("div",{staticClass:"com_head_left"},[s("span",[t._v("共"+t._s(t.comTotal)+"条评论")])]),t._v(" "),s("div",{staticClass:"com_head_right"},[s("span",[t._v("好评"+t._s(t.rate))])])]),t._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"com_detail_list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},[t._l(t.comDetail,function(e,i){return s("div",{key:i,staticClass:"com_detail_info"},[s("div",{staticClass:"com_detail_userinfo"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}],attrs:{src:e.image}}),t._v(" "),s("div",{staticClass:"com_detail_name"},[s("span",[t._v(t._s(e.nickname))]),t._v(" "),s("div",{staticClass:"com_detail_star"},[e.score<1?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=1?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<2?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=2?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<3?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=3?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<4?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=4?s("i",{staticClass:"iconfont icon-xingping light"}):t._e(),t._v(" "),e.score<5?s("i",{staticClass:"iconfont icon-star"}):t._e(),t._v(" "),e.score>=5?s("i",{staticClass:"iconfont icon-xingping light"}):t._e()])])]),t._v(" "),s("div",{staticClass:"com_detail_com"},[t._v("\n            "+t._s(e.comment)+"\n          ")]),t._v(" "),s("div",{staticClass:"com_detail_imglist"},t._l(e.pic,function(e,i){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"com"}],key:i,attrs:{src:e},on:{click:function(s){return t.previewImg(e)}}})}),0),t._v(" "),s("div",{staticClass:"com_detail_pro"},[s("div",{staticClass:"com_detail_pro_info"},[null!=e.title&&""!=e.title?s("span",[t._v("规格："+t._s(e.title))]):t._e(),t._v(" "),s("span",[t._v("购买日期："+t._s(e.date))])]),t._v(" "),s("div",{staticClass:"com_detaul_oper"})]),t._v(" "),null!=e.reply&&""!=e.reply?s("div",{staticClass:"com_replay"},[s("div",{staticClass:"replay_info"},[t._v("卖家回复:"+t._s(e.reply))]),t._v(" "),s("div",{staticClass:"replay_time"},[t._v(t._s(e.reply_date))])]):t._e()])}),t._v(" "),t.loading?t._e():s("div",{staticClass:"more_load"},[s("mt-spinner",{attrs:{type:"fading-circle"}})],1)],2)]):t._e(),t._v(" "),s("div",{staticClass:"null_view"}),t._v(" "),0==t.isShare?s("div",{},["normal"==t.proType||"flash"==t.proType?s("div",{staticClass:"pro_btn",attrs:{hidden:t.hiddenFix}},[s("div",{staticClass:"btn_blcok pro_server"},[s("mt-button",{staticClass:"show_car",on:{click:function(e){return t.goIndex("/car")}}},[t.$store.state.home.carnum>0?s("div",{staticClass:"badge"},[t.$store.state.home.carnum<99?s("span",[t._v(t._s(t.$store.state.home.carnum))]):s("span",[t._v("···")])]):t._e(),t._v(" "),s("i",{staticClass:"iconfont icon-car"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("购物车")])]),t._v(" "),s("mt-button",{staticClass:"show_share",on:{click:t.zipImg}},[s("i",{staticClass:"iconfont icon-fenxiang1"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("分享")])])],1),t._v(" "),t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy left_none border-radius",on:{click:t.showModel}},[t._v("立即购买")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1!=t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已售完")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1==t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已抢完")]):t._e(),t._v(" "),"true"==t.is_up&&0==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("未开启零售")]):t._e(),t._v(" "),"false"==t.is_up?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已下架")]):t._e()],1):s("div",{staticClass:"pro_btn",attrs:{hidden:t.hiddenFix}},[s("div",{staticClass:"btn_blcok pro_server pro_one"},[s("mt-button",{staticClass:"show_car",on:{click:function(e){return t.goIndex("/car")}}},[t.$store.state.home.carnum>0?s("div",{staticClass:"badge"},[t.$store.state.home.carnum<99?s("span",[t._v(t._s(t.$store.state.home.carnum))]):s("span",[t._v("···")])]):t._e(),t._v(" "),s("i",{staticClass:"iconfont icon-car"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("购物车")])])],1),t._v(" "),"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&0==t.is_retail?s("mt-button",{staticClass:"pro_buy_dis border-left group_buy right_none"},[t._v("未开启零售")]):t._e(),t._v(" "),"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{staticClass:"add_car_group border-left group_buy",on:{click:function(e){return t.buyNow(10)}}},[t._v("单独购买")]):t._e(),t._v(" "),"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.endTime>0?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("开启拼团")]):t._e(),t._v(" "),"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&1==t.group_start&&t.endTime<=0?s("mt-button",{staticClass:"group_buy pro_buy pro_buy_dis border-right"},[t._v("拼团已结束")]):t._e(),t._v(" "),"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&0==t.group_start?s("mt-button",{staticClass:"group_buy pro_buy pro_buy_dis border-right"},[t._v("团购未开始")]):t._e(),t._v(" "),"group"==t.proType&&""!=t.addgroup&&t.maxNum>0&&"true"==t.is_up?s("mt-button",{staticClass:"group_buy pro_buy_group border-right",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即参团")]):t._e(),t._v(" "),("point"==t.proType||"birthday"==t.proType)&&t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"btn_blcok width pro_buy border-radius left_none right_none":"btn_blcok width pro_buy_dis border-radius left_none right_none",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即兑换")]):t._e(),t._v(" "),"group"!=t.proType&&"point"!=t.proType&&"birthday"!=t.proType&&t.activity.is_qualification&&t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"pro_buy btn_blcok width":"pro_buy_dis btn_blcok width",on:{click:function(e){return t.buyNow(0)}}},[t._v("\n          立即购买")]):t._e(),t._v(" "),0==t.activity.is_qualification&&1==t.isFlash&&t.maxNum>0&&"true"==t.is_up&&"birthday"!=t.proType&&"point"!=t.proType&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"btn_blcok width pro_buy":"btn_blcok width pro_buy_dis",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即购买")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1!=t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width_long pro_buy pro_buy_dis left_none border-radius"},[t._v("已售完\n        ")]):t._e(),t._v(" "),"false"==t.is_up?s("mt-button",{staticClass:"btn_blcok width_long pro_buy pro_buy_dis left_none border-radius"},[t._v("已下架")]):t._e()],1)]):t._e(),t._v(" "),1==t.isShare?s("div",{},["normal"==t.proType||"flash"==t.proType?s("div",{staticClass:"pro_btn",attrs:{hidden:t.hiddenFix}},[t.isMember?s("section",{staticStyle:{width:"100%",display:"flex",height:"1.28rem","align-items":"center"}},[s("div",{staticClass:"btn_blcok pro_one"},[s("mt-button",{staticClass:"show_car",on:{click:function(e){return t.goIndex("/car")}}},[t.$store.state.home.carnum>0?s("div",{staticClass:"badge"},[t.$store.state.home.carnum<99?s("span",[t._v(t._s(t.$store.state.home.carnum))]):s("span",[t._v("···")])]):t._e(),t._v(" "),s("i",{staticClass:"iconfont icon-car"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("购物车")])])],1),t._v(" "),1==t.price_type&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"add_car share_save border-left",on:{click:function(e){return t.showModel(1)}}},[s("span",{staticClass:"show_span"},[t._v("自购省")]),t._v(" "),s("span",{staticClass:"litle_span"},[t._v("至少￥"+t._s(t.default_spec.back_rebate))])]):t._e(),t._v(" "),1==t.price_type&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"pro_buy share_save border-right",on:{click:t.toshare}},[s("span",{staticClass:"show_span"},[t._v("分享赚")]),t._v(" "),s("span",{staticClass:"litle_span"},[t._v("至少￥"+t._s(t.default_spec.back_rebate))])]):t._e(),t._v(" "),1!=t.price_type&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"add_car share_save border-left",on:{click:function(e){return t.showModel(1)}}},[t._v("购买")]):t._e(),t._v(" "),1!=t.price_type&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"pro_buy share_save border-right",on:{click:t.toshare}},[t._v("\n            分享")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1!=t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("已售完")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1==t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("已抢完")]):t._e(),t._v(" "),"true"==t.is_up&&0==t.is_retail?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("未开启零售")]):t._e(),t._v(" "),"false"==t.is_up?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("已下架")]):t._e()],1):s("section",{staticStyle:{width:"100%",display:"flex",height:"1.28rem","align-items":"center"}},[s("div",{staticClass:"btn_blcok pro_server"},[s("mt-button",{staticClass:"show_car",on:{click:function(e){return t.goIndex("/car")}}},[t.$store.state.home.carnum>0?s("div",{staticClass:"badge"},[t.$store.state.home.carnum<99?s("span",[t._v(t._s(t.$store.state.home.carnum))]):s("span",[t._v("···")])]):t._e(),t._v(" "),s("i",{staticClass:"iconfont icon-car"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("购物车")])]),t._v(" "),s("mt-button",{staticClass:"show_share",on:{click:t.zipImg}},[s("i",{staticClass:"iconfont icon-fenxiang1"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("分享")])])],1),t._v(" "),1==t.price_type&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"pro_buy width btn_blcok left_none border-radius",on:{click:function(e){return t.showModel(1)}}},[t._v("购买")]):t._e(),t._v(" "),1!=t.price_type&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"pro_buy width btn_blcok left_none border-radius",on:{click:function(e){return t.showModel(1)}}},[t._v("购买")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1!=t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已售完")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1==t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已抢完")]):t._e(),t._v(" "),"true"==t.is_up&&0==t.is_retail?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("未开启零售")]):t._e(),t._v(" "),"false"==t.is_up?s("mt-button",{staticClass:"btn_blcok width pro_buy_dis left_none border-radius"},[t._v("已下架")]):t._e()],1)]):s("div",{staticClass:"pro_btn",attrs:{hidden:t.hiddenFix}},[s("div",{staticClass:"btn_blcok pro_one"},[s("mt-button",{staticClass:"show_car",on:{click:function(e){return t.goIndex("/car")}}},[t.$store.state.home.carnum>0?s("div",{staticClass:"badge"},[t.$store.state.home.carnum<99?s("span",[t._v(t._s(t.$store.state.home.carnum))]):s("span",[t._v("···")])]):t._e(),t._v(" "),s("i",{staticClass:"iconfont icon-car"}),t._v(" "),s("span",{staticClass:"btn_text"},[t._v("购物车")])])],1),t._v(" "),1==t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&0==t.is_retail?s("mt-button",{staticClass:"pro_buy_dis border-left group_buy right_none"},[s("span",{staticClass:"show_span"},[t._v("未开启零售")])]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"add_car_group border-left group_buy",on:{click:function(e){return t.buyNow(10)}}},[s("span",{staticClass:"show_span"},[t._v("单独购买")]),t._v(" "),s("span",{staticClass:"litle_span"},[t._v("至少￥"+t._s(t.default_spec.back_rebate))])]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.endTime>0&&t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[s("span",{staticClass:"show_span"},[t._v("开启拼团")]),t._v(" "),s("span",{staticClass:"litle_span"},[t._v("至少￥"+t._s(t.activity.back_rebate))])]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&""!=t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[s("span",{staticClass:"show_span"},[t._v("立即参团")]),t._v(" "),s("span",{staticClass:"litle_span"},[t._v("至少￥"+t._s(t.activity.back_rebate))])]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(10)}}},[t._v("单独购买")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&t.isMember&&0==t.is_retail?s("mt-button",{staticClass:"pro_buy_dis border-right group_buy right_none"},[t._v("未开启零售")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.endTime>0&&t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("开启拼团\n        ")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&""!=t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即参团")]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"add_car_group border-left group_buy",on:{click:function(e){return t.buyNow(10)}}},[t._v("单独购买")]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&0==t.is_retail?s("mt-button",{staticClass:"pro_buy_dis border-left group_buy right_none"},[t._v("未开启零售")]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.endTime>0&&!t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("开启拼团\n        ")]):t._e(),t._v(" "),1==t.price_type&&"group"==t.proType&&""!=t.addgroup&&t.maxNum>0&&"true"==t.is_up&&!t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即参团")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&1==t.is_retail?s("mt-button",{staticClass:"add_car_group border-left group_buy",on:{click:function(e){return t.buyNow(10)}}},[t._v("单独购买")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&t.maxNum>0&&"true"==t.is_up&&!t.isMember&&0==t.is_retail?s("mt-button",{staticClass:"pro_buy_dis border-left group_buy right_none"},[t._v("未开启零售")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&t.endTime>0&&!t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("开启拼团\n        ")]):t._e(),t._v(" "),1!=t.price_type&&"group"==t.proType&&""!=t.addgroup&&t.maxNum>0&&"true"==t.is_up&&!t.isMember?s("mt-button",{staticClass:"pro_buy_group border-right group_buy",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即参团")]):t._e(),t._v(" "),"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&1==t.group_start&&t.endTime<=0?s("mt-button",{staticClass:"group_buy pro_buy pro_buy_dis border-right"},[t._v("拼团已结束")]):t._e(),t._v(" "),"group"==t.proType&&""==t.addgroup&&t.maxNum>0&&"true"==t.is_up&&0==t.group_start?s("mt-button",{staticClass:"group_buy pro_buy pro_buy_dis border-right"},[t._v("团购未开始")]):t._e(),t._v(" "),("point"==t.proType||"birthday"==t.proType)&&t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"btn_blcok width pro_buy border-radius left_none right_none":"btn_blcok width pro_buy_dis border-radius left_none right_none",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即兑换")]):t._e(),t._v(" "),"group"!=t.proType&&"point"!=t.proType&&"birthday"!=t.proType&&t.activity.is_qualification&&t.maxNum>0&&"true"==t.is_up&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"pro_buy btn_blcok width":"pro_buy_dis btn_blcok width",on:{click:function(e){return t.buyNow(0)}}},[t._v("\n          立即购买")]):t._e(),t._v(" "),0==t.activity.is_qualification&&1==t.isFlash&&t.maxNum>0&&"true"==t.is_up&&"birthday"!=t.proType&&"point"!=t.proType&&1==t.is_retail?s("mt-button",{class:t.activity.is_qualification?"btn_blcok width pro_buy":"btn_blcok width pro_buy_dis",on:{click:function(e){return t.buyNow(0)}}},[t._v("立即购买")]):t._e(),t._v(" "),t.maxNum<=0&&"true"==t.is_up&&1!=t.isFlash&&1==t.is_retail?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("已售完")]):t._e(),t._v(" "),"false"==t.is_up?s("mt-button",{staticClass:"btn_blcok width_long pro_buy_dis left_none border-radius"},[t._v("已下架")]):t._e()],1)]):t._e(),t._v(" "),t.modelShow?t._e():s("div",{staticClass:"pro_spec_model",on:{click:t.closeModel}}),t._v(" "),t.modelShow?t._e():s("div",{staticClass:"pro_spec_detail",class:{"animated slideOutDown":t.modelShow,"animated slideInUp":!t.modelShow}},[s("div",{staticClass:"spec_head"},[s("div",{staticClass:"spec_pro_img",on:{click:function(e){return t.previewImg(t.staticImg)}}},[s("img",{attrs:{src:t.staticImg,mode:"widthFix"}})]),t._v(" "),s("div",{staticClass:"spec_close",on:{click:t.closeModel}},[s("i",{staticClass:"iconfont icon-guanbi"})]),t._v(" "),"group"==t.proType&&-2!=t.buyType?s("div",{staticClass:"spec_pro_price"},[1==t.price_type?s("span",{staticClass:"spec_pro_nowprice"},[t._v("￥"+t._s(t.activity.price)),1==t.isShare&&t.isMember?s("span",[t._v(" /\n              返￥"+t._s(t.activity.back_rebate))]):t._e()]):t._e(),t._v(" "),4==t.price_type?s("span",{staticClass:"spec_pro_nowprice"},[t._v("￥"+t._s(t.activity.price_combine)+"+")]):t._e(),t._v(" "),1!=t.price_type?s("div",{staticClass:"spec_pro_inter_img"},[s("i",{staticClass:"iconfont icon-jifen1"})]):t._e(),t._v(" "),4==t.price_type?s("span",{staticClass:"spec_pro_integral"},[t._v(t._s(t.activity.point_combine))]):t._e(),t._v(" "),2==t.price_type?s("span",{staticClass:"spec_pro_integral"},[t._v(t._s(t.activity.point))]):t._e()]):s("div",{staticClass:"spec_pro_price"},[1==t.default_price_type?s("span",{staticClass:"spec_pro_nowprice"},[t._v("￥"+t._s(t.default_spec.price_sell)),1==t.isShare&&t.isMember?s("span",[t._v(" / 返￥"+t._s(t.default_spec.back_rebate))]):t._e()]):t._e(),t._v(" "),t.default_price_type>=4?s("span",{staticClass:"spec_pro_nowprice"},[t._v("￥"+t._s(t.default_spec.price_combine)+"+")]):t._e(),t._v(" "),1!=t.default_price_type?s("div",{staticClass:"spec_pro_inter_img"},[s("i",{staticClass:"iconfont icon-jifen1"})]):t._e(),t._v(" "),t.default_price_type>=4?s("span",{staticClass:"spec_pro_integral"},[t._v(t._s(t.default_spec.point_combine))]):t._e(),t._v(" "),2==t.default_price_type||3==t.default_price_type?s("span",{staticClass:"spec_pro_integral"},[t._v(t._s(t.default_spec.point))]):t._e()]),t._v(" "),s("div",{staticClass:"spec_pro_code"},[s("div",[s("span",[t._v(t._s(t.price_market_from))]),t._v(" "),s("span",{staticClass:"spec_pro_orig"},[t._v("￥"+t._s(t.price_market))])])])]),t._v(" "),s("div",{staticClass:"spec_body"},[s("div",{attrs:{hidden:0==t.isFlash&&("normal"==t.proType||"flash"==t.proType)||"birthday"==t.proType}},[s("div",{staticClass:"spec_title"},[t._v("\n            结算方式\n          ")]),t._v(" "),"group"==t.proType&&-2!=t.buyType?s("div",{staticClass:"spec_type"},[t.sale_type>=4?s("mt-button",{class:4==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,4)}}},[t._v("\n              ￥"+t._s(t.activity.price_combine)+"+"),s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.activity.point_combine))]):t._e(),t._v(" "),2!=t.sale_type&&6!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:1==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,1)}}},[t._v("￥"+t._s(t.activity.price))]):t._e(),t._v(" "),1!=t.sale_type&&5!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:2==t.price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(0,2)}}},[s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.activity.point))]):t._e()],1):s("div",{staticClass:"spec_type"},[t.sale_type>=4?s("mt-button",{class:t.default_price_type>=4?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(1,4)}}},[t._v("￥"+t._s(t.default_spec.price_combine)+"+"),s("i",{staticClass:"iconfont icon-jifen1"}),t._v(t._s(t.default_spec.point_combine))]):t._e(),t._v(" "),2!=t.sale_type&&6!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:1==t.default_price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(1,1)}}},[t._v("\n              ￥"+t._s(t.default_spec.price_sell))]):t._e(),t._v(" "),1!=t.sale_type&&5!=t.sale_type&&4!=t.sale_type?s("mt-button",{class:2==t.default_price_type?"button_click":"",attrs:{size:"small"},on:{click:function(e){return t.chosePriceType(1,2)}}},[s("i",{staticClass:"iconfont icon-jifen1"}),t._v(" "+t._s(t.default_spec.point))]):t._e()],1)]),t._v(" "),t._l(t.specList,function(e,i){return s("div",{key:i,attrs:{hidden:!t.hasSpec}},[s("div",{staticClass:"spec_title"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),s("div",{staticClass:"spec_type"},t._l(e.list,function(e,i){return s("mt-button",{key:i,class:e.ischose?"button_click":"",attrs:{size:"small"},on:{click:function(s){return t.choseType(e.tid,e.pid)}}},[t._v(t._s(e.name))])}),1)])}),t._v(" "),"birthday"!=t.proType?s("div",{staticClass:"spec_num"},[s("span",[t._v("数量")]),t._v(" "),s("div",{staticClass:"pro_icon"},[s("mt-button",{staticClass:"pro_spec_btn",attrs:{size:"small",id:"0","data-value":"less",disabled:1==t.specNum},on:{click:t.lessNum}},[t._v("-")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.specNum,expression:"specNum"}],attrs:{type:"text"},domProps:{value:t.specNum},on:{blur:function(e){return t.changeValue(t.specNum)},input:function(e){e.target.composing||(t.specNum=e.target.value)}}}),t._v(" "),s("mt-button",{staticClass:"pro_spec_btn",attrs:{size:"small",id:"1","data-value":"add",disabled:t.specNum>=99||t.specNum==t.maxNum},on:{click:t.addNum}},[t._v("+")])],1)]):t._e()],2),t._v(" "),t.maxNum>0&&"true"==t.is_up&&1==t.spec_up&&1==t.is_retail?s("div",{staticClass:"spec_btn_bg"},[0==t.buyType&&"birthday"!=t.proType?s("div",{staticClass:"spec_btn"},[s("mt-button",{staticClass:"add_car border-left",attrs:{id:"0"},on:{click:function(e){return t.addCar(0)}}},[t._v("加入购物车")]),t._v(" "),s("mt-button",{staticClass:"pro_buy border-right",attrs:{id:"1"},on:{click:function(e){return t.addCar(1)}}},[t._v("立即购买")])],1):s("div",{staticClass:"spec_btn"},["normal"!=t.proType||1==t.isFlash?s("mt-button",{staticClass:"surebtn border-radius",attrs:{id:"1"},on:{click:function(e){return t.addCar(1)}}},[t._v("确认\n          ")]):s("mt-button",{staticClass:"surebtn border-radius",on:{click:t.addCar}},[t._v("确认")])],1)]):t._e(),t._v(" "),(t.maxNum<=0||0==t.spec_up)&&"true"==t.is_up&&1==t.is_retail?s("div",{staticClass:"spec_btn_bg"},[s("div",{staticClass:"spec_btn"},[s("mt-button",{staticClass:"surebtn_false border-radius"},[t._v("已售完")])],1)]):t._e(),t._v(" "),"true"==t.is_up&&0==t.is_retail?s("div",{staticClass:"spec_btn_bg"},[s("div",{staticClass:"spec_btn"},["group"==t.proType?s("mt-button",{staticClass:"surebtn border-radius",attrs:{id:"1"},on:{click:function(e){return t.addCar(1)}}},[t._v("确认")]):s("mt-button",{staticClass:"surebtn_false border-radius"},[t._v("未开启零售")])],1)]):t._e(),t._v(" "),"false"==t.is_up?s("div",{staticClass:"spec_btn_bg"},[s("div",{staticClass:"spec_btn"},[s("mt-button",{staticClass:"surebtn_false border-radius"},[t._v("已下架")])],1)]):t._e()]),t._v(" "),s("div",{staticClass:"pro_server_bg",attrs:{hidden:t.servershow},on:{click:t.closeserver}}),t._v(" "),s("div",{staticClass:"pro_server_detail",class:{"animated slideOutDown":t.servershow,"animated slideInUp":!t.servershow},attrs:{hidden:t.servershow}},[s("div",{staticClass:"pro_server_detail_t"},[t._v("服务")]),t._v(" "),s("div",{staticClass:"pro_server_detail_c"},[s("div",{staticStyle:{height:"6.6rem","overflow-y":"scroll","overflow-x":"hidden"}},[s("div",{staticClass:"pro_html",domProps:{innerHTML:t._s(t.serviceDetail)}})])])]),t._v(" "),s("div",{staticClass:"group_model_bg",attrs:{hidden:t.groupShow},on:{click:t.closeGroup}}),t._v(" "),s("div",{staticClass:"group_model",attrs:{hidden:t.groupShow}},[s("div",{staticClass:"group_model_body"},[s("div",{staticClass:"group_model_icon",on:{click:t.closeGroup}},[s("img",{staticStyle:{width:"0.62rem",height:"0.62rem"},attrs:{src:t.imgPath+"pro/close.png"}})]),t._v(" "),s("div",{staticClass:"group_model_title"},[t._v("正在拼单")]),t._v(" "),s("div",{staticClass:"group_model_list",style:{height:t.g_list_height+"rem"},attrs:{"scroll-y":""}},t._l(t.groupList,function(e,i){return s("div",{key:i},[0!=t.endTimeList[i]?s("div",{staticClass:"group_block"},[s("div",{staticClass:"group_block_left"},[s("img",{staticClass:"group_img",attrs:{src:e.image}}),t._v(" "),s("div",{staticClass:"group_right"},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("span",{staticClass:"group_name"},[t._v(t._s(e.nickname))]),t._v(" "),s("span",{staticClass:"group_num"},[t._v("还差"+t._s(e.need_num)+"人拼成")])]),t._v(" "),s("div",{staticClass:"group_right_time"},[s("span",{staticClass:"title"},[t._v("剩余")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].hou))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].min))]),t._v(" "),s("span",{staticClass:"text"},[t._v(":")]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t.saleTimeList[i].sec))])])])]),t._v(" "),s("div",{staticClass:"group_block_right"},[s("mt-button",{attrs:{size:"small"},on:{click:function(s){return t.golink("/groupResult?type=payshare&orderId=",e.id)}}},[t._v("去拼单")])],1)]):t._e()])}),0)])]),t._v(" "),t.imgShow?s("div",{staticClass:"pro_com_img_bg",attrs:{catchtouchmove:"ture"},on:{click:t.hiddenImg}}):t._e(),t._v(" "),t.imgShow?s("div",{staticClass:"pro_com_img",attrs:{catchtouchmove:"ture"},on:{click:t.hiddenImg}},[s("img",{attrs:{src:t.img_show_big,alt:""},on:{click:t.hiddenImg}})]):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"s_share",attrs:{hidden:t.showShare}},[s("div",{staticClass:"s_share_bg",attrs:{hidden:t.showShare},on:{click:t.closeShare}}),t._v(" "),s("div",{staticClass:"share_content"},[s("div",{ref:"imageTofile",staticClass:"share_content_canvas"},[s("div",{staticClass:"s_con_user"},[s("img",{ref:"share_head",staticClass:"s_con_user_img",attrs:{src:t.canvas_avatar}}),t._v(" "),s("div",{staticClass:"s_con_use_tit"},[s("span",[t._v(t._s(t.userInfo.nickname))]),t._v(" "),s("span",[t._v("推荐给你一个好商品")])])]),t._v(" "),s("div",{staticClass:"s_con_showImg"},[s("img",{ref:"share_pro",attrs:{src:t.canvas_pro_img}})]),t._v(" "),s("div",{staticClass:"s_con_price"},[s("div",{staticClass:"s_con_price_l"},[s("span",[t._v("￥")]),t._v(" "),s("span",[t._v(t._s(t.proInfo.price_sell))])]),t._v(" "),s("div",{staticClass:"s_con_price_r"},[s("span",[t._v("￥")]),t._v(" "),s("span",[t._v(t._s(t.proInfo.price_market))]),t._v(" "),s("span",{staticClass:"xiexian",style:{width:t.FontWidth+"rem"}})])]),t._v(" "),s("div",{staticClass:"s_con_title"},t._l(t.canvas_title,function(e,i){return s("span",{key:i},[t._v(t._s(e))])}),0),t._v(" "),s("div",{staticClass:"wx_sao"},[s("img",{ref:"share_qrcode",attrs:{src:t.erweimasrc}})])]),t._v(" "),s("div",{staticClass:"close",on:{click:t.closeShare}},[s("i",{staticClass:"iconfont icon-close"})])]),t._v(" "),s("mt-button",{staticClass:"share_wx",on:{click:t.zipImg}},[s("i",{staticClass:"iconfont icon-wecaht"}),t._v(" "),s("span",[t._v("分享到微信")])]),t._v(" "),s("mt-button",{staticClass:"save_img",on:{click:t.saveImg}},[s("i",{staticClass:"iconfont icon-xiazai"}),t._v(" "),s("span",[t._v("保存图片")])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"inline-flex",width:"1rem",color:"#444","align-items":"center"}},[e("i",{staticClass:"iconfont icon-guige",staticStyle:{"padding-right":"0.1rem",color:"#222","font-size":"0.32rem","margin-top":"-0.05rem"}}),this._v("默认\n          ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pro_service_t"},[e("div",{staticStyle:{display:"inline-flex"}},[e("i",{staticClass:"iconfont icon-fuwumb",staticStyle:{"padding-right":"0.1rem",display:"inline-block","margin-top":"-0.06rem/100rem"}}),this._v(" 服务\n            ")]),this._v(" "),e("div",{staticClass:"pro_service_t_r"},[e("span",[this._v("详情")]),this._v(" "),e("i",{staticClass:"iconfont icon-iconfontjiantou5"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:" group_head"},[e("span",[this._v("团购规则")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pro_inter_img"},[e("i",{staticClass:"iconfont icon-jifen1"})])}]};var f=s("VU/8")(y,b,!1,function(t){s("bNZM")},"data-v-dcd48e52",null);e.default=f.exports},bNZM:function(t,e){}});
//# sourceMappingURL=23.c8833916899300e05c08.js.map