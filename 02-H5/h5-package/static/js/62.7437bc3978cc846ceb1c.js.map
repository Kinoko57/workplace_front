{"version":3,"sources":["webpack:///src/views/other/useCoupon.vue","webpack:///./src/views/other/useCoupon.vue?15ec","webpack:///./src/views/other/useCoupon.vue"],"names":["useCoupon","name","components","commonHeader","common_header","InfiniteScroll","mint_ui_common","Indicator","Button","Lazyload","Toast","data","imgPath","h_title","couList","couUseList","couNoList","staticAdd","couValue","choseId","cou_id","couId","choseType","isChecked","pid","couCode","default_code","default_cou","ship_id","addType","orderType","chooseAdd","couRevise","addRevise","mounted","activated","document","getElementById","scrollIntoView","options","this","$route","query","beforeInfo","$store","state","home","choseAddr","console","log","couInfo","couisrevise","addisRevise","info","notUseList","i","length","totime","indexOf","Object","pubilc","undefined","checked","code","cashworth","id","canUseList","_i","can_use","push","methods","extends_default","vuex_esm","setChoseAddr","setUserInfo","goTop","block","behavior","choseTypeList","choseCou","event","_this","$forceUpdate","_i2","useCou","that","addId","substring","coupon_id","coupon_code","cart_type","shipmethod_id","type","address_id","api","then","res","isSuccess","amount","static_freight","cou","coupon_discount","cart_params","concat","cost_freight","window","localStorage","setItem","$router","go","_info","goBack","computed","other_useCoupon","render","_vm","_h","$createElement","_c","_self","attrs","showback","_v","on","returnTop","staticStyle","height","staticClass","class","click","$event","_s","_e","_l","item","index","key","src","order_price","title","content","hidden","directives","rawName","value","expression","domProps","Array","isArray","change","$$a","$$el","target","$$c","$$i","$set","slice","for","size","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/62.7437bc3978cc846ceb1c.js","sourcesContent":["<template>\r\n  <div>\r\n    <common-header :h_title=\"h_title\" :showback=\"true\"></common-header>\r\n    <return-top @returnTop='goTop'></return-top>\r\n    <div style='height:0.9rem' id='top'></div>\r\n    <div class='use_coupon'>\r\n      <div class='coupon_body'>\r\n        <div class='coupon_nav'>\r\n          <span :class=\"choseType==0?'text_active':''\" @click='choseTypeList(0)' id='0'>可用优惠券({{couUseList.length}})</span>\r\n          <span :class=\"choseType==1?'text_active':''\" @click='choseTypeList(1)' id='1'>不可使用优惠券({{couNoList.length}})</span>\r\n        </div>\r\n        <div class='cou_tip' v-if='isChecked'>\r\n          使用优惠券1张，共抵用\r\n          <span>￥{{couValue}}</span>\r\n        </div>\r\n        <div class='cou_list'>\r\n          <div class='cou_info' v-for=\"(item,index) in couList\" :key=\"index\">\r\n            <img :src=\"imgPath+'order/cop_bg.png'\"  v-if='choseType==0' />\r\n            <img :src=\"imgPath+'order/cop_bg_01.png'\" v-if='choseType==1' />\r\n            <div class='cou_more'>\r\n              <div class='cou_value'>￥\r\n                <span>{{item.cashworth}}</span>\r\n              </div>\r\n              <div class='cou_more_tips'>\r\n                <span v-if='item.order_price>0'>满{{item.order_price}}可用</span>\r\n                <span v-else>无门槛通用</span>\r\n              </div>\r\n            </div>\r\n            <div class='cou_tips'>\r\n              <span class='cou_title'>{{item.title}}</span>\r\n              <div class='cou_time'>有效期至{{item.totime}}</div>\r\n              <span class='cou_type' v-if='item.name!=null'>适用于{{item.name}}{{item.content}}</span>\r\n              <span class='cou_type' v-if='item.name==null'>全类目通用{{item.content}}</span>\r\n            </div>\r\n            <div class='cou_radio' :hidden='choseType==1'>\r\n              <input v-model=\"item.checked\" :checked=\"item.checked\" :id='item.id' type='checkbox' @click=\"choseCou(item)\" />\r\n              <label :for=\"item.id\"></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div class='null_view'></div>\r\n      <div class='cou_btn' @click='useCou' v-if='choseType==0&&couUseList.length>0'>\r\n        <mt-button size='normal'>确定</mt-button>\r\n      </div>\r\n      <div class='cou_btn' @click='goBack' v-if='couUseList.length==0||choseType==1'>\r\n        <mt-button size='normal'>返回</mt-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport commonHeader from 'common/common-header'\r\nimport {\r\n  InfiniteScroll,\r\n  Indicator,\r\n  Button,\r\n  Lazyload,\r\n  Toast\r\n} from 'mint-ui'\r\nimport {\r\n  cancelCou,\r\n  getPriceByTrack\r\n} from '@/api/index'\r\n  // import {\r\n  //   countDown\r\n  // } from '@/store/pubilc.js'\r\nimport {\r\n  mapMutations,\r\n  mapGetters\r\n} from 'vuex'\r\nimport {\r\n  parseTime\r\n} from '@/store/pubilc.js'\r\n  // import {\r\n  //   setToken,\r\n  //   getToken\r\n  // } from '@/store/auth'\r\nexport default {\r\n  name: 'UseCoupon',\r\n  components: {\r\n    commonHeader,\r\n    InfiniteScroll,\r\n    Indicator,\r\n    Button,\r\n    Lazyload,\r\n    Toast\r\n  },\r\n  data() {\r\n    return {\r\n      imgPath: process.env.FilE_URL,\r\n      h_title: '使用优惠券',\r\n      couList: [],\r\n      couUseList: [],\r\n      couNoList: [],\r\n      staticAdd: [],\r\n      couValue: 0,\r\n      choseId: 0,\r\n      cou_id: 0,\r\n      couId: 0,\r\n      choseType: 0,\r\n      isChecked: false,\r\n      pid: '',\r\n      couCode: '',\r\n      default_code: '',\r\n      default_cou: '',\r\n      ship_id: '',\r\n      addType: '',\r\n      orderType: '',\r\n      chooseAdd: '',\r\n      couRevise: '',\r\n      addRevise: ''\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  activated() {\r\n    document.getElementById('top').scrollIntoView(false)\r\n    let options = this.$route.query\r\n    let beforeInfo = this.$store.state.home.choseAddr\r\n    console.log(beforeInfo)\r\n    this.choseType = 0\r\n    this.default_cou = beforeInfo.default_cou\r\n    this.ship_id = beforeInfo.ship_id\r\n    this.addType = beforeInfo.addType\r\n    this.orderType = beforeInfo.orderType\r\n    this.staticAdd = beforeInfo.staticAdd\r\n    this.chooseAdd = beforeInfo.chooseAdd\r\n    this.couInfo = beforeInfo.couInfo\r\n    this.couCode = beforeInfo.couCode\r\n    this.couRevise = beforeInfo.couisrevise\r\n    this.addRevise = beforeInfo.addisRevise\r\n    this.couId = beforeInfo.couId\r\n    this.pid = options.pid\r\n    let info = beforeInfo.couList\r\n    this.couUseList = []\r\n    this.notUseList = []\r\n    console.log(info)\r\n    if (info == null) {\r\n      info = []\r\n    }\r\n    console.log('所有优惠券')\r\n    console.log(info)\r\n    for (let i = 0; i < info.length; i++) {\r\n      if (info[i].totime.indexOf('-') === -1) {\r\n        info[i].totime = parseTime(info[i].totime, '{y}-{m}-{d}')\r\n      }\r\n      if (info[i].checked !== undefined && (info[i].checked === 'true' || info[i].checked === true)) {\r\n        this.default_code = info[i].code\r\n        this.couValue = info[i].cashworth\r\n        this.isChecked = true\r\n        this.choseId = info[i].code\r\n        this.cou_id = info[i].id\r\n        info[i].checked = true\r\n      } else {\r\n        info[i].checked = false\r\n      }\r\n    }\r\n    var canUseList = []\r\n    var notUseList = []\r\n    for (let i = 0; i < info.length; i++) {\r\n      if (info[i].can_use != undefined && info[i].can_use == true) {\r\n        canUseList.push(info[i])\r\n      } else {\r\n        notUseList.push(info[i])\r\n      }\r\n    }\r\n    console.log()\r\n    this.couList = canUseList\r\n    this.couUseList = canUseList\r\n    this.couNoList = notUseList\r\n    this.pid = options.pid\r\n    console.log('可使用优惠券')\r\n    console.log(this.couUseList)\r\n    console.log('不可使用优惠券')\r\n    console.log(this.couNoList)\r\n    // Indicator.open('加载中...')\r\n    // console.log(this.$route.query)\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setChoseAddr: 'SET_CHOSEADDR',\r\n      setUserInfo: 'SET_USERINFO'\r\n    }),\r\n    goTop() {\r\n      console.log('回到顶部')\r\n      document.getElementById('coll').scrollIntoView({\r\n        block: 'start',\r\n        behavior: 'smooth'\r\n      })\r\n    },\r\n    choseTypeList(id) {\r\n      if (id === 0) {\r\n        this.couList = this.couUseList\r\n      } else {\r\n        this.couList = this.couNoList\r\n      }\r\n      this.choseType = id\r\n    },\r\n    choseCou(event) {\r\n      event.checked = !event.checked\r\n      console.log(event)\r\n      if (event.checked) {\r\n        for (let i = 0; i < this.couList.length; i++) {\r\n          this.couList[i].checked = false\r\n          if (this.couList[i].id === event.id) {\r\n            this.couList[i].checked = true\r\n            this.couValue = this.couList[i].cashworth\r\n            this.isChecked = true\r\n            this.choseId = this.couList[i].code\r\n          }\r\n        }\r\n        this.cou_id = event.id\r\n        this.default_code = event.code\r\n        this.$forceUpdate(() => {\r\n          this.couUseList = this.couList\r\n        })\r\n      } else {\r\n        for (let i = 0; i < this.couList.length; i++) {\r\n          this.couList[i].checked = false\r\n          if (this.couList[i].id === event.id) {\r\n            this.couList[i].checked = false\r\n            this.couValue = 0\r\n            this.isChecked = false\r\n          }\r\n        }\r\n        this.choseId = ''\r\n        this.cou_id = ''\r\n        this.default_code = ''\r\n        this.$forceUpdate(() => {\r\n          this.couUseList = this.couList\r\n        })\r\n      }\r\n      console.log(this.couUseList)\r\n    },\r\n    useCou: function () {\r\n      var that = this\r\n      var addId = ''\r\n      if (that.staticAdd.length > 0) {\r\n        addId = that.staticAdd[0].id\r\n      }\r\n      if (that.choseId === '') {\r\n        if (that.default_cou.indexOf('c=') !== -1) {\r\n          that.default_cou = that.default_cou.substring(2)\r\n        }\r\n        let info = {\r\n          coupon_id: that.cou_id,\r\n          coupon_code: that.default_cou,\r\n          checked: that.pid,\r\n          cart_type: that.addType,\r\n          shipmethod_id: that.ship_id,\r\n          type: that.orderType,\r\n          address_id: addId\r\n        }\r\n        cancelCou(info).then(res => {\r\n          if (res.isSuccess) {\r\n            let data = {\r\n              couisrevise: false,\r\n              chooseAdd: '',\r\n              couInfo: '',\r\n              couValue: '',\r\n              couCode: '',\r\n              amount: '',\r\n              couList: [],\r\n              static_freight: '',\r\n              staticAdd: []\r\n            }\r\n            that.setChoseAddr(data)\r\n            data.amount = res.amount\r\n            var cou = ''\r\n            if (that.choseId === '') {\r\n              cou = '选择优惠券'\r\n            } else {\r\n              cou = '已减' + res.coupon_discount + '元'\r\n            }\r\n            if (res.amount !== undefined) {\r\n              data.amount = res.amount\r\n            } else {\r\n              data.amount = that.amount\r\n            }\r\n            data.couInfo = cou\r\n            data.couisrevise = true\r\n            data.addisRevise = that.addRevise\r\n            data.chooseAdd = that.chooseAdd\r\n            data.staticAdd = that.staticAdd\r\n            data.couValue = res.coupon_discount\r\n            data.couCode = res.cart_params\r\n            data.couId = res.coupon_id\r\n            data.couList = that.couList.concat(that.couNoList)\r\n            data.static_freight = res.cost_freight\r\n            console.log(data.couList)\r\n            that.setChoseAddr(data)\r\n            window.localStorage.setItem('neworder', false)\r\n            that.$router.go(-1)\r\n          }\r\n        })\r\n      } else {\r\n        let info = {\r\n          coupon_id: that.cou_id,\r\n          coupon_code: that.choseId,\r\n          checked: that.pid,\r\n          shipmethod_id: that.ship_id,\r\n          cart_type: that.addType,\r\n          type: that.orderType,\r\n          address_id: addId\r\n        }\r\n        getPriceByTrack(info).then(res => {\r\n          if (res.isSuccess) {\r\n            let data = {\r\n              couisrevise: false,\r\n              chooseAdd: '',\r\n              couInfo: '',\r\n              couValue: '',\r\n              couCode: '',\r\n              amount: '',\r\n              couList: [],\r\n              static_freight: '',\r\n              staticAdd: []\r\n            }\r\n            that.setChoseAddr(data)\r\n            data.amount = res.amount\r\n            var cou = ''\r\n            if (that.choseId === '') {\r\n              cou = '选择优惠券'\r\n            } else {\r\n              cou = '已减' + res.coupon_discount + '元'\r\n            }\r\n            if (res.amount !== undefined) {\r\n              data.amount = res.amount\r\n            } else {\r\n              data.amount = that.amount\r\n            }\r\n            console.log(cou)\r\n            data.couInfo = cou\r\n            data.couisrevise = true\r\n            data.addisRevise = that.addRevise\r\n            data.chooseAdd = that.chooseAdd\r\n            data.staticAdd = that.staticAdd\r\n            data.couValue = res.coupon_discount\r\n            data.couCode = res.cart_params\r\n            data.couId = res.coupon_id\r\n            data.couList = that.couList.concat(that.couNoList)\r\n            console.log(data.couList)\r\n            data.static_freight = res.cost_freight\r\n            that.setChoseAddr(data)\r\n            window.localStorage.setItem('neworder', false)\r\n            that.$router.go(-1)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    goBack() {\r\n      this.$router.goBack()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([])\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  @import '~styles/index.less';\r\n  @import '~styles/variable.less';\r\n\r\n  .use_coupon {\r\n    /* font-family: SimHei 'DIN'; */\r\n    background: #f2f2f2;\r\n    overflow-x: hidden;\r\n  }\r\n\r\n  .coupon_nav {\r\n    height: 90/100rem;\r\n    background: #fff;\r\n  }\r\n\r\n  .coupon_nav span {\r\n    width: 370/100rem;\r\n    display: inline-block;\r\n    color: #999;\r\n    font-size: 32/100rem;\r\n    text-align: center;\r\n    padding-top: 24/100rem;\r\n    padding-bottom: 18/100rem;\r\n    border-bottom: 4/100rem solid transparent;\r\n  }\r\n\r\n  .coupon_nav .text_active {\r\n    border-bottom: 4/100rem solid #e21f11;\r\n    color: #333;\r\n  }\r\n\r\n  .cou_tip {\r\n    width: 100%;\r\n    height: 72/100rem;\r\n    border-top: 1px solid #edd9b0;\r\n    border-bottom: 1px solid #edd9b0;\r\n    background: #fff3db;\r\n    font-size: 26/100rem;\r\n    color: #4a4a4a;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .cou_tip span {\r\n    color: #ff4e79;\r\n    font-family: 'DIN';\r\n  }\r\n\r\n  .cou_list {\r\n    padding: 0 26/100rem;\r\n    background: #f6f6f6;\r\n  }\r\n\r\n  .cou_info {\r\n    margin-top: 42/100rem;\r\n    background: #fff;\r\n    height: 200/100rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    position: relative;\r\n  }\r\n\r\n  .cou_info img {\r\n    width: 240/100rem;\r\n    height: 200/100rem;\r\n  }\r\n\r\n  .cou_info .cou_more {\r\n    position: absolute;\r\n    text-align: center;\r\n    width: 240/100rem;\r\n  }\r\n\r\n  .cou_more .cou_value {\r\n    font-size: 26/100rem;\r\n    color: #fff;\r\n    text-align: center;\r\n  }\r\n\r\n  .cou_value span {\r\n    font-size: 90/100rem;\r\n    font-family: 'DIN';\r\n    margin-left: -16/100rem;\r\n  }\r\n\r\n  .cou_more .cou_more_tips {\r\n    text-align: center;\r\n    margin-top: -19/100rem;\r\n    text-align: center;\r\n  }\r\n\r\n  .cou_more_tips span {\r\n    font-size: 22/100rem;\r\n    color: #fff;\r\n    margin-right: 8/100rem;\r\n  }\r\n\r\n  .cou_more_tips icon {\r\n    color: #fff;\r\n    font-size: 20/100rem;\r\n  }\r\n\r\n  .cou_info .cou_tips {\r\n    width: 380/100rem;\r\n  }\r\n\r\n  .cou_info .cou_tips span {\r\n    display: block;\r\n  }\r\n\r\n  .cou_info .cou_title {\r\n    color: #444;\r\n    font-size: 32/100rem;\r\n  }\r\n\r\n  .cou_info .cou_time {\r\n    color: #999;\r\n    font-size: 20/100rem;\r\n    margin: 15/100rem 0;\r\n    // width: 310/100rem;\r\n  }\r\n\r\n  .cou_time span {\r\n    float: right;\r\n    font-size: 20/100rem;\r\n  }\r\n\r\n  .cou_info .cou_type {\r\n    color: #999;\r\n    font-size: 24/100rem;\r\n    //     display: -webkit-box !important;\r\n    // -webkit-box-orient: vertical;\r\n    // -webkit-line-clamp: 2;\r\n    // overflow: hidden;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box !important;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    max-height: 0.7rem;\r\n  }\r\n\r\n  .cou_radio {\r\n    position: relative;\r\n    right: 30/100rem;\r\n  }\r\n\r\n  .null_view {\r\n    height: 100/100rem;\r\n  }\r\n\r\n  .cou_btn {\r\n    position: fixed;\r\n    bottom: 0;\r\n    height: 98/100rem;\r\n    width: 100%;\r\n  }\r\n\r\n  .cou_btn button {\r\n    background: #ff4e79;\r\n    color: #fff;\r\n    font-size: 40/100rem;\r\n    border-radius: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  input[type=\"checkbox\"] {\r\n    width: 34/100rem;\r\n    height: 34/100rem;\r\n    opacity: 0;\r\n  }\r\n\r\n  label {\r\n    position: absolute;\r\n    left: 5/100rem;\r\n    top: 8/100rem;\r\n    width: 34/100rem;\r\n    height: 34/100rem;\r\n    // border-radius: 50%;\r\n    border: 2/100rem solid #7c7c7c;\r\n    border-radius: 50%;\r\n  }\r\n\r\n  /*设置选中的input的样式*/\r\n  /* + 是兄弟选择器,获取选中后的label元素*/\r\n  input:checked+label {\r\n    background-color: #ff4e79;\r\n    border: 2/100rem solid #ff4e79;\r\n  }\r\n\r\n  input:checked+label::after {\r\n    position: absolute;\r\n    content: \"\";\r\n    width: 0.1rem;\r\n    height: 0.24rem;\r\n    top: 0;\r\n    left: 0.11rem;\r\n    border: 0.04rem solid #fff;\r\n    border-top: none;\r\n    border-left: none;\r\n    -webkit-transform: rotate(45deg);\r\n    transform: rotate(45deg);\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/other/useCoupon.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('common-header',{attrs:{\"h_title\":_vm.h_title,\"showback\":true}}),_vm._v(\" \"),_c('return-top',{on:{\"returnTop\":_vm.goTop}}),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"0.9rem\"},attrs:{\"id\":\"top\"}}),_vm._v(\" \"),_c('div',{staticClass:\"use_coupon\"},[_c('div',{staticClass:\"coupon_body\"},[_c('div',{staticClass:\"coupon_nav\"},[_c('span',{class:_vm.choseType==0?'text_active':'',attrs:{\"id\":\"0\"},on:{\"click\":function($event){return _vm.choseTypeList(0)}}},[_vm._v(\"可用优惠券(\"+_vm._s(_vm.couUseList.length)+\")\")]),_vm._v(\" \"),_c('span',{class:_vm.choseType==1?'text_active':'',attrs:{\"id\":\"1\"},on:{\"click\":function($event){return _vm.choseTypeList(1)}}},[_vm._v(\"不可使用优惠券(\"+_vm._s(_vm.couNoList.length)+\")\")])]),_vm._v(\" \"),(_vm.isChecked)?_c('div',{staticClass:\"cou_tip\"},[_vm._v(\"\\n        使用优惠券1张，共抵用\\n        \"),_c('span',[_vm._v(\"￥\"+_vm._s(_vm.couValue))])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"cou_list\"},_vm._l((_vm.couList),function(item,index){return _c('div',{key:index,staticClass:\"cou_info\"},[(_vm.choseType==0)?_c('img',{attrs:{\"src\":_vm.imgPath+'order/cop_bg.png'}}):_vm._e(),_vm._v(\" \"),(_vm.choseType==1)?_c('img',{attrs:{\"src\":_vm.imgPath+'order/cop_bg_01.png'}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"cou_more\"},[_c('div',{staticClass:\"cou_value\"},[_vm._v(\"￥\\n              \"),_c('span',[_vm._v(_vm._s(item.cashworth))])]),_vm._v(\" \"),_c('div',{staticClass:\"cou_more_tips\"},[(item.order_price>0)?_c('span',[_vm._v(\"满\"+_vm._s(item.order_price)+\"可用\")]):_c('span',[_vm._v(\"无门槛通用\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"cou_tips\"},[_c('span',{staticClass:\"cou_title\"},[_vm._v(_vm._s(item.title))]),_vm._v(\" \"),_c('div',{staticClass:\"cou_time\"},[_vm._v(\"有效期至\"+_vm._s(item.totime))]),_vm._v(\" \"),(item.name!=null)?_c('span',{staticClass:\"cou_type\"},[_vm._v(\"适用于\"+_vm._s(item.name)+_vm._s(item.content))]):_vm._e(),_vm._v(\" \"),(item.name==null)?_c('span',{staticClass:\"cou_type\"},[_vm._v(\"全类目通用\"+_vm._s(item.content))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"cou_radio\",attrs:{\"hidden\":_vm.choseType==1}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.checked),expression:\"item.checked\"}],attrs:{\"id\":item.id,\"type\":\"checkbox\"},domProps:{\"checked\":item.checked,\"checked\":Array.isArray(item.checked)?_vm._i(item.checked,null)>-1:(item.checked)},on:{\"click\":function($event){return _vm.choseCou(item)},\"change\":function($event){var $$a=item.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(item, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(item, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(item, \"checked\", $$c)}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":item.id}})])])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"null_view\"}),_vm._v(\" \"),(_vm.choseType==0&&_vm.couUseList.length>0)?_c('div',{staticClass:\"cou_btn\",on:{\"click\":_vm.useCou}},[_c('mt-button',{attrs:{\"size\":\"normal\"}},[_vm._v(\"确定\")])],1):_vm._e(),_vm._v(\" \"),(_vm.couUseList.length==0||_vm.choseType==1)?_c('div',{staticClass:\"cou_btn\",on:{\"click\":_vm.goBack}},[_c('mt-button',{attrs:{\"size\":\"normal\"}},[_vm._v(\"返回\")])],1):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-36617de4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/other/useCoupon.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-36617de4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./useCoupon.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./useCoupon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./useCoupon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36617de4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./useCoupon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-36617de4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/other/useCoupon.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}