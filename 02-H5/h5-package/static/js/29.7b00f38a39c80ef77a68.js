webpackJsonp([29],{"59TN":function(t,s){},WEUK:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("fZjL"),n=a.n(e),c=a("Td3j"),o=a("HUDw"),i=a("fqE/"),l=a("Jtwt"),r=a("Au9i"),h={name:"CashWithDrawal",components:{InfiniteScroll:r.InfiniteScroll,Button:r.Button,Lazyload:r.Lazyload,Toast:r.Toast,Spinner:r.Spinner,commonHeader:i.a,returnTop:l.a},data:function(){return{head_color:{background:"#f9f9f9",color:"#000"},costInfo:{fee:"0.00"},h_title:"余额提现",rulesTitle:"",is_cutdown:!1,length:6,value:"",timeCode:"",ispassword:!1,inputLen:6,banCodeNum:null,showCkeck:!1,iptMoney:"",showMask:!1,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/",tobank:!1,cashInfo:{},moneyCash:"",allowScroll:!0,bank_first:{},showCard:!1,showCash:!0,bankId:"",code:"",interval:"",count:"",showCheck:!0}},mounted:function(){window.localStorage.hasOwnProperty("chose_bank")&&void 0!==window.localStorage.getItem("chose_bank")&&""!==window.localStorage.getItem("chose_bank")&&(console.log("默认银行卡已选择"),this.bankId=window.localStorage.getItem("chose_bank")),this.getBankList(),this.getCashInfo(),this.getFindCon()},methods:{focus:function(t){var s=t.target.value;this.value=s},tap:function(t){console.log(t),this.$nextTick(function(){this.$refs.inputVal.focus()})},closeCheck:function(){this.showCkeck=!1,this.is_cutdown=!1,this.timeCode=60,this.value="",clearInterval(this.interval)},getCode:function(t){var s=this,a=60;s.timeCode=a+"秒",clearInterval(this.interval),this.interval=setInterval(function(){s.timeCode=a-1+"秒",--a<=0&&(clearInterval(this.interval),s.is_cutdown=!1)},1e3)},cashWith:function(){var t=this;if(void 0!==this.bank_first&&""!==this.bank_first&&0!==n()(this.bank_first).length){r.Indicator.open("加载中..."),t.showMask=!0;var s={card_id:t.bank_first.id,amount:t.iptMoney};Object(c.d)(s).then(function(s){r.Indicator.close(),s.isSuccess?(console.log(s,"resres"),t.showMask=!1,t.is_cutdown=!0,t.showCkeck=!0,t.getCode()):(Object(r.Toast)({message:s.msg,duration:2e3}),t.showMask=!1,t.is_cutdown=!1,t.showCkeck=!1)}),console.log(this.bank_first)}else t.tobank=!0},formSubmit:function(){var t=this;if(t.code=t.value,""===t.value)Object(r.Toast)({message:"验证码不可以为空",duration:1e3});else{this.closeCheck(),r.Indicator.open({text:"验证中...",spinnerType:"fading-circle"});var s={verify:t.code};Object(c.i)(s).then(function(s){console.log(s,"d"),s.isSuccess?(r.Indicator.close(),Object(r.Toast)({message:s.msg,duration:1e3}),t.showCkeck=!1,setTimeout(function(){console.log("返回我的钱包"),t.$router.replace({path:"/myWallet"})},1e3)):(r.Indicator.close(),Object(r.Toast)({message:s.msg,duration:1e3}))})}},foucsipt:function(t){console.log(t.target.value.length);var s=this;if(""!==t.target.value){var a=t.target.value.replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/\.{2,}/g,".");if(s.iptMoney=a.match(/^\d*(\.?\d{0,2})/g)[0]||null,parseFloat(s.iptMoney)>parseFloat(this.cashInfo.can_money))s.showCheck&&(Object(r.Toast)({message:"输入金额超过可提现金额",duration:1e3}),s.showCheck=!1);else{var e={amount:s.iptMoney};s.showCheck=!0,Object(o.h)(e).then(function(t){t.isSuccess?s.costInfo=t.data:Object(r.Toast)({message:t.msg,duration:1e3})})}}},hiddenBank:function(){this.tobank=!1,this.allowScroll=!0},goBank:function(){this.$router.togo({path:"/addCard"})},choseCard:function(t){this.$router.togo({path:"/myCard?type="+t})},cashWithall:function(){var t=this,s={amount:t.cashInfo.can_money};Object(o.h)(s).then(function(s){s.isSuccess?(t.costInfo=s.data,t.iptMoney=t.cashInfo.can_money):(t.iptMoney=t.cashInfo.can_money,Object(r.Toast)({message:s.msg,duration:1e3}))})},getCashInfo:function(){var t=this;Object(c.c)().then(function(s){console.log(s,"res"),s.isSuccess&&(t.count=s.data.count,null!==s.data.member&&"null"!==s.data.member?t.cashInfo=s.data.member:t.cashInfo={})})},getBankList:function(){var t=this;r.Indicator.open("加载中..."),Object(c.j)().then(function(s){if(s.isSuccess)if(r.Indicator.close(),console.log(s,"dd"),t.showCard=!0,""!==t.bankId&&void 0!==t.bankId){var a={},e="";s.data.bank.forEach(function(s){s.id===t.bankId&&(a=s,e=s.card)}),t.bank_first=a,t.banCodeNum=e}else null!==s.data.bank?(t.bank_first=s.data.bank[0],t.banCodeNum=s.data.bank[0].card):(t.showCash=!1,t.bank_first={})})},getFindCon:function(){var t=this;Object(c.e)().then(function(s){s.isSuccess&&(console.log(t.rulesTitle),t.rulesTitle=s.data.member_withdraw)})}}},_={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t.showCard?a("div",[a("common-header",{attrs:{h_title:t.h_title,showback:!0,bgcolor:t.head_color}}),t._v(" "),a("div",{staticStyle:{height:"0.9rem"},attrs:{id:"card"}}),t._v(" "),a("div",{class:t.allowScroll?"c_cash":"c_cash_fixed c_cash"},[t.showCash?a("div",{staticClass:"c_cash_card",on:{click:function(s){return t.choseCard("chose")}}},[a("div",{staticClass:"c_cash_card_l",style:{backgroundImage:"url("+t.bank_first.cardbg+")"}}),t._v(" "),a("div",{staticClass:"c_cash_card_c"},[a("span",[t._v(t._s(t.bank_first.bank))]),t._v(" "),a("span",[t._v(t._s(t.banCodeNum))])]),t._v(" "),t._m(0)]):a("div",{staticClass:"c_cash_card_null",on:{click:t.goBank}},[a("div",{staticClass:"c_cash_card_null_l"},[t._v("\n                  暂无银行卡请前去绑定\n              ")]),t._v(" "),t._m(1)]),t._v(" "),a("div",{staticClass:"c_cash_center"},[a("span",{staticClass:"c_text"},[t._v("提现金额")]),t._v(" "),a("div",{staticClass:"c_cashwi"},[a("span",[t._v("￥")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.iptMoney,expression:"iptMoney",modifiers:{trim:!0}}],staticClass:"place-holder",attrs:{placeholder:"请输入提现金额",type:"text",maxlength:"14"},domProps:{value:t.iptMoney},on:{input:[function(s){s.target.composing||(t.iptMoney=s.target.value.trim())},t.foucsipt],blur:function(s){return t.$forceUpdate()}}})])]),t._v(" "),""!=t.iptMoney&&0!=t.costInfo.fee?a("div",{staticClass:"c_cash_cost"},["0.00"!=t.costInfo.fee?a("div",{staticClass:"c_cash_cost_month"},[a("span",{staticClass:"txt2"},[t._v(" 手续费：￥"+t._s(t.costInfo.fee))])]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"c_cash_bottom"},[a("div",{staticClass:"c_cash_month"},[t._v("\n                可提现金额："),a("span",[t._v("￥"+t._s(t.cashInfo.can_money))])]),t._v(" "),a("div",{staticClass:"c_cash_all",on:{click:t.cashWithall}},[a("span",[t._v("全部提现")])])]),t._v(" "),a("div",{staticClass:"c_cash_free"},[a("span",[t._v("本月免费提现剩余"+t._s(t.count)+"次")])]),t._v(" "),a("div",{staticClass:"c_cash_explain"},[t._m(2),t._v(" "),a("div",{staticClass:"c_cash_explain_content"},[a("pre",{staticClass:"space"},[t._v(t._s(t.rulesTitle))])])]),t._v(" "),a("div",{staticClass:"c_footer"},[a("div",{staticClass:"c_footer_cash",on:{click:t.cashWith}},[t._v("提现 "),t.is_cutdown?a("span",[t._v(t._s(t.timeCode))]):t._e()])])]),t._v(" "),t.tobank?a("div",{staticClass:"bank_bg",on:{click:t.hiddenBank}}):t._e(),t._v(" "),t.tobank?a("div",{staticClass:"rulesDetail"},[a("div",{staticClass:"rules_head"},[t._v("绑定银行卡")]),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"rules_btn"},[a("button",{on:{click:t.hiddenBank}},[t._v("取消")]),t._v(" "),a("button",{on:{click:t.goBank}},[t._v("确定")])])]):t._e()],1):t._e(),t._v(" "),t.showCkeck?a("div",{staticClass:"check_bg"}):t._e(),t._v(" "),t.showCkeck?a("div",{staticClass:"checkCode"},[a("div",{staticClass:"check"},[a("div",{staticClass:"iptCode"},[t._v("请输入短信验证码")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.length,function(s,e){return a("div",{key:e},[a("span",{staticClass:"iptbox",on:{click:function(s){return t.tap(e)}}},[t.value.length>=e+1&&t.value[e]?a("span",[t._v(t._s(t.value[e]))]):t._e()])])}),0),t._v(" "),a("input",{ref:"inputVal",staticClass:"ipt",attrs:{name:"password",maxlength:t.length,autocomplete:"off",autofocus:"autofocus",type:"number"},on:{input:t.focus}}),t._v(" "),a("div",{staticClass:"chect_btn"},[a("button",{staticClass:"btn-area",on:{click:t.formSubmit}},[t._v("确认")])])]),t._v(" "),a("div",{staticClass:"check_close",on:{click:t.closeCheck}},[a("i",{staticClass:"iconfont icon-bohui"})])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"c_cash_card_r"},[s("i",{staticClass:"iconfont icon-iconfontjiantou5"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"c_cash_card_r"},[s("i",{staticClass:"iconfont icon-iconfontjiantou5"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"c_cash_explain_title"},[s("span",[this._v("提现说明")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"rules_richtext",staticStyle:{height:"100px"}},[s("span",[this._v("暂时没有可提现的银行卡，请前去绑定")])])}]};var d=a("VU/8")(h,_,!1,function(t){a("59TN")},"data-v-b5a1826e",null);s.default=d.exports}});
//# sourceMappingURL=29.7b00f38a39c80ef77a68.js.map