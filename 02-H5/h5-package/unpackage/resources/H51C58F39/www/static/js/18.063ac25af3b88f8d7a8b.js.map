{"version":3,"sources":["webpack:///src/views/other/search.vue","webpack:///./src/views/other/search.vue?d73d","webpack:///./src/views/other/search.vue"],"names":["search","name","components","commonHeader","common_header","InfiniteScroll","mint_ui_common","Indicator","Button","Lazyload","Toast","data","h_title","hot_page","hot_limit","hot_total","hotNum","hotSearch","istrue","searchkey","keylist","mounted","this","searchHis","openLocationsercher","document","getElementById","scrollIntoView","methods","extends_default","Object","vuex_esm","setSearchData","goTop","console","log","block","behavior","goLink","value","$router","togo","path","that","info","page","pagesize","api","then","res","isSuccess","rows","total","Math","ceil","changeList","searchList","RegExp","test","searchData","length","pop","arr","id","i","concat","window","localStorage","setItem","stringify_default","clearSearchStorage","getItem","JSON","parse","computed","other_search","render","_vm","_h","$createElement","_c","_self","attrs","showback","_v","on","returnTop","staticStyle","height","staticClass","placeholder","change","model","callback","$$v","expression","click","_e","_l","item","index","key","$event","_s","title","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.063ac25af3b88f8d7a8b.js","sourcesContent":["<template>\r\n  <div>\r\n    <common-header :h_title=\"h_title\" :showback=\"true\"></common-header>\r\n    <return-top @returnTop='goTop'></return-top>\r\n    <div style='height:0.9rem' id='top'></div>\r\n    <div class='search_his'>\r\n      <div class='search_header'>\r\n        <div class='search'>\r\n          <i class='iconfont icon-search'></i>\r\n          <mt-field placeholder=\"搜索喜欢的商品\" v-model=\"searchkey\" class='search_input' @change=\"searchList\"></mt-field>\r\n        </div>\r\n        <span @click='searchList'>搜索</span>\r\n      </div>\r\n      <div class='his_list'>\r\n        <div class='his_header' v-if=\"keylist.length!==0\">\r\n          <span>历史记录</span>\r\n          <span @click=\"clearSearchStorage\" class='red_text'>清除</span>\r\n        </div>\r\n        <div class='h_list'>\r\n          <span v-for='(item,index) in keylist' @click='goLink(item.name)' :key='index'>{{item.name}}</span>\r\n        </div>\r\n      </div>\r\n      <div class='hot_search'>\r\n        <div class='hot_header'>\r\n          <span>热门搜索</span>\r\n          <div class='hot_right'>\r\n            <i class='iconfont icon-shuaxin'></i>\r\n            <span @click='changeList' class='red_text'>换一批</span>\r\n          </div>\r\n        </div>\r\n        <div class='hot_list'>\r\n          <span @click='goLink(item.title)' v-for='(item,index) in hotSearch'\r\n            :key='index'>{{item.title}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport commonHeader from 'common/common-header'\r\nimport {\r\n  InfiniteScroll,\r\n  Indicator,\r\n  Button,\r\n  Lazyload,\r\n  Toast\r\n} from 'mint-ui'\r\nimport {\r\n  getHotSearch\r\n} from '@/api/index'\r\nimport {\r\n  mapMutations,\r\n  mapGetters\r\n} from 'vuex'\r\n  // import {\r\n  //   countDown\r\n  // } from '@/store/pubilc.js'\r\n  // import {\r\n  //   parseTime\r\n  // } from '@/store/pubilc.js'\r\n  // import {\r\n  //   setToken,\r\n  //   getToken\r\n  // } from '@/store/auth'\r\nexport default {\r\n  name: 'Search',\r\n  components: {\r\n    commonHeader,\r\n    InfiniteScroll,\r\n    Indicator,\r\n    Button,\r\n    Lazyload,\r\n    Toast\r\n  },\r\n  data() {\r\n    return {\r\n      h_title: '搜索',\r\n      hot_page: 1,\r\n      hot_limit: 10,\r\n      hot_total: 0,\r\n      hotNum: 0,\r\n      hotSearch: [],\r\n      istrue: false,\r\n      searchkey: '',\r\n      keylist: []\r\n    }\r\n  },\r\n  mounted() {\r\n    // Indicator.open('加载中...')\r\n    // console.log(this.$route.query)\r\n    this.searchHis()\r\n    this.openLocationsercher()\r\n    document.getElementById('top').scrollIntoView(false)\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setSearchData: 'SET_SEARCHDATA'\r\n    }),\r\n    goTop() {\r\n      console.log('回到顶部')\r\n      document.getElementById('coll').scrollIntoView({\r\n        block: 'start',\r\n        behavior: 'smooth'\r\n      })\r\n    },\r\n    goLink(value) {\r\n      this.$router.togo({\r\n        path: '/proList?type=key&value=' + value\r\n      })\r\n    },\r\n    searchHis: function () {\r\n      var that = this\r\n      // 获取热门搜索列表\r\n      let info = {\r\n        page: that.hot_page,\r\n        pagesize: that.hot_limit\r\n      }\r\n      getHotSearch(info).then(res => {\r\n        if (res.isSuccess) {\r\n          that.hotSearch = res.data.rows\r\n          that.hot_total = res.data.total\r\n          that.istrue = true\r\n          that.hotNum = Math.ceil(res.data.total / that.hot_limit)\r\n        }\r\n      })\r\n    },\r\n    changeList: function () {\r\n      if (this.hot_page === this.hotNum) {\r\n        this.hot_page = 0\r\n      }\r\n      ++this.hot_page\r\n      this.searchHis()\r\n    },\r\n    searchList: function () {\r\n      var self = this\r\n      var regu = '^[ ]+$'\r\n      var re = new RegExp(regu)\r\n      if (re.test(this.searchkey)) {\r\n        this.searchkey = ''\r\n      }\r\n      if (this.searchkey !== '') {\r\n        // 将搜索记录更新到缓存\r\n        console.log(self.keylist)\r\n        if (self.keylist === null) {\r\n          self.keylist = []\r\n        }\r\n        var searchData = self.keylist\r\n\r\n        if (searchData.length > 8) {\r\n          searchData.pop()\r\n        }\r\n        let arr = [{\r\n          id: searchData.length,\r\n          name: self.searchkey\r\n        }]\r\n        let i = 0\r\n        for (;i < searchData.length; i++) {\r\n          if (searchData[i].name === self.searchkey) {\r\n            break\r\n          }\r\n        }\r\n        if (i >= searchData.length) {\r\n          searchData = arr.concat(searchData)\r\n          console.log(searchData)\r\n          window.localStorage.setItem('searchData', JSON.stringify(searchData))\r\n        }\r\n        // self.setSearchData(searchData)\r\n      }\r\n      self.$router.togo({\r\n        path: '/proList?type=key&value=' + self.searchkey\r\n      })\r\n    //   wx.navigateTo({\r\n    //     url: '../proList/proList?type=key&value=' + this.searchkey\r\n    //   })\r\n    },\r\n    // 清除缓存历史\r\n    clearSearchStorage: function () {\r\n      window.localStorage.setItem('searchData', '')\r\n      this.keylist = []\r\n    },\r\n    // 打开历史记录列表\r\n    openLocationsercher: function () {\r\n      let info = []\r\n      if (window.localStorage.getItem('searchData') !== '') {\r\n        info = JSON.parse(window.localStorage.getItem('searchData'))\r\n      }\r\n      this.keylist = info\r\n      // this.keylist = this.$store.state.home.searchData || []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['number', 'carnum', 'isbind', 'score', 'news', 'newsnum', 'issign'])\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  @import '~styles/index.less';\r\n  @import '~styles/variable.less';\r\n\r\n  .search_his {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n  }\r\n\r\n  .search_header {\r\n    padding: 20/100rem 26/100rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background: #fff;\r\n    border-bottom: 2/100rem solid #e0e0e0;\r\n\r\n    .search {\r\n      width: 80%;\r\n      height: 60/100rem;\r\n      line-height: 60/100rem;\r\n      border-radius: 50/100rem;\r\n      background: #f5f5f5;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 0 26/100rem;\r\n\r\n      .iconfont {\r\n        color: #ec5580;\r\n        font-size: 0.4rem;\r\n      }\r\n\r\n      .search_input {\r\n        font-size: 0.24rem;\r\n        width: 100%;\r\n        height: 60/100rem;\r\n        display: inline-flex;\r\n        background: transparent;\r\n      }\r\n    }\r\n    span {\r\n    font-size: 30/100rem;\r\n    color: #555;\r\n  }\r\n  }\r\n\r\n  .his_list {\r\n    padding: 0 26/100rem;\r\n  }\r\n\r\n  .his_list .his_header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 24/100rem;\r\n    color: #666;\r\n    margin: 30/100rem 0;\r\n  }\r\n\r\n  .his_header .red_text {\r\n    color: #ec5580;\r\n  }\r\n\r\n  .h_list span {\r\n    display: inline-block;\r\n    height: 56/100rem;\r\n    line-height: 56/100rem;\r\n    font-size: 24/100rem;\r\n    color: #999;\r\n    background: #f1f2f6;\r\n    border-radius: 20/100rem;\r\n    padding: 0 26/100rem;\r\n    margin-bottom: 22/100rem;\r\n    margin-right: 40/100rem;\r\n  }\r\n\r\n  .hot_search {\r\n    padding: 0 26/100rem;\r\n  }\r\n\r\n  .hot_search .hot_header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 24/100rem;\r\n    color: #666;\r\n    margin: 30/100rem 0;\r\n  }\r\n\r\n  .hot_right .iconfont {\r\n    color: #ec5580;\r\n    font-size: 24/100rem;\r\n  }\r\n\r\n  .hot_right .red_text {\r\n    color: #ec5580;\r\n  }\r\n\r\n  .hot_list span {\r\n    display: inline-block;\r\n    height: 56/100rem;\r\n    line-height: 56/100rem;\r\n    font-size: 24/100rem;\r\n    color: #999;\r\n    background: #f1f2f6;\r\n    border-radius: 20/100rem;\r\n    padding: 0 26/100rem;\r\n    margin-bottom: 22/100rem;\r\n    margin-right: 40/100rem;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/other/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('common-header',{attrs:{\"h_title\":_vm.h_title,\"showback\":true}}),_vm._v(\" \"),_c('return-top',{on:{\"returnTop\":_vm.goTop}}),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"0.9rem\"},attrs:{\"id\":\"top\"}}),_vm._v(\" \"),_c('div',{staticClass:\"search_his\"},[_c('div',{staticClass:\"search_header\"},[_c('div',{staticClass:\"search\"},[_c('i',{staticClass:\"iconfont icon-search\"}),_vm._v(\" \"),_c('mt-field',{staticClass:\"search_input\",attrs:{\"placeholder\":\"搜索喜欢的商品\"},on:{\"change\":_vm.searchList},model:{value:(_vm.searchkey),callback:function ($$v) {_vm.searchkey=$$v},expression:\"searchkey\"}})],1),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.searchList}},[_vm._v(\"搜索\")])]),_vm._v(\" \"),_c('div',{staticClass:\"his_list\"},[(_vm.keylist.length!==0)?_c('div',{staticClass:\"his_header\"},[_c('span',[_vm._v(\"历史记录\")]),_vm._v(\" \"),_c('span',{staticClass:\"red_text\",on:{\"click\":_vm.clearSearchStorage}},[_vm._v(\"清除\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"h_list\"},_vm._l((_vm.keylist),function(item,index){return _c('span',{key:index,on:{\"click\":function($event){return _vm.goLink(item.name)}}},[_vm._v(_vm._s(item.name))])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"hot_search\"},[_c('div',{staticClass:\"hot_header\"},[_c('span',[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"hot_right\"},[_c('i',{staticClass:\"iconfont icon-shuaxin\"}),_vm._v(\" \"),_c('span',{staticClass:\"red_text\",on:{\"click\":_vm.changeList}},[_vm._v(\"换一批\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"hot_list\"},_vm._l((_vm.hotSearch),function(item,index){return _c('span',{key:index,on:{\"click\":function($event){return _vm.goLink(item.title)}}},[_vm._v(_vm._s(item.title))])}),0)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c8d4e580\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/other/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c8d4e580\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c8d4e580\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c8d4e580\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/other/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}