webpackJsonp([18],{"7/ak":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),o=s("fqE/"),n=s("Au9i"),c=s("gyMJ"),l=s("NYxO"),h={1:"星期日",2:"星期一",3:"星期二",4:"星期三",5:"星期四",6:"星期五",7:"星期六"},r={1:"一月",2:"二月",3:"三月",4:"四月",5:"五月",6:"六月",7:"七月",8:"八月",9:"九月",10:"十月",11:"十一月",12:"十二月"},d={name:"DatePicker",components:{Toast:n.Toast},props:{date:{type:String,required:!0},minDate:{type:String,default:"1970-01-01"},maxDate:{type:String,default:"2020-12-31"}},computed:i()({},Object(l.b)(["number","carnum","isbind","score","news","newsnum","issign"]),{yearList:function(){for(var t=[],e=this.copyMinDate.year;e<=this.copyMaxDate.year;e+=1)t.push(e);return t},title:function(){return{year:"",monthday:""}},rows:function(){for(var t=this.showDate,e=t.year,s=t.month,a=new Date(e,s,0).getDate(),i=[],o=[],n=void 0,c=1;c<=a;c+=1)n=new Date(e,s-1,c).getDay()+1,1===c&&1!==n?(this.addRowEmptyValue(o,n),this.addRowDayValue(o,c,this.footDays.includes(c))):(this.addRowDayValue(o,c,this.footDays.includes(c)),c===a&&7!==n&&this.addRowEmptyValue(o,7-n+1)),n%7!=0&&c!==a||(i.push(o),o=[]);return this.showDate.monthStr=r[this.showDate.month],i}}),data:function(){return{selectDate:{year:"",month:"",day:"",week:"",date:"",weekStr:"",monthStr:""},showDate:{year:"",month:"",day:"",week:"",date:"",monthStr:"",weekStr:""},copyMinDate:{year:"",month:"",day:""},copyMaxDate:{year:"",month:"",day:""},footDays:[],toolbar:"",fadeXType:"fadeX_Prev",nextMonthClick:!1,prevMonthClick:!1,showYear:!1}},created:function(){this.getFoot(this.date),this.initDatePicker()},methods:i()({},Object(l.c)({setfootNum:"SET_FOOTNUM",setfootList:"SET_FOOTLIST"}),{getFoot:function(t){var e=[],s=t.split("-"),a={month:s[0]+"-"+s[1],date:t},i=this;Object(c.J)(a).then(function(t){if(t.isSuccess&&null!=t.data.time_list){for(var s=0;s<t.data.time_list.length;s++)e.push(new Date(1e3*t.data.time_list[s]).getDate());i.footDays=e}})},initDatePicker:function(){this.showDate=i()({},this.splitDate(this.date,!0)),this.copyMinDate=i()({},this.splitDate(this.minDate)),this.copyMaxDate=i()({},this.splitDate(this.maxDate)),this.selectDate=i()({},this.showDate)},splitDate:function(t,e){var s={},a=t.split("-");try{if(!a||a.length<3)throw new Error("时间格式不正确");s={year:Number(a[0]),month:Number(a[1]),day:Number(a[2])},e&&(s.week=new Date(s.year,s.month-1,s.day).getDay()+1,s.monthStr=r[s.month],s.weekStr=h[s.week])}catch(t){console.error(t)}return s},addRowEmptyValue:function(t,e){for(var s=1;s<e;s+=1)t.push({value:""})},addRowDayValue:function(t,e,s){var a={value:e,hasfoot:!1},i=this.selectDate,o=i.day,n=i.month,c=i.year,l=this.showDate;c===l.year&&n===l.month&&o===e&&(a.selected=!0),this.isMinLimitMonth()&&e<this.copyMinDate.day&&(a.disabled=!0),this.isMaxLimitMonth()&&e>this.copyMinDate.day&&(a.disabled=!0),a.hasfoot=s,t.push(a)},prevMonth:function(){var t=this;if(!this.prevMonthClick&&(this.prevMonthClick=!0,setTimeout(function(){t.prevMonthClick=!1},500),this.fadeXType="fadeX_Prev",!this.isMinLimitMonth())){var e=this.showDate,s=e.year;e.month<=1?(this.showDate.year=s-1,this.showDate.month=12):this.showDate.month-=1,this.footDays=[];var a=this.showDate.year+"-"+this.keepDoubleDigit(this.showDate.month)+"-01";this.getFoot(a),this.$emit("getValue",a)}},nextMonth:function(){var t=this;if(!this.nextMonthClick&&(this.nextMonthClick=!0,setTimeout(function(){t.nextMonthClick=!1},500),this.fadeXType="fadeX_Next",!this.isMaxLimitMonth())){var e=this.showDate,s=e.year;e.month>=12?(this.showDate.year=s+1,this.showDate.month=1):this.showDate.month+=1,this.footDays=[];var a=this.showDate.year+"-"+this.keepDoubleDigit(this.showDate.month)+"-01";this.getFoot(a),this.$emit("getValue",a)}},resetSelectDate:function(t){this.selectDate=i()({},this.showDate),this.selectDate.day=t,this.selectDate.week=new Date(this.showDate.year,this.showDate.month-1,t).getDay()+1,this.selectDate.weekStr=h[this.selectDate.week]},selectDay:function(t){if(console.log(t),""!==t.value&&t.hasfoot)if(t.disabled||t.selected)this.$emit("getValue",-1);else if(this.resetSelectDate(t.value),t.hasfoot){var e=(this.showDate.year+"-"+this.keepDoubleDigit(this.showDate.month)+"-"+this.showDate.day).split("-");e[2]=this.keepDoubleDigit(t.value);var s=e.join("-");this.$emit("getValue",s)}else this.$emit("getValue",!1);else this.$emit("getValue",!1)},selectYear:function(t){this.showYear=!1,this.showDate.year=t;var e=void 0;if(this.isMinLimitMonth()?e="copyMinDate":this.isMaxLimitMonth()&&(e="copyMaxDate"),e)return this.showDate.month=this[e].month,this.showDate.day=this[e].day,void this.resetSelectDate(this.showDate.day);var s=this.selectDate.day;if(this.selectDate.day>28){var a=new Date(this.showDate.year,this.showDate.month-1,0).getDate();s=a<s?a:s}this.resetSelectDate(s)},isMinLimitMonth:function(){return this.showDate.year<=this.copyMinDate.year&&this.showDate.month<=this.copyMinDate.month},isMaxLimitMonth:function(){return this.showDate.year>=this.copyMaxDate.year&&this.showDate.month>=this.copyMaxDate.month},openYearList:function(){var t=this;if(this.showYear)this.showYear=!1;else{var e=this.yearList.indexOf(this.selectDate.year);this.showYear=!0,setTimeout(function(){t.$refs.yearList.scrollTop=40*(e-3)})}},openCalendarList:function(){this.showYear=!1},keepDoubleDigit:function(t){return t>9?t:"0"+t},confirm:function(){var t=this.selectDate,e=t.year,s=t.month,a=t.day,i=t.week,o=t.weekStr,n=t.monthStr;this.$emit("confirm",{date:e+"-"+this.keepDoubleDigit(s)+"-"+this.keepDoubleDigit(a),year:e,month:s,week:i,monthStr:n,weekStr:o,day:a})}})},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-calendar"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showYear,expression:"!showYear"}],staticClass:"e-calendar-container"},[s("div",{staticClass:"e-calendar-toolbar"},[s("div",{staticClass:"e-calendar-svg",on:{click:t.prevMonth}},[s("svg",{staticClass:"e-calendar-svg-icon",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}})]),t._v(" "),s("transition",{attrs:{name:"e_calendar_svg_btn"}},[t.prevMonthClick?s("div",{staticClass:"e-calendar-svg-cover"}):t._e()])],1),t._v(" "),s("div",{staticClass:"e-calendar-toolbar-title"},[s("transition",{attrs:{name:t.fadeXType}},[s("div",{key:t.showDate.monthStr,staticClass:"e-calendar-toolbar-title-content"},[s("strong",[t._v(t._s(t.showDate.year))]),t._v(" "),s("span",[t._v(t._s(t.showDate.monthStr))])])])],1),t._v(" "),s("div",{staticClass:"e-calendar-svg",on:{click:t.nextMonth}},[s("svg",{staticClass:"e-calendar-svg-icon",attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}})]),t._v(" "),s("transition",{attrs:{name:"e_calendar_svg_btn"}},[t.nextMonthClick?s("div",{staticClass:"e-calendar-svg-cover"}):t._e()])],1)]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"e-calendar-monthday"},[s("transition",{attrs:{name:t.fadeXType}},[s("div",{key:t.showDate.monthStr,staticClass:"e-calendar-monthday-wrapper"},t._l(t.rows,function(e,a){return s("div",{key:a,staticClass:"e-calendar-monthday-row"},t._l(e,function(e,a){return s("span",{key:a,staticClass:"e-calendar-monthday-row-day",class:{active:e.selected,footstyle:e.hasfoot,disabled:e.disabled,pointer:""!==e.value},on:{click:function(s){return t.selectDay(e)}}},[s("span",{staticClass:"e-calendar-monthday-row-day-value",domProps:{textContent:t._s(e.value)}}),t._v(" "),s("transition",{attrs:{name:"e_calendar_day"}},[e.selected?s("span",{staticClass:"e-calendar-monthday-row-day-cover"}):t._e()])],1)}),0)}),0)])],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-calendar-week"},[s("span",{staticClass:"e-calendar-week-day"},[t._v("日")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("一")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("二")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("三")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("四")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("五")]),t._v(" "),s("span",{staticClass:"e-calendar-week-day"},[t._v("六")])])}]};var u=s("VU/8")(d,v,!1,function(t){s("w+Mb")},"data-v-282a3dee",null).exports,_={name:"MyFootprint",components:{commonHeader:o.a,InfiniteScroll:n.InfiniteScroll,Indicator:n.Indicator,Button:n.Button,Lazyload:n.Lazyload,Toast:n.Toast,DatePicker:u,MessageBox:n.MessageBox},data:function(){return{h_title:"我的足迹",isShow:!0,footList:[],year:(new Date).getFullYear(),mon:(new Date).getMonth()+1,day:(new Date).getDate(),isEdit:!1,total:0,delList:[],page:1,pagesize:100,allchose:!1,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/",date:(new Date).getFullYear()+"-"+((new Date).getMonth()+1<=9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1)+"-"+((new Date).getDate()<=9?"0"+(new Date).getDate():(new Date).getDate())}},mounted:function(){console.log(this.date),this.getFoot(this.date)},methods:i()({getValue:function(t){if(console.log(t,"1111"),0==t)Object(n.Toast)({message:"当天没有足迹",duration:1e3});else if(-1==t)console.log("当前日期不可选或者已被选择");else{this.getFoot(t),this.date=t;var e=t.split("-");this.mon=e[1],this.day=e[2],n.Indicator.open("加载中...")}},getFoot:function(t){this.footList=[];var e=t.split("-"),s={month:e[0]+"-"+e[1],date:t};this.setfootNum(0),this.setfootNum([]);var a=this;Object(c.J)(s).then(function(t){n.Indicator.close(),t.isSuccess&&(a.total=t.data.foot_list.total,a.footList=t.data.foot_list.rows)})}},Object(l.c)({setfootNum:"SET_FOOTNUM",setfootList:"SET_FOOTLIST"}),{goTop:function(){console.log("回到顶部"),document.getElementById("foot").scrollIntoView({block:"start",behavior:"smooth"})},goIndex:function(){this.$router.replace({path:"/index"})},goPro:function(t){this.$router.togo({path:"/proDetail?type=normal&id="+t})},edit:function(){this.isEdit=!this.isEdit},checkAll:function(){if(this.delList=[],console.log(this.footList,"1111"),console.log(this.allchose,"hahahah"),!1===this.allchose){for(var t=0;t<this.footList.length;t++)this.footList[t].checked=!0,this.delList.push(this.footList[t].id);this.allchose=!0}else{for(var e=0;e<this.footList.length;e++)this.footList[e].checked=!1;this.delList=[],this.allchose=!1}},confirm:function(){console.log(this.date)},chosefoot:function(t){console.log(t.checked),t.checked=!t.checked,this.delList=[];for(var e=0;e<this.footList.length;e++)this.footList[e].checked&&this.delList.push(this.footList[e].id);var s=this.footList.every(function(t){return t.checked});this.allchose=!!s},delFoot:function(){var t=this;if(t.delList.length<=0)Object(n.Toast)({message:"请选择要操作的数据",duration:1e3});else{var e=window.plus;window.plus?e.nativeUI.confirm("是否删除选中内容?",function(e){console.log("Close confirm: "+e.index),0===e.index||"0"===e.index?Object(c.t)(t.delList.join(",")).then(function(e){e.isSuccess?(Object(n.Toast)({message:e.msg,iconClass:"iconfont icon-dui1",duration:1e3}),t.allchose=!1,t.footList=[],t.getFoot(t.date)):Object(n.Toast)({message:e.msg,duration:1e3})}):console.log("用户点击取消")},{title:"提示",buttons:["确定","取消"],verticalAlign:"center"}):Object(n.MessageBox)({title:"提示",message:"是否删除选中内容?",showCancelButton:!0,closeOnClickModal:!1}).then(function(e){"confirm"===e&&Object(c.t)(t.delList.join(",")).then(function(e){e.isSuccess?(Object(n.Toast)({message:e.msg,iconClass:"iconfont icon-dui1",duration:1e3}),t.allchose=!1,t.footList=[],t.getFoot(t.date)):Object(n.Toast)({message:e.msg,duration:1e3})})})}}}),computed:i()({},Object(l.b)([]))},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("common-header",{attrs:{h_title:t.h_title,showback:!0}}),t._v(" "),s("return-top",{on:{returnTop:t.goTop}}),t._v(" "),s("div",{staticStyle:{height:"0.9rem"},attrs:{id:"foot"}}),t._v(" "),t.isShow?s("div",{staticClass:"my_footprint"},[t.total>0?s("div",{staticClass:"foot_header"},[s("span",[t._v("共浏览"),s("span",{staticClass:"foot_num"},[t._v(t._s(t.total))]),t._v("件商品")]),t._v(" "),s("span",{staticClass:"foot_edit",attrs:{hidden:t.isEdit},on:{click:t.edit}},[t._v("编辑")]),t._v(" "),s("span",{staticClass:"foot_edit",attrs:{hidden:!t.isEdit},on:{click:t.edit}},[t._v("完成")])]):t._e(),t._v(" "),s("div",{class:t.total>0?"foot_body":"foot_body top"},[s("div",{staticClass:"foot_date"},[s("date-picker",{attrs:{date:t.date},on:{getValue:t.getValue}})],1),t._v(" "),t.footList.length>0?s("div",{staticClass:"foot_list"},[s("span",{staticClass:"chose_date"},[t._v(t._s(t.mon)+"月"+t._s(t.day)+"日")]),t._v(" "),t._l(t.footList,function(e,a){return s("div",{key:a,staticClass:"foot_pro"},[t.isEdit?s("div",{staticClass:"pro_chose"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"item.checked"}],attrs:{id:e.id,type:"checkbox"},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{click:function(s){return t.chosefoot(e)},change:function(s){var a=e.checked,i=s.target,o=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&t.$set(e,"checked",a.concat([null])):n>-1&&t.$set(e,"checked",a.slice(0,n).concat(a.slice(n+1)))}else t.$set(e,"checked",o)}}}),t._v(" "),s("label",{attrs:{for:e.id}})]):t._e(),t._v(" "),s("div",{staticClass:"pro_img",on:{click:function(s){return t.goPro(e.goods_id)}}},[s("img",{attrs:{src:e.img}})]),t._v(" "),s("div",{staticClass:"pro_info"},[s("div",{staticClass:"pro_title",on:{click:function(s){return t.goPro(e.goods_id)}}},[1==e.promotion?s("div",{staticClass:"pro_level"},[s("img",{attrs:{src:t.imgPath+"member/cu.png"}}),t._v(" "),s("span",[t._v("限时购")])]):t._e(),t._v("\n              "+t._s(e.name)+"\n            ")]),t._v(" "),s("div",{staticClass:"pro_spec"},[s("div",{staticClass:"pro_price"},[1==e.deal_type||3==e.deal_type?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(e.price_sell)+" ")]):t._e(),t._v(" "),e.deal_type>=4?s("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(e.price_sell)+" ")]):t._e(),t._v(" "),1!=e.deal_type&&2!=e.deal_type&&3!=e.deal_type?s("span",{staticClass:"pro_integral"},[t._v("+")]):t._e(),t._v(" "),1!=e.deal_type&&3!=e.deal_type?s("div",{staticClass:"pro_inter_img"},[s("i",{staticClass:"iconfont icon-jifen1"})]):t._e(),t._v(" "),2==e.deal_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(e.point))]):t._e(),t._v(" "),1!=e.deal_type&&2!=e.deal_type&&3!=e.deal_type?s("span",{staticClass:"pro_integral"},[t._v(t._s(e.point))]):t._e()])])])])})],2):t._e(),t._v(" "),t.total>0?s("div",{staticClass:"order-foot"},[s("span",[t._v("—————— 我是有底线的 ——————")])]):t._e(),t._v(" "),0==t.footList.length?s("div",{staticClass:"foot_list_null"},[s("img",{attrs:{src:t.imgPath+"pro/null_1.png"}})]):t._e()]),t._v(" "),t.isEdit&&t.footList.length>0?s("div",{staticClass:"foot_edit_more"},[s("div",{staticClass:"allCheck"},[s("div",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.allchose,expression:"allchose"}],attrs:{id:"all",type:"checkbox"},domProps:{checked:1==t.allchose,checked:Array.isArray(t.allchose)?t._i(t.allchose,null)>-1:t.allchose},on:{click:t.checkAll,change:function(e){var s=t.allchose,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&(t.allchose=s.concat([null])):o>-1&&(t.allchose=s.slice(0,o).concat(s.slice(o+1)))}else t.allchose=i}}}),t._v(" "),s("label",{attrs:{for:"all"}})]),t._v(" "),s("span",[t._v("全选")])]),t._v(" "),s("mt-button",{attrs:{size:"small"},on:{click:t.delFoot}},[t._v("删除")])],1):t._e()]):t._e(),t._v(" "),s("div",{staticClass:"goIndex",attrs:{"data-link":"../index/index"},on:{click:t.goIndex}},[s("i",{staticClass:"iconfont icon-home"})])],1)},staticRenderFns:[]};var m=s("VU/8")(_,f,!1,function(t){s("Y2Tq")},"data-v-84cb535a",null);e.default=m.exports},Y2Tq:function(t,e){},"w+Mb":function(t,e){}});
//# sourceMappingURL=18.c6590daaf7b9deca6dee.js.map