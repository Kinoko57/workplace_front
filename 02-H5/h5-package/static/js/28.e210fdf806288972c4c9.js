webpackJsonp([28],{"37E2":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("fqE/"),s=e("Au9i"),n=e("yINb"),a=e("gyMJ"),c=e("Jtwt"),l=e("WVZN"),r={name:"FindDetail",components:{commonHeader:i.a,Search:s.Search,LyTab:n.a,returnTop:c.a,InfiniteScroll:s.InfiniteScroll,Lazyload:s.Lazyload,Button:s.Button,Toast:s.Toast},data:function(){return{h_title:"文章详情",head_color:{background:"#f9f9f9",color:"#000"},articleId:"",isSign:!0,listShow:!1,articleInfo:{},noScroll:!1,sharewx:"",show:!1}},mounted:function(){document.getElementById("find").scrollIntoView(!1),s.Indicator.open("加载中..."),console.log(this.$route.query),this.articleId=this.$route.query.id,this.getDetail();var t=this,o=window.plus;this.tabScroll(),o.share.getServices(function(o){var e={};for(var i in o){var s=o[i];e[s.id]=s}t.sharewx=e.weixin,console.log(t.sharewx)},function(t){console.log("获取分享服务列表失败："+t.message)})},methods:{tabScroll:function(){window.addEventListener("scroll",this.handleScroll)},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,o=window.outerHeight;this.show=t>o},goTop:function(){document.getElementById("find").scrollIntoView({block:"start",behavior:"smooth"})},getDetail:function(){var t=this;Object(a.A)(this.articleId).then(function(o){s.Indicator.close(),o.isSuccess&&(console.log(o),t.articleInfo=o.data,t.articleInfo.updatetime=Object(l.c)(t.articleInfo.updatetime,"{y}-{m}-{d}"))})},goPro:function(t,o,e){"normal"===t?this.$router.togo({path:"/proDetail?type="+t+"&id="+o}):"group"===t&&this.$router.togo({path:"/proDetail?type="+t+"&id="+o+"&goods_id"+e})},gotryPro:function(t){this.$router.togo({path:"/tryOutdetail?id="+t+"&form_share=0&help_id=null"})},goIndex:function(t){this.$router.replace({path:"/index"})},zipImg:function(t,o){var e=this,i=window.plus;""!==e.articleInfo.img?i.downloader.createDownload(e.articleInfo.img,{},function(s,n){if(200===n){console.log(s),console.log("Download success: "+s.filename);var a="_doc/shareImg"+(new Date).getTime()+".jpg";console.log("压缩后的文件名"+a),i.zip.compressImage({src:s.filename,dst:a,quality:50,format:"jpg",width:"50%",height:"50%"},function(i){console.log(i),console.log("压缩成功"),e.share(t,o,i.target)},function(i){console.log(i),e.share(t,o,!1)})}else console.log("下载失败: "+n),e.share(t,o,!1)}).start():e.share(t,o,!1)},share:function(t,o,e){var i=window.plus;!1===e&&(e="_www/img/mp.png");var s={type:"miniProgram",title:o,thumbs:[e],content:"公主购：一个专注省钱的会员制电商平台~",miniProgram:{id:"gh_a0cfbcaf8fa2",path:"pages/hotArticle/hotArticle?id="+t+"&name="+o,webUrl:"https://share.gongzhugou.com/"+"downApp/downApp.html",type:0},extra:{scene:"WXSceneSession"}};this.sharewx?this.isAuth(s):i.nativeUI.alert("当前环境不支持微信分享操作!")},isAuth:function(t){console.log("判断是否授权"),console.log(t),this.sharewx.authenticated?this.shareAction(t):this.sharewx.authorize(function(){this.shareAction(t)},function(t){console.log(t),-8==t.code&&Object(s.Toast)({message:"检测到您未安装微信，请通过应用商店下载",duration:1e3}),console.log("认证授权失败")})},shareAction:function(t){console.log("开始分享"),console.log(t),this.sharewx.send(t,function(){console.log("分享成功！")},function(t){console.log("失败失败啊"+t.message)})},showList:function(){this.listShow=!0,this.noScroll=!0},hideList:function(){this.listShow=!1}}},d={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("common-header",{attrs:{h_title:t.h_title,bgcolor:t.head_color}}),t._v(" "),e("div",{staticStyle:{height:"0.9rem"},attrs:{id:"find"}}),t._v(" "),e("div",{staticClass:"hot_article"},[t.show?e("div",{staticClass:"returnTop",on:{click:t.goTop}},[e("i",{staticClass:"iconfont icon-huidaodingbu"})]):t._e(),t._v(" "),e("div",{staticClass:"hot_info"},[e("div",{staticClass:"hot_title"},[t._v("\n        "+t._s(t.articleInfo.title)+"\n      ")]),t._v(" "),e("div",{staticClass:"hot_other"},[e("div",{staticClass:"other_time"},[t._v(t._s(t.articleInfo.updatetime))]),t._v(" "),e("div",{staticClass:"other_icon"},[e("i",{staticClass:"iconfont icon-16pxyuedu"}),t._v(" "),e("span",[t._v(t._s(t.articleInfo.click_nums)+"人已阅读")])])]),t._v(" "),t._l(t.articleInfo.content,function(o,i){return e("div",{key:i,staticClass:"hot_content"},[1==o.type?e("div",{staticClass:"hot_rich"},[e("div",{staticClass:"pro_html",domProps:{innerHTML:t._s(o.content)}})]):t._e(),t._v(" "),2==o.type?e("div",{staticClass:"hot_pro"},[e("div",{staticClass:"pro",on:{click:function(e){return t.goPro("normal",o.content,"")}}},[e("img",{staticStyle:{width:"7rem"},attrs:{src:o.goods.img}}),t._v(" "),e("div",{staticClass:"pro_price"},[1==o.goods.deal_type?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),1!=o.goods.deal_type?e("i",{staticClass:"iconfont icon-jifen1"}):t._e(),t._v(" "),2==o.goods.deal_type||3==o.goods.deal_type?e("span",[t._v(t._s(o.goods.point))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("+"+t._s(o.goods.point))]):t._e(),t._v(" "),e("span",[t._v("|去购买")])])])]):t._e(),t._v(" "),3==o.type?e("div",{staticClass:"hot_pro"},[e("div",{staticClass:"pro",on:{click:function(e){return t.goPro("group",o.activity_id,o.content)}}},[e("img",{staticStyle:{width:"7rem"},attrs:{src:o.goods.img}}),t._v(" "),e("div",{staticClass:"pro_price"},[1==o.goods.deal_type?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),1!=o.goods.deal_type?e("i",{staticClass:"iconfont icon-jifen1"}):t._e(),t._v(" "),2==o.goods.deal_type||3==o.goods.deal_type?e("span",[t._v(t._s(o.goods.point))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("+"+t._s(o.goods.point))]):t._e(),t._v(" "),e("span",[t._v("|去购买")])])])]):t._e(),t._v(" "),4==o.type?e("div",{staticClass:"hot_pro"},[e("div",{staticClass:"pro",on:{click:function(e){return t.gotryPro(o.activity_id)}}},[e("img",{staticStyle:{width:"7rem"},attrs:{src:o.goods.img}}),t._v(" "),e("div",{staticClass:"pro_price"},[1==o.goods.deal_type?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("¥"+t._s(o.goods.price_sell))]):t._e(),t._v(" "),1!=o.goods.deal_type?e("i",{staticClass:"iconfont icon-jifen1"}):t._e(),t._v(" "),2==o.goods.deal_type||3==o.goods.deal_type?e("span",[t._v(t._s(o.goods.point))]):t._e(),t._v(" "),o.goods.deal_type>=4?e("span",[t._v("+"+t._s(o.goods.point))]):t._e(),t._v(" "),e("span",[t._v("|去购买")])])])]):t._e()])})],2)]),t._v(" "),e("div",{staticClass:"goIndex",attrs:{"data-link":"../index/index"},on:{click:t.goIndex}},[e("i",{staticClass:"iconfont icon-home"})]),t._v(" "),e("div",{staticClass:"goShare",on:{click:function(o){return t.zipImg(t.articleInfo.id,t.articleInfo.title)}}},[e("i",{staticClass:"iconfont icon-fenxiang2"})])],1)},staticRenderFns:[]};var _=e("VU/8")(r,d,!1,function(t){e("knqO")},"data-v-b9639a52",null);o.default=_.exports},knqO:function(t,o){}});
//# sourceMappingURL=28.e210fdf806288972c4c9.js.map