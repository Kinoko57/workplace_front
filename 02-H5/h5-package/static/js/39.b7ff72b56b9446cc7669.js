webpackJsonp([39],{Gg5O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),o=a("Dd8w"),n=a.n(o),c=a("fqE/"),r=a("Au9i"),l=a("gyMJ"),h=a("NYxO"),u={name:"Search",components:{commonHeader:c.a,InfiniteScroll:r.InfiniteScroll,Indicator:r.Indicator,Button:r.Button,Lazyload:r.Lazyload,Toast:r.Toast},data:function(){return{h_title:"搜索",hot_page:1,hot_limit:10,hot_total:0,hotNum:0,hotSearch:[],istrue:!1,searchkey:"",keylist:[]}},mounted:function(){this.searchHis(),this.openLocationsercher(),document.getElementById("top").scrollIntoView(!1)},methods:n()({},Object(h.c)({setSearchData:"SET_SEARCHDATA"}),{goTop:function(){console.log("回到顶部"),document.getElementById("coll").scrollIntoView({block:"start",behavior:"smooth"})},goLink:function(t){this.$router.togo({path:"/proList?type=key&virtual_id=&value="+t})},searchHis:function(){var t=this,e={page:t.hot_page,pagesize:t.hot_limit};Object(l.N)(e).then(function(e){e.isSuccess&&(t.hotSearch=e.data.rows,t.hot_total=e.data.total,t.istrue=!0,t.hotNum=Math.ceil(e.data.total/t.hot_limit))})},changeList:function(){this.hot_page===this.hotNum&&(this.hot_page=0),++this.hot_page,this.searchHis()},searchList:function(){if(new RegExp("^[ ]+$").test(this.searchkey)&&(this.searchkey=""),""!==this.searchkey){console.log(this.keylist),null===this.keylist&&(this.keylist=[]);var t=this.keylist;t.length>8&&t.pop();for(var e=[{id:t.length,name:this.searchkey}],a=0;a<t.length&&t[a].name!==this.searchkey;a++);a>=t.length&&(t=e.concat(t),console.log(t),window.localStorage.setItem("searchData",i()(t)))}window.localStorage.setItem("backDetail",!1),this.$router.togo({path:"/proList?type=key&virtual_id=&value="+this.searchkey})},clearSearchStorage:function(){window.localStorage.setItem("searchData",""),this.keylist=[]},openLocationsercher:function(){var t=[];""!==window.localStorage.getItem("searchData")&&(t=JSON.parse(window.localStorage.getItem("searchData"))),console.log(t),this.keylist=null==t?[]:t}}),computed:n()({},Object(h.b)(["number","carnum","isbind","score","news","newsnum","issign"]))},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("common-header",{attrs:{h_title:t.h_title,showback:!0}}),t._v(" "),a("return-top",{on:{returnTop:t.goTop}}),t._v(" "),a("div",{staticStyle:{height:"0.9rem"},attrs:{id:"top"}}),t._v(" "),a("div",{staticClass:"search_his"},[a("div",{staticClass:"search_header"},[a("div",{staticClass:"search"},[a("i",{staticClass:"iconfont icon-search"}),t._v(" "),a("mt-field",{staticClass:"search_input",attrs:{placeholder:"搜索喜欢的商品"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}},model:{value:t.searchkey,callback:function(e){t.searchkey=e},expression:"searchkey"}})],1),t._v(" "),a("span",{on:{click:t.searchList}},[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"his_list"},[0!==t.keylist.length?a("div",{staticClass:"his_header"},[a("span",[t._v("历史记录")]),t._v(" "),a("span",{staticClass:"red_text",on:{click:t.clearSearchStorage}},[t._v("清除")])]):t._e(),t._v(" "),a("div",{staticClass:"h_list"},t._l(t.keylist,function(e,s){return a("span",{key:s,on:{click:function(a){return t.goLink(e.name)}}},[t._v(t._s(e.name))])}),0)]),t._v(" "),a("div",{staticClass:"hot_search"},[a("div",{staticClass:"hot_header"},[a("span",[t._v("热门搜索")]),t._v(" "),a("div",{staticClass:"hot_right"},[a("i",{staticClass:"iconfont icon-shuaxin"}),t._v(" "),a("span",{staticClass:"red_text",on:{click:t.changeList}},[t._v("换一批")])])]),t._v(" "),a("div",{staticClass:"hot_list"},t._l(t.hotSearch,function(e,s){return a("span",{key:s,on:{click:function(a){return t.goLink(e.title)}}},[t._v(t._s(e.title))])}),0)])])],1)},staticRenderFns:[]};var _=a("VU/8")(u,d,!1,function(t){a("dIZq")},"data-v-6d17a8a6",null);e.default=_.exports},dIZq:function(t,e){}});
//# sourceMappingURL=39.b7ff72b56b9446cc7669.js.map