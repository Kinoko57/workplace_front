webpackJsonp([7],{"9qCC":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEzElEQVRoQ+2ZbWhbVRjH/89N0xsZtetkdUzZQFbqhxlMTooyhJVZRZd0CFWQTVCZA626VaVJV8EPwlySIRvOTZDJUHGCOpD11snctH5Qwd5zr0ydbArOF8qszs0VXZI295GTZjpkbdOTrKHS8yn35nn7nec5r5cwyxvN8vgxB1DtDFYsAwxQNppYTcQdDKwAsLgIN0TAp8y03+xPvUcAVxK6IgC59p6WPLzdxIj8GxydG//NV154xwTbB6Ozti85WCmIsgGyscRaBr8CIEAgFdiOWqaD1J88Uwg/2tOQI74TQBeDWwBkCLTetFL7KgFRFkAm1n07gfqLNfGUaaV3TlQihRKLxR8H8LxyyuBowNp2qFwIbQC+q2t+dqz2WwBXEei+Unv0fCy+joDXAZw2a3JN9O6Os+VAaANkY/HnGNgMYE/ASm+YThCZ9vgeMNYTsNW00r3T0f2vrBZAsRx+BtCYN7B03oH00HSC+Cv2xDU++E8yMGxa6WvLmZm0AHJrekKe5zkAPgpY6VXTCf6CbCYWHwCw0jCMcO2BpKtjQ+loAWTbezqYvXfAtD3Qn3pSx3mmPb4djC4i426zL7lfx4Y2QCba/QiIdhNos2mlkjrOs9HuXibaAubOQP+2l3RsaAPkYolHPfCLBEqYViqt4zzbHk8wI2mAHqu1Urt0bMwBzGWgGiXU3Nxct3fJyq5FNeazw/lscuPZL17Wqd+dDTc+vNAw46fGss88+OPHO44fPz6iY6ekaTQYDDb6/f5uAPcAWKrjqASdH5j5LWbe5rruryXIF0SmBIhEIquZ+Q0A85nZI6ITAH5rMPwLznijp0t1dIktgLHQZzYO57O/AFjIzE1EZAA4S0Rrbds+WIrtSQFaWlpu9TzvfQA+ItqVz+e3uq47rW1DKUEomVAotNjn8/UycyeAMWa+w3GcD6fSnxAgGAzO8/v93wG4mog22Lat9vyXvQkhHgKgxtWp0dHRpqNHj/45mdMJAYQQm9ThBMA+KeW6yx75RQ7C4fCbRHQvgE1Syhd0AY4AWEVEN9m2/fkMA9xMRJ8x8xHHcdp0AX4CsEhKGQCQn0kANeaEEFkAQ1LKJboAal4ek1I2zHDwBXdCCHVSIyllfVUAcrGEGj+otVJdOh1QBDCklP/calzKzmSDuKwMZKLxwlk30J+ePysBsrFxANOaA6hOCc1lYHwWqt4g/j9k4PfiIF4wK2ehTCy+sTCNWulJ9zITwVViHVDX456UUmse1+n1i3WEEH+oZ+2VOBwOfw9gSSaTueLYsWO5cgOajv6yZcvM+vr68wBOSimv091KWACinue1ua6rdqYz1iKRSBszf8DMfY7jrNECCIfDDxDRXmY+7DjObTMWPUBCiMPFrfz9tm2/pgXQ2tpaMzIy8iWA6wEkpZTqKv2yNyGEuqpMAPimrq4uODAwMKYFoJQikchyZv4EgFrOD3met8V1XfVc6fOBLxQK3WIYxtMAVLbPGYaxYnBw8OupemzKWwkhxA3MvJ+ImorGRpn5DBFV5GsjMxMRqTOHv2j/BBF12Lb91VTBq/+nBFBCQgg/M6sxoe6FlqvPSmqZL8VBCTKe+twEQJXr2wBelVKOlqBXECkJoFRj1ZCbA6hGr1/sc9Zn4G/BcDpPR4ebxAAAAABJRU5ErkJggg=="},Mjbw:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAC3klEQVRoQ+2Zz08TQRTHv2+xFIsiJp48EyWaENhJPPgHmGCp3sSbmngw8ahQDBw4oFjwSuLBRLwJNy1VE+9edLYLCQ1RvHoywSgW2mb3mcESAenubMrPZObW7pt97/Ped2Z35xEO+aBDHj8MwH5XMHIFhBAJZr5LRL0A2gE01wnxG8ACEU2Xy+WJubk59Vt7RAKwbbuNiGYAnK16+A4gksNtIlMJOFX9/7PneT2u637RJdAG6OjoaI7FYi6ANmZ+53ne/dnZ2XldR0F2XV1d54joCRF1A/i6srLSWSgUlnXurQ0ghBgAMArgvZRSOfJ0HESwsYQQbwFcYuZBx3Ee6cyNAiAB2J7nXXBd92Otm/9IDpxMEA/54OMbbSzQryLTSGvu8VKtubZtCyL6BCAvpbR3GmCJmVscx2kMyv5qKt0N5jfbOie63JTNqCzXGqoKZbWupJQndhqgCOCIlFIBBI5iMn3RIv/YRiOfreVELvMhbK4QYhUASymPhtmq61EkpA2g47iWjQEIyIypgI60jISMhHR0EmBjJGQkZCRkXiW214AQwjyJdZaH2UbNNqqjE/Mk/pcB80VWp2L+m252IbML1ampAyEhxrBVSRXv+IxrisciTMeyiaeEYT+M70AAlJLp50x8c2OwxDQZz2VuHXiAck+f7YPUOeo3y8dVFbBv4RWA0xZYNM6MO0EQ+16BUk9fL4NeEuFFPDu2VoVSqn+SGTcIfD0+Mz61XwBah7ul1IN2Zm8e4J9EDbdVsMzeM4BaiBrOx7OjCwEA64e7y1LK1jC5RT0b1TpeX8t4sn+ECYOb1wAexnNjQ0FB7fbxeqQGx+qVdJL8v7sQW5huep3JhWR0dxscW1tMzHwvn88XdMocZrOlxbRYqVQ6dZt92i9zKohqk09l8kw1qB1v8jFz0nGcxTDo9euRANSk3WqzMvMUEU1IKdW3t/aIDKB95z0yNAB7lOiabg59Bf4A6u8JT+/aDZAAAAAASUVORK5CYII="},nMsR:function(e,t){},ucpJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("Dd8w"),s=i.n(o),n=i("Mjbw"),r=i.n(n),a=i("9qCC"),c=i.n(a),l=i("fqE/"),d=i("Pldz"),m=i.n(d),u=i("Au9i"),h=i("gyMJ"),g=i("Td3j"),v=i("NYxO"),A={name:"Bind",components:{commonHeader:l.a,InfiniteScroll:u.InfiniteScroll,Indicator:u.Indicator,Button:u.Button,Lazyload:u.Lazyload,Toast:u.Toast,MessageBox:u.MessageBox},data:function(){return{h_title:"绑定手机",head_color:{background:"#f9f9f9",color:"#000"},visited:0,mobile:"",code:"",text:"获取验证码",currentTime:61,isDisabled:!1,color:"#ff4e79",canclick:!1,is_success:!1,phoneImg:r.a,suoImg:c.a,isClear:!1,isLogin:!1,isPhoneShowRed:!1,isCodeShowRed:!1,isShowTime:!1,clearImg:m.a,openid:"",uionId:"",name:"",iconurl:""}},mounted:function(){console.log(this.$route.query),this.visited=this.$route.query.visit;var e=window.localStorage;console.log(e.getItem("login_phone")),null!=e.getItem("login_phone")&&(this.mobile=e.getItem("login_phone")),null!=e.getItem("login_code")&&(this.code=e.getItem("login_code")),-1==this.visited&&(this.openid=this.$route.query.openid,this.uionId=this.$route.query.unionid,this.name=this.$route.query.name,this.iconurl=this.$route.query.iconurl),this.noClose()},methods:s()({},Object(v.c)({setIsbind:"SET_ISBIND",setUserInfo:"SET_USERINFO",setInviter:"SET_INVITER",setMember:"SET_MEMBER",setShowShare:"SET_SHARE",setFirst:"SET_FIRST",setScore:"SET_SCORE"}),{goTop:function(){console.log("回到顶部"),document.getElementById("coll").scrollIntoView({block:"start",behavior:"smooth"})},noClose:function(){this.isClear=!1,""!==this.mobile&&11===this.mobile.length&&/^1[3|4|5|6|7|8|9]\d{9}$/.test(this.mobile)?(this.isLogin=!0,this.isPhoneShowRed=!0):(this.isLogin=!1,this.isPhoneShowRed=!1),""!==this.code&&6===this.code.length?this.isCodeShowRed=!0:this.isCodeShowRed=!1},clearInfo:function(){this.mobile="",this.isLogin=!1,this.isPhoneShowRed=!1},send:function(){var e=this;console.log(0);var t=this;t.isDisabled=!0,t.color="#ccc";var i=t.mobile,o=t.currentTime,s=null;if(""===i?s="号码不能为空":11===i.trim().length&&/^1[3|4|5|6|7|8|9]\d{9}$/.test(i)?(u.Indicator.open("发送中"),Object(h._43)(t.mobile).then(function(i){e.isShowTime=!0,u.Indicator.close();var s=setInterval(function(){o--,t.color="#ccc",t.text=o+"s",o<=0&&(clearInterval(s),t.text="重新发送",t.currentTime=61,t.isDisabled=!1,t.color="#ff4e79",t.isShowTime=!1)},1e3);i.isSuccess?Object(u.Toast)({message:i.msg,duration:1e3}):(clearInterval(s),t.isDisabled=!1,t.color="#ff4e79",Object(u.Toast)({message:i.msg,duration:1e3}))})):s="手机号格式不正确",null!=s){var n=window.plus;window.plus?n.nativeUI.confirm(s,function(e){console.log("Close confirm: "+e.index),0!==e.index&&"0"!==e.index||console.log("用户点击确定")},{title:"提示",buttons:["确定"],verticalAlign:"center"}):Object(u.MessageBox)("提示",s),t.isDisabled=!1,t.color="#ff4e79"}},goProtocol:function(){var e=window.localStorage;""!=this.mobile&&e.setItem("login_phone",this.mobile),""!=this.code&&e.setItem("login_code",this.code),this.$router.togo({path:"/protocol"})},formSubmit:function(){if(""===this.mobile)11===this.mobile.trim().length&&/^1[3|4|5|6|7|8|9]\d{9}$/.test(this.mobile)||Object(u.Toast)({message:"手机号格式不正确",duration:1e3});else if(""===this.code)Object(u.Toast)({message:"验证码不能为空",duration:1e3});else if(u.Indicator.open("提交中"),!this.is_success){var e=this,t=window.localStorage;if(-1==this.visited){var i={mobile:e.mobile,tel_verify:e.code,openid:e.openid,uionId:e.uionId,name:e.name,iconurl:e.iconurl};Object(g.k)(i).then(function(i){if(u.Indicator.close(),i.isSuccess){t.removeItem("login_phone"),t.removeItem("login_code");var o="uid="+i.uid+";username="+i.username+";rank="+i.rank+";token="+i.token+";source="+i.source+";sessionid="+i.sessionid;console.log(o);var s={};s.avatar=i.image,s.level=i.rankName,s.isShow=1,s.nickname=i.nickname,s.isbind=i.bindPhone,s.level_id=i.level_id,s.level_name=i.levelName,s.inviter=i.inviter,s.is_first=i.is_first,e.setUserInfo(s),e.setInviter(i.inviter),t.setItem("token",o),t.setItem("isLogin",!0),e.setIsbind(i.bindPhone),e.userInfo=e.$store.state.home.userInfo,0!==i.level_id&&"0"!==i.level_id?e.setMember(!0):e.setMember(!1),console.log("返回上一页"),!0===i.bindPhone?e.$router.replace({path:"/index"}):e.$router.togo({path:"/bind?visit=0"})}else Object(u.Toast)({message:i.msg,duration:1e3})})}else{var o={phone:e.mobile,code:e.code};Object(h._41)(o).then(function(t){u.Indicator.close(),t.isSuccess?(e.is_success=!0,Object(u.Toast)({message:t.msg,duration:500}),e.setIsbind(!0),"3"===e.visited?e.$router.replace({path:"/mySignIn"}):"0"===e.visited?setTimeout(function(){e.$router.back()},500):"4"===e.visited?setTimeout(function(){e.$router.back()},500):"1"===e.visited?setTimeout(function(){e.$router.back()},500):"5"===e.visited?e.$router.replace({path:"/member"}):"6"===e.visited?e.$router.replace({path:"/lottery"}):e.$router.go(-2)):Object(u.Toast)({message:t.msg,duration:1e3})})}}}}),computed:s()({},Object(v.b)([]))},b={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{background:"#fff"}},[i("common-header",{attrs:{h_title:e.h_title,showback:!0,bgcolor:e.head_color}}),e._v(" "),i("return-top",{on:{returnTop:e.goTop}}),e._v(" "),i("div",{staticStyle:{height:"0.9rem"}}),e._v(" "),i("div",{staticClass:"bind"},[i("div",{staticClass:"b_content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),i("div",{staticClass:"b_form"},[i("div",{class:e.isPhoneShowRed?"form-item showRed":"form-item showW",staticStyle:{"padding-right":"0.32rem"}},[i("img",{attrs:{src:e.phoneImg}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],staticStyle:{"padding-left":"0.16rem"},attrs:{type:"number",placeholder:"请输入11位手机号"},domProps:{value:e.mobile},on:{blur:e.noClose,input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:""!==e.mobile,expression:"mobile !== ''"}],staticClass:"close",on:{click:e.clearInfo}},[i("img",{attrs:{src:e.clearImg,alt:""}})])]),e._v(" "),i("div",{class:e.isCodeShowRed?"form-item showRed":"form-item showW"},[i("img",{attrs:{src:e.suoImg}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticStyle:{"padding-left":"0.16rem"},attrs:{type:"number",placeholder:"请输入6位验证码"},domProps:{value:e.code},on:{blur:e.noClose,input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),i("button",{class:e.isShowTime?"codeTime":"codeClick",attrs:{size:"small"},on:{click:e.send}},[e._v(e._s(e.text))])])]),e._v(" "),i("div",{staticClass:"login"},[-1==e.visited?i("button",{class:e.isLogin?"okLogin":"noLogin",on:{click:e.formSubmit}},[e._v("登录")]):i("button",{class:e.isLogin?"okLogin":"noLogin",on:{click:e.formSubmit}},[e._v("完成")])]),e._v(" "),-1==e.visited?i("div",{staticClass:"argessInfo"},[i("div",{staticClass:"info"},[i("p",[e._v("点击登录表示您同意"),i("span",{on:{click:e.goProtocol}},[e._v("《公主购服务协议》")])])])]):e._e()])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"b_title"},[t("span",[this._v("绑定手机号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"b_tips"},[t("span",[this._v("为了您的账号安全，请先绑定手机号")])])}]};var f=i("VU/8")(A,b,!1,function(e){i("nMsR")},"data-v-6106af73",null);t.default=f.exports}});
//# sourceMappingURL=7.f44bbe3eb1613475078f.js.map