webpackJsonp([60],{"18iw":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("fqE/"),o=i("Au9i"),a=i("WVZN"),c=i("gyMJ"),n={name:"MyCoupon",components:{commonHeader:s.a,InfiniteScroll:o.InfiniteScroll,Indicator:o.Indicator,Button:o.Button,Lazyload:o.Lazyload},data:function(){return{h_title:"我的优惠券",couList:[],viewList:[],page:1,pagesize:100,couType:"1",couTotal:0,total:0,useTotal:0,loading:!0,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/"}},mounted:function(){o.Indicator.open("加载中..."),this.getList()},methods:{goTop:function(){console.log("回到顶部"),document.getElementById("cou").scrollIntoView({block:"start",behavior:"smooth"})},goIndex:function(){this.$router.replace({path:"/index"})},viewCouType:function(t){o.Indicator.open("加载中..."),0===t?this.couType="1":1===t?this.couType="2":2===t&&(this.couType="3"),this.page=1,this.loading=!0,this.couList=[],this.getList()},getList:function(){var t={page:this.page,pagesize:this.pagesize,type:this.couType},e=this;Object(c.T)(t).then(function(t){if(o.Indicator.close(),t.isSuccess){e.couList=t.data.rows,e.loading=!1;for(var i=0;i<e.couList.length;i++)e.couList[i].totime=Object(a.c)(e.couList[i].totime,"{y}-{m}-{d}"),e.couList[i].createtime=Object(a.c)(e.couList[i].createtime,"{y}-{m}-{d}"),null!=e.couList[i].usetime&&(e.couList[i].usetime=Object(a.c)(e.couList[i].usetime,"{y}-{m}-{d}"))}})},loadMore:function(){var t=this;this.loading=!0,setTimeout(function(){var e={page:++t.page,pagesize:t.pagesize,type:t.couType},i=t;Object(c.T)(e).then(function(t){if(o.Indicator.close(),t.isSuccess)if(null!==t.data.rows&&t.data.rows.length>0){for(var e=0;e<t.data.rows.length;e++)t.data.rows[e].totime=Object(a.c)(t.data.rows.totime,"{y}-{m}-{d}"),t.data.rows[e].createtime=Object(a.c)(t.data.rows.createtime,"{y}-{m}-{d}"),null!=t.data.rows.usetime&&(t.data.rows.usetime=Object(a.c)(t.data.rows.usetime,"{y}-{m}-{d}")),i.couList=i.couList.concat(t.data.rows);i.loading=!1}else i.loading=!0}),i.loading=!0},1e3)}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("common-header",{attrs:{h_title:t.h_title,showback:!0}}),t._v(" "),i("div",{staticClass:"my_coupon"},[i("return-top",{on:{returnTop:t.goTop}}),t._v(" "),i("div",{staticStyle:{height:"0.9rem"},attrs:{id:"cou"}}),t._v(" "),i("div",{staticClass:"coupon_body"},[i("div",{staticClass:"coupon_nav"},[i("span",{class:"1"==t.couType?"text_active":"",on:{click:function(e){return t.viewCouType(0)}}},[t._v("可使用")]),t._v(" "),i("span",{class:"2"==t.couType?"text_active":"",on:{click:function(e){return t.viewCouType(1)}}},[t._v("已使用")]),t._v(" "),i("span",{class:"3"==t.couType?"text_active":"",on:{click:function(e){return t.viewCouType(2)}}},[t._v("已失效")])]),t._v(" "),i("div",{staticStyle:{height:"0.9rem"}}),t._v(" "),t.couList.length>0?i("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"cou_list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},t._l(t.couList,function(e,s){return i("div",{key:s,staticClass:"cou_info"},[i("img",{attrs:{src:t.imgPath+"order/cop_bg.png",hidden:"1"!=t.couType}}),t._v(" "),i("img",{attrs:{src:t.imgPath+"order/cop_bg_01.png",hidden:"1"==t.couType}}),t._v(" "),i("div",{staticClass:"cou_more"},[i("div",{staticClass:"cou_value"},[t._v("￥\n              "),i("span",[t._v(t._s(e.cashworth))])]),t._v(" "),i("div",{staticClass:"cou_more_tips"},[e.order_price>0?i("span",[t._v("满"+t._s(e.order_price)+"可用")]):t._e(),t._v(" "),e.order_price<=0?i("span",[t._v("无门槛通用")]):t._e()])]),t._v(" "),i("div",{staticClass:"cou_tips"},[i("span",{staticClass:"cou_title"},[t._v(t._s(e.title))]),t._v(" "),i("div",{class:1==e.state?"cou_type_normal cou_type":"cou_type"},[null!=e.type_name?i("span",[t._v("适用于:"+t._s(e.type_name)+t._s(e.content))]):t._e(),t._v(" "),null==e.type_name?i("span",[t._v("全类目通用"+t._s(e.content))]):t._e()]),t._v(" "),i("div",{staticClass:"cou_time",attrs:{hidden:1!=e.state}},[i("span",[t._v("有效期至"+t._s(e.totime))])]),t._v(" "),i("div",{staticClass:"cou_time",attrs:{hidden:3!=e.state}},[i("span",[t._v("使用时间："+t._s(e.usetime))])]),t._v(" "),i("div",{staticClass:"cou_time",attrs:{hidden:2!=e.state}},[i("span",[t._v("过期时间："+t._s(e.totime))])])]),t._v(" "),i("div",{staticClass:"cou_states"},[2==e.state?i("i",{staticClass:"iconfont icon-yishixiao"}):t._e(),t._v(" "),3==e.state?i("i",{staticClass:"iconfont icon-yishiyong"}):t._e()])])}),0):t._e(),t._v(" "),t.couList.length<=0?i("div",{staticClass:"cou_list_null"},[i("img",{attrs:{src:t.imgPath+"pro/null_4.png"}})]):t._e()]),t._v(" "),t.loading&&t.couList.length>0?i("div",{staticClass:"list_bottom"},[t._v("—————— 我是有底线的 ——————")]):t._e()],1),t._v(" "),i("div",{staticClass:"goIndex",attrs:{"data-link":"../index/index"},on:{click:t.goIndex}},[i("i",{staticClass:"iconfont icon-home"})])],1)},staticRenderFns:[]};var l=i("VU/8")(n,u,!1,function(t){i("4oQv")},"data-v-380195a4",null);e.default=l.exports},"4oQv":function(t,e){}});
//# sourceMappingURL=60.1eb41d0356805f19ca1e.js.map