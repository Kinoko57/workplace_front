webpackJsonp([59],{"5f8+":function(t,i){},wnuf:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("fqE/"),s=e("Au9i"),a=e("gyMJ"),o=e("WVZN"),r={name:"MyGiftList",components:{commonHeader:n.a,InfiniteScroll:s.InfiniteScroll,Indicator:s.Indicator,Button:s.Button,Lazyload:s.Lazyload,Spinner:s.Spinner,Toast:s.Toast,Loadmore:s.Loadmore},data:function(){return{h_title:"我的奖品列表",allowbind:!0,giftType:"2",page:1,limit:10,total:0,giftList:[],proType:"exchange",loading:!0,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/",screenHeight:(document.documentElement.clientHeight-50)/50}},mounted:function(){console.log(this.$route),s.Indicator.open("加载中..."),this.getList()},methods:{goTop:function(){console.log("回到顶部"),document.getElementById("giftList").scrollIntoView({block:"start",behavior:"smooth"})},getList:function(){var t=this,i={page:t.page,type:t.giftType,limit:t.limit};Object(a._11)(i).then(function(i){if(s.Indicator.close(),i.isSuccess){if(null===i.data.rows)i.data.rows=[],t.loading=!0,t.total=0;else{for(var e=0;e<i.data.rows.length;e++)i.data.rows[e].createtime=Object(o.c)(i.data.rows[e].createtime,"{y}-{m}-{d} {h}:{i}:{s}");t.total=i.data.total,t.loading=!1,console.log(t.loading)}t.giftList=i.data.rows}else t.total=0,t.giftList=[],t.loading=!0})},loadMore:function(){this.loading=!0;var t=this,i={page:++t.page,type:t.giftType,limit:t.limit};Object(a._11)(i).then(function(i){if(s.Indicator.close(),i.isSuccess){if(null===i.data.rows);else{for(var e=0;e<i.data.rows.length;e++)i.data.rows[e].createtime=Object(o.c)(i.data.rows[e].createtime,"{y}-{m}-{d} {h}:{i}:{s}");t.total=i.data.total,t.loading=!1}t.giftList=t.giftList.concat(i.data.rows)}else t.total=0,t.giftList=[],t.loading=!0})},goLink:function(t){this.$router.togo({path:t})},goIndex:function(){this.$router.replace({path:"/index"})},viewGift:function(t){s.Indicator.open("加载中..."),this.giftType=t,this.page=1,this.loading=!0,this.giftList=[],this.loading=!0,this.getList()},winPro:function(t,i,e){if(console.log(e),"false"===this.$store.state.home.isbind||!1===this.$store.state.home.isbind)this.$router.togo({path:"/bind?visit=4"});else{var n=this;if(this.allowbind){n.allowbind=!1;var o={pid:t,num:1,goods_id:"",deal_type:1,type:"exchange",lottery_id:i,genre:e};Object(a.a)(o).then(function(i){i.isSuccess?n.$router.togo({path:"/sureOrder?id="+t+"&addType=3&proType=exchange&genre="+e}):(n.allowbind=!0,Object(s.Toast)({message:i.msg,duration:1e3}))})}}}}},c={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("common-header",{attrs:{h_title:t.h_title,showback:!0}}),t._v(" "),e("div",{staticClass:"my_gift"},[e("return-top",{on:{returnTop:t.goTop}}),t._v(" "),e("div",{staticStyle:{height:"0.9rem"},attrs:{id:"giftList"}}),t._v(" "),e("div",{staticClass:"gift_nav"},[e("span",{class:"2"==t.giftType?"text_active":"",on:{click:function(i){return t.viewGift("2")}}},[t._v("待领取")]),t._v(" "),e("span",{class:"1"==t.giftType?"text_active":"",on:{click:function(i){return t.viewGift("1")}}},[t._v("已领取")])]),t._v(" "),e("div",{staticStyle:{height:"0.9rem"}}),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"gift_info",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},[t._l(t.giftList,function(i,n){return e("div",{key:n,staticClass:"info"},[2==i.lottery_type?e("i",{staticClass:"iconfont icon-jifen"}):t._e(),t._v(" "),3==i.lottery_type?e("i",{staticClass:"iconfont icon-youhuiquan"}):t._e(),t._v(" "),1==i.lottery_type?e("i",{staticClass:"iconfont icon-shangpin"}):t._e(),t._v(" "),e("span",{staticClass:"win_time"},[t._v(t._s(i.createtime))]),t._v(" "),e("span",{staticClass:"win_name"},[t._v(t._s(i.name))]),t._v(" "),1==i.get_status?e("button",{staticClass:"btn_red",attrs:{size:"mini"}},[t._v("已领取")]):t._e(),t._v(" "),2==i.get_status?e("button",{staticClass:"btn_red",attrs:{size:"mini"},on:{click:function(i){return t.goLink("../myOrder/myOrder?tid=1&id=type1")}}},[t._v("待付款")]):t._e(),t._v(" "),3==i.get_status?e("button",{staticClass:"btn_red",attrs:{size:"mini"}},[t._v("已取消")]):t._e(),t._v(" "),0==i.get_status?e("button",{staticClass:"btn_red",attrs:{size:"mini"},on:{click:function(e){return t.winPro(i.pid,i.id,i.genre)}}},[t._v("点击领取")]):t._e()])}),t._v(" "),t.loading?t._e():e("div",{staticClass:"more_load"},[e("mt-spinner",{attrs:{type:"fading-circle"}})],1),t._v(" "),0==t.giftList.length?e("div",{staticClass:"center"},[e("img",{attrs:{src:t.imgPath+"pro/null_1.png"}})]):t._e(),t._v(" "),t.total>0&&t.giftList.length==t.total?e("div",{staticClass:"list_bottom"},[t._v("—————— 我是有底线的 ——————")]):t._e()],2)],1),t._v(" "),e("div",{staticClass:"goIndex",on:{click:t.goIndex}},[e("i",{staticClass:"iconfont icon-home"})])],1)},staticRenderFns:[]};var l=e("VU/8")(r,c,!1,function(t){e("5f8+")},"data-v-4019cfb4",null);i.default=l.exports}});
//# sourceMappingURL=59.c564cbb6e832f7c0615a.js.map