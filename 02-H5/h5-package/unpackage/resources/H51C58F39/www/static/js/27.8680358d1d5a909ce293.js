webpackJsonp([27],{"+OXH":function(e,t){},byYY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Dd8w"),n=s.n(i),a=s("fqE/"),c=s("Au9i"),o=s("WVZN"),l=s("NYxO"),d=s("gyMJ"),r={name:"News",components:{commonHeader:a.a,InfiniteScroll:c.InfiniteScroll,Indicator:c.Indicator,Button:c.Button,Lazyload:c.Lazyload,MessageBox:c.MessageBox,Toast:c.Toast,CellSwipe:c.CellSwipe,Loadmore:c.Loadmore},data:function(){return{h_title:"消息中心",newList:[],page:1,pagesize:10,total:0,newDetail:{},newShow:!1,choseId:"",choseType:2,allchose:!1,delList:[],isEdit:!1,loading:!0,imgPath:"https://share.gongzhugou.com/static/image/xcx_img/"}},mounted:function(){c.Indicator.open("加载中..."),this.getList()},methods:n()({},Object(l.c)({setNews:"SET_NEWS",setNewsnum:"SET_NEWSNUM"}),{goTop:function(){console.log("回到顶部"),document.getElementById("news").scrollIntoView({block:"start",behavior:"smooth"})},goIndex:function(){this.$router.replace({path:"/index"})},chose:function(e){e.checked=!e.checked,this.delList=[];for(var t=0;t<this.newList.length;t++)this.newList[t].checked&&this.delList.push(this.newList[t].id);var s=this.newList.every(function(e){return e.checked});this.allchose=!!s},checkAll:function(){if(this.delList=[],!1===this.allchose){for(var e=0;e<this.newList.length;e++)this.newList[e].checked=!0,this.delList.push(this.newList[e].id);this.allchose=!0}else{for(var t=0;t<this.newList.length;t++)this.newList[t].checked=!1;this.delList=[],this.allchose=!1}},delNews:function(){var e=this;if(e.delList.length<=0)Object(c.Toast)({message:"请选择要操作的数据",duration:1e3});else{var t=window.plus;window.plus?t.nativeUI.confirm("是否删除选中内容?",function(t){console.log("Close confirm: "+t.index),0===t.index||"0"===t.index?Object(d.t)(e.delList.join(",")).then(function(t){t.isSuccess?(Object(c.Toast)({message:t.msg,iconClass:"iconfont icon-dui1",duration:1e3}),e.page=1,e.allchose=0,e.newList=[],e.getList()):Object(c.Toast)({message:t.msg,duration:1e3})}):console.log("用户点击取消")},{title:"提示",buttons:["确定","取消"],verticalAlign:"center"}):Object(c.MessageBox)({title:"提示",message:"是否删除选中内容?",showCancelButton:!0,closeOnClickModal:!1}).then(function(t){"confirm"===t&&Object(d.t)(e.delList.join(",")).then(function(t){t.isSuccess?(Object(c.Toast)({message:t.msg,iconClass:"iconfont icon-dui1",duration:1e3}),e.page=1,e.allchose=0,e.newList=[],e.getList()):Object(c.Toast)({message:t.msg,duration:1e3})})})}},edit:function(){this.isEdit=!this.isEdit},choseNews:function(e){c.Indicator.open("加载中..."),this.choseType=e,this.page=1,this.allchose=!1,this.newList=[],this.total=0,this.getList()},viewNews:function(e,t){var s=this;0===t&&Object(d._33)(e).then(function(t){if(t.isSuccess)for(var i=0;i<s.newList.length;i++)s.newList[i].id===e&&(s.newList[i].status_read=1)}),e===this.choseId?this.newShow=!this.newShow:(this.newShow=!0,this.choseId=e)},getList:function(){var e=this,t={type:e.choseType,page:e.page,pagesize:e.pagesize};Object(d.V)(t).then(function(t){if(c.Indicator.close(),t.isSuccess)if(null!==t.data.rows&&t.data.rows.length>0){for(var s=0;s<t.data.rows.length;s++)t.data.rows[s].createtime=Object(o.c)(t.data.rows[s].createtime,"{y}-{m}-{d} {h}:{i}:{s}"),t.data.rows[s].checked=!1;e.newList=t.data.rows,e.total=t.data.total,e.loading=!1}else e.newList=[],e.total=0,e.loading=!0})},loadMore:function(){this.loading=!0;var e=this,t={type:e.choseType,page:++e.page,pagesize:e.pagesize};Object(d.V)(t).then(function(t){if(t.isSuccess)if(null!==t.data.rows&&t.data.rows.length>0){for(var s=0;s<t.data.rows.length;s++)t.data.rows[s].createtime=Object(o.c)(t.data.rows[s].createtime,"{y}-{m}-{d} {h}:{i}:{s}"),t.data.rows[s].checked=!1;e.newList=e.newList.concat(t.data.rows),e.total=t.data.total,e.loading=!1}else t.data.rows=[],e.newList=e.newList.concat(t.data.rows),e.total=t.data.total,e.loading=!0})}}),computed:n()({},Object(l.b)(["number","carnum","isbind","score","news","newsnum","issign"]))},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("common-header",{attrs:{h_title:e.h_title,showback:!0}}),e._v(" "),s("div",{staticClass:"news"},[s("div",{staticStyle:{height:"0.9rem"},attrs:{id:"news"}}),e._v(" "),s("return-top",{on:{returnTop:e.goTop}}),e._v(" "),s("div",{staticClass:"news_header"},[2==e.choseType?s("span",[e._v("共有"),s("span",{staticClass:"news_num"},[e._v(e._s(e.total))]),e._v("条消息")]):e._e(),e._v(" "),1==e.choseType?s("span",[e._v("共有"),s("span",{staticClass:"news_num"},[e._v(e._s(e.total))]),e._v("条通知")]):e._e(),e._v(" "),!e.isEdit&&e.newList.length>0?s("span",{staticClass:"news_edit",on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.isEdit&&e.newList.length>0?s("span",{staticClass:"news_edit",on:{click:e.edit}},[e._v("完成")]):e._e()]),e._v(" "),s("div",{staticClass:"news_body"},[s("div",{staticClass:"news_nav"},[s("span",{class:2==e.choseType?"text_active":"",on:{click:function(t){return e.choseNews(2)}}},[e._v("消息")]),e._v(" "),s("span",{class:1==e.choseType?"text_active":"",on:{click:function(t){return e.choseNews(1)}}},[e._v("通知")])]),e._v(" "),s("div",{staticStyle:{height:"1.7rem"}}),e._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"news_list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},[e.total>0?s("div",{staticStyle:{background:"#fff",padding:"0 0.24rem"}},e._l(e.newList,function(t,i){return s("div",{key:i,class:e.choseId==t.id&&e.newShow?"new_info":"new_info info_hidden"},[s("div",{staticClass:"info_title"},[e.isEdit?s("div",{staticClass:"info_chose"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"item.checked"}],attrs:{id:t.id,type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?e._i(t.checked,null)>-1:t.checked},on:{click:function(s){return e.chose(t)},change:function(s){var i=t.checked,n=s.target,a=!!n.checked;if(Array.isArray(i)){var c=e._i(i,null);n.checked?c<0&&e.$set(t,"checked",i.concat([null])):c>-1&&e.$set(t,"checked",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(t,"checked",a)}}}),e._v(" "),s("label",{attrs:{for:t.id}})]):e._e(),e._v(" "),s("div",{staticClass:"info_img",on:{click:function(s){return e.viewNews(t.id,t.status_read)}}},[1==e.choseType?s("i",{staticClass:"iconfont icon-tongzhi"}):e._e(),e._v(" "),2==e.choseType?s("i",{staticClass:"iconfont icon-tongzhi1"}):e._e()]),e._v(" "),s("div",{staticClass:"news_more",on:{click:function(s){return e.viewNews(t.id,t.status_read)}}},[s("div",{staticClass:"news_tips"},[s("span",{staticClass:"news_title"},[e._v(e._s(t.title))]),e._v(" "),s("span",[e._v(e._s(t.createtime))]),e._v(" "),1==t.status_read?s("i",{class:e.choseId==t.id&&e.newShow?"iconfont icon-xiala":"iconfont icon-xiala iconopen"}):e._e(),e._v(" "),0==t.status_read?s("span",[e._v("未读")]):e._e()])])]),e._v(" "),s("div",{staticClass:"info_detail"},[e._v("\n              "+e._s(t.nr)+"\n            ")])])}),0):e._e(),e._v(" "),e.newList.length<=0?s("div",{staticClass:"news_list_null"},[2==e.choseType?s("img",{attrs:{src:e.imgPath+"pro/null_3.png"}}):e._e(),e._v(" "),1==e.choseType?s("img",{attrs:{src:e.imgPath+"pro/null_2.png"}}):e._e()]):e._e(),e._v(" "),e.loading?e._e():s("div",{staticClass:"more_load"},[s("mt-spinner",{attrs:{type:"fading-circle"}})],1),e._v(" "),e.newList.length>0&&e.newList.length==e.total?s("div",{staticClass:"list_bottom"},[e._v("—————— 我是有底线的 ——————")]):e._e()])]),e._v(" "),e.isEdit&&e.newList.length>0?s("div",{staticClass:"null_height"}):e._e(),e._v(" "),e.isEdit&&e.newList.length>0?s("div",{staticClass:"foot_edit_more"},[s("div",{staticClass:"allCheck"},[s("div",{staticClass:"checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allchose,expression:"allchose"}],attrs:{id:"all",type:"checkbox"},domProps:{checked:1==e.allchose,checked:Array.isArray(e.allchose)?e._i(e.allchose,null)>-1:e.allchose},on:{click:e.checkAll,change:function(t){var s=e.allchose,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&(e.allchose=s.concat([null])):a>-1&&(e.allchose=s.slice(0,a).concat(s.slice(a+1)))}else e.allchose=n}}}),e._v(" "),s("label",{attrs:{for:"all"}})]),e._v(" "),s("span",[e._v("全选")])]),e._v(" "),s("mt-button",{attrs:{size:"small"},on:{click:e.delNews}},[e._v("删除")])],1):e._e()],1),e._v(" "),s("div",{staticClass:"goIndex",on:{click:e.goIndex}},[s("i",{staticClass:"iconfont icon-home"})])],1)},staticRenderFns:[]};var _=s("VU/8")(r,h,!1,function(e){s("+OXH")},"data-v-a81830e4",null);t.default=_.exports}});
//# sourceMappingURL=27.8680358d1d5a909ce293.js.map