webpackJsonp([18],{Gg5O:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),o=s("Dd8w"),n=s.n(o),c=s("fqE/"),r=s("Au9i"),h=s("gyMJ"),l=s("NYxO"),u={name:"Search",components:{commonHeader:c.a,InfiniteScroll:r.InfiniteScroll,Indicator:r.Indicator,Button:r.Button,Lazyload:r.Lazyload,Toast:r.Toast},data:function(){return{h_title:"搜索",hot_page:1,hot_limit:10,hot_total:0,hotNum:0,hotSearch:[],istrue:!1,searchkey:"",keylist:[]}},mounted:function(){this.searchHis(),this.openLocationsercher(),document.getElementById("top").scrollIntoView(!1)},methods:n()({},Object(l.c)({setSearchData:"SET_SEARCHDATA"}),{goTop:function(){console.log("回到顶部"),document.getElementById("coll").scrollIntoView({block:"start",behavior:"smooth"})},goLink:function(t){this.$router.togo({path:"/proList?type=key&value="+t})},searchHis:function(){var t=this,e={page:t.hot_page,pagesize:t.hot_limit};Object(h.K)(e).then(function(e){e.isSuccess&&(t.hotSearch=e.data.rows,t.hot_total=e.data.total,t.istrue=!0,t.hotNum=Math.ceil(e.data.total/t.hot_limit))})},changeList:function(){this.hot_page===this.hotNum&&(this.hot_page=0),++this.hot_page,this.searchHis()},searchList:function(){if(new RegExp("^[ ]+$").test(this.searchkey)&&(this.searchkey=""),""!==this.searchkey){console.log(this.keylist),null===this.keylist&&(this.keylist=[]);var t=this.keylist;t.length>8&&t.pop();for(var e=[{id:t.length,name:this.searchkey}],s=0;s<t.length&&t[s].name!==this.searchkey;s++);s>=t.length&&(t=e.concat(t),console.log(t),window.localStorage.setItem("searchData",i()(t)))}this.$router.togo({path:"/proList?type=key&value="+this.searchkey})},clearSearchStorage:function(){window.localStorage.setItem("searchData",""),this.keylist=[]},openLocationsercher:function(){var t=[];""!==window.localStorage.getItem("searchData")&&(t=JSON.parse(window.localStorage.getItem("searchData"))),this.keylist=t}}),computed:n()({},Object(l.b)(["number","carnum","isbind","score","news","newsnum","issign"]))},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("common-header",{attrs:{h_title:t.h_title,showback:!0}}),t._v(" "),s("return-top",{on:{returnTop:t.goTop}}),t._v(" "),s("div",{staticStyle:{height:"0.9rem"},attrs:{id:"top"}}),t._v(" "),s("div",{staticClass:"search_his"},[s("div",{staticClass:"search_header"},[s("div",{staticClass:"search"},[s("i",{staticClass:"iconfont icon-search"}),t._v(" "),s("mt-field",{staticClass:"search_input",attrs:{placeholder:"搜索喜欢的商品"},on:{change:t.searchList},model:{value:t.searchkey,callback:function(e){t.searchkey=e},expression:"searchkey"}})],1),t._v(" "),s("span",{on:{click:t.searchList}},[t._v("搜索")])]),t._v(" "),s("div",{staticClass:"his_list"},[0!==t.keylist.length?s("div",{staticClass:"his_header"},[s("span",[t._v("历史记录")]),t._v(" "),s("span",{staticClass:"red_text",on:{click:t.clearSearchStorage}},[t._v("清除")])]):t._e(),t._v(" "),s("div",{staticClass:"h_list"},t._l(t.keylist,function(e,a){return s("span",{key:a,on:{click:function(s){return t.goLink(e.name)}}},[t._v(t._s(e.name))])}),0)]),t._v(" "),s("div",{staticClass:"hot_search"},[s("div",{staticClass:"hot_header"},[s("span",[t._v("热门搜索")]),t._v(" "),s("div",{staticClass:"hot_right"},[s("i",{staticClass:"iconfont icon-shuaxin"}),t._v(" "),s("span",{staticClass:"red_text",on:{click:t.changeList}},[t._v("换一批")])])]),t._v(" "),s("div",{staticClass:"hot_list"},t._l(t.hotSearch,function(e,a){return s("span",{key:a,on:{click:function(s){return t.goLink(e.title)}}},[t._v(t._s(e.title))])}),0)])])],1)},staticRenderFns:[]};var d=s("VU/8")(u,_,!1,function(t){s("MZ9b")},"data-v-c8d4e580",null);e.default=d.exports},MZ9b:function(t,e){}});
//# sourceMappingURL=18.063ac25af3b88f8d7a8b.js.map