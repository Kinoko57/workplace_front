webpackJsonp([33],{"0nGr":function(t,i){},YWWF:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Dd8w"),s=n.n(e),o=n("fqE/"),a=n("Au9i"),c=n("gyMJ"),r=n("mtWM"),l=n.n(r),d=n("NYxO"),_={name:"ScanCode",components:{commonHeader:o.a,InfiniteScroll:a.InfiniteScroll,Indicator:a.Indicator,Button:a.Button,Lazyload:a.Lazyload,Toast:a.Toast},data:function(){return{imgPath:"https://share.gongzhugou.com/static/image/xcx_img/",head_color:{background:"#f9f9f9",color:"#000"},h_title:"扫码结果页",allowbind:!0,isShow:!1,errTips:"抱歉，本商品已经被扫过！",showPro:{},winId:"",winType:"",winName:"",winValue:"",winhidden:!1,winUrl:"",apiUrl:"https://share.gongzhugou.com/"}},mounted:function(){a.Indicator.open("加载中..."),console.log(this.$route.query);var t=this.$route.query,i=t.q?decodeURIComponent(t.q):t.type,n=i.lastIndexOf("code/"),e=i.substring(n+5,i.length),s=i.split("/b2c")[1],o=this.apiUrl+"b2c"+s;this.winUrl=o,this.getInfo(e)},methods:s()({},Object(d.c)({setScanId:"SET_SCANID"}),{getInfo:function(t){var i=this,n={code:decodeURI(t)},e=this;Object(c._21)(n).then(function(t){if(a.Indicator.close(),t.isSuccess){i.isShow=!0,i.showPro=t.data;var n={headers:{"Content-Type":"multipart/form-data",Token:window.localStorage.getItem("token")},withCredentials:!0};l.a.get(e.winUrl,"",n).then(function(t){console.log(t),t.data.isSuccess?(e.winId=t.data.data,e.winName=t.data.name,e.winType=t.data.type,e.winValue=t.data.worth,e.winhidden=!0,e.setScanId(e.winId)):(e.winType=-1,e.errTips=t.data.msg,e.winhidden=!1,0==t.data.isget&&e.goLogin("/myGift"))})}else e.$router.replace({path:"/err?text="+t.msg})})},goTop:function(){console.log("回到顶部"),document.getElementById("coll").scrollIntoView({block:"start",behavior:"smooth"})},scan:function(){this.$router.togo({path:"/scan?type=scan"})},goLogin:function(t){var i=this;"true"===window.localStorage.getItem("isLogin")||!0===window.localStorage.getItem("isLogin")?i.$router.replace({path:t}):window.plus.nativeUI.confirm("您当前未登录，是否立即前往登录",function(t){0!==t.index&&"0"!==t.index||i.$router.togo({path:"/login?back=1"})},{title:"提示",buttons:["确定","取消"],verticalAlign:"center"})},goScore:function(){this.goLogin("/myGift")},goIndex:function(){this.$router.replace({path:"/index"})},goCou:function(){this.goLogin("/myGift")},hiddenWin:function(){this.winhidden=!1},openWin:function(){this.winhidden=!0}}),computed:s()({},Object(d.b)([]))},p={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("common-header",{attrs:{h_title:t.h_title,showback:!0,bgcolor:t.head_color}}),t._v(" "),n("return-top",{on:{returnTop:t.goTop}}),t._v(" "),n("div",{staticStyle:{height:"0.9rem"}}),t._v(" "),t.isShow?n("div",{staticClass:"scan"},[n("div",{staticClass:"scan_body"},[n("mt-swipe",{staticClass:"scan_swiper_bg",attrs:{auto:3e3,speed:500,defaultIndex:0,continuous:!0}},t._l(t.showPro.img,function(t,i){return n("mt-swipe-item",{key:i},[n("img",{staticClass:"slide-img",attrs:{src:t}})])}),1),t._v(" "),n("div",{staticClass:"pro_info"},[n("div",{staticClass:"pro_price"},[t._v("￥"+t._s(t.showPro.price))]),t._v(" "),n("div",{staticClass:"pro_name"},[t._v(t._s(t.showPro.name))]),t._v(" "),null!=t.showPro.describe?n("div",{staticClass:"pro_desc"},[t._v(t._s(t.showPro.describe))]):t._e()]),t._v(" "),-1==t.winType?n("div",{staticClass:"pro_tips_reset"},[t._v("\n        "+t._s(t.errTips)+"\n      ")]):t._e()],1),t._v(" "),n("div",{staticClass:"scan_foot_win"},[t.winType<0?n("mt-button",{attrs:{size:"small"},on:{click:t.scan}},[t._v("重新扫描")]):t._e(),t._v(" "),t.winType>0?n("mt-button",{attrs:{size:"small"},on:{click:t.goScore}},[t._v("立即领取")]):t._e(),t._v(" "),n("mt-button",{staticClass:"go-Index",attrs:{size:"small"},on:{click:t.goIndex}},[t._v("商城首页")])],1)]):t._e(),t._v(" "),t.winhidden?n("div",{staticClass:"scan_win_bg",attrs:{catchtouchmove:"ture"}}):t._e(),t._v(" "),t.winhidden?n("div",{staticClass:"scan_win",attrs:{catchtouchmove:"ture"}},[n("img",{attrs:{src:t.imgPath+"pro/win_bg_03.png"}}),t._v(" "),n("i",{staticClass:"iconfont icon-guanbi2",on:{click:t.hiddenWin}}),t._v(" "),1==t.winType?n("span",{staticClass:"win_price"},[n("span",{staticClass:"win_price_name"},[t._v(t._s(t.winName))])]):t._e(),t._v(" "),2==t.winType?n("span",{staticClass:"win_price"},[n("span",{staticClass:"win_price_name"},[t._v(t._s(t.winValue)+"积分")])]):t._e(),t._v(" "),3==t.winType?n("span",{staticClass:"win_price"},[t._v("￥"),n("span",{staticClass:"win_price_num"},[t._v(t._s(t.winValue))])]):t._e(),t._v(" "),n("span",{staticClass:"win_tips"},[t._v("恭喜，您将获得"+t._s(t.winName))]),t._v(" "),n("div",{staticClass:"win_text",on:{click:t.goCou}},[n("img",{attrs:{src:t.imgPath+"member/r_btn.png"}})])]):t._e(),t._v(" "),0==t.winhidden&&-1!=t.winType&&t.isShow?n("div",{staticClass:"gift_box",on:{click:t.openWin}},[n("img",{staticClass:"animated pulse infinite",attrs:{src:t.imgPath+"pro/gift.png"}})]):t._e()],1)},staticRenderFns:[]};var u=n("VU/8")(_,p,!1,function(t){n("0nGr")},"data-v-975e2026",null);i.default=u.exports}});
//# sourceMappingURL=33.332208949cda16130dc4.js.map