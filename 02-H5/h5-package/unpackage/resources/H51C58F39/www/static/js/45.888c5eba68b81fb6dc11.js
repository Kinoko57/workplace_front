webpackJsonp([45],{alwp:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),a=e.n(i),o=e("fqE/"),n=e("Au9i"),l=e("gyMJ"),c=e("WVZN"),r=e("NYxO"),_={name:"Flash",components:{commonHeader:o.a,InfiniteScroll:n.InfiniteScroll,Indicator:n.Indicator,Button:n.Button,Lazyload:n.Lazyload},data:function(){return{head_color:{background:"#f9f9f9",color:"#000"},isMember:this.$store.state.home.is_member,h_title:"限时抢购",newNews:!1,total_amout:0,isShow:!1,headImg:"",choseTime:1,choseId:"",timeList:[],leftLength:0,blocklist:[],saleProList:[],total:0,wxTimerList:{},timeid:"",page:1,pagesize:4,endTimes:0,endShow:!1,chose_status:"",status:"",loading:!0,time:"",endTime:"",saleTime:{}}},mounted:function(){n.Indicator.open("加载中..."),this.getTimeList()},methods:{golink:function(t){},goPro:function(t,s){this.$router.togo({path:"/proDetail?type="+t+"&id="+s})},choseList:function(t){clearInterval(this.time),n.Indicator.open("加载中..."),console.log(t),this.choseId=t.id,this.timeid=t.id,this.page=1,this.pagesize=4,this.endShow=this.endShow,this.chose_status=t.status;for(var s=0,e=this.timeList.length;s<e;s++)if(this.timeList[s].id===t.id){this.status=this.timeList[s].status,this.endTimes=this.timeList[s].countdown;var i=this.timeList[s].countdown;this.saleTime=Object(c.a)(i),this.time=setInterval(function(){--i,this.saleTime=Object(c.a)(i)}.bind(this),1e3)}this.getTimeList()},getTimeList:function(){var t=this,s={timeid:this.timeid,page:this.page,pagesize:this.pagesize};Object(l._17)(s).then(function(s){if(n.Indicator.close(),s.isSuccess){if(t.isShow=!0,t.h_title=s.data.title,t.headImg=s.data.bgimg,t.timeList=s.data.time_list,t.blocklist=s.data.type_list.rows,t.total=s.data.type_list.total,""===t.choseId){for(var e=0,i=t.timeList.length;e<i;e++)void 0!==s.data.time_list[e].checked&&(t.choseTime=e-1,t.firstChose=s.data.time_list[e].id,t.choseId=s.data.time_list[e].id,t.endTimes=s.data.time_list[e].countdown,t.endShow=!0,t.timeid=s.data.time_list[e].id,t.status=s.data.time_list[e].status);if(t.endTimes>0){var a=t.endTimes;t.saleTime=Object(c.a)(a),t.time=setInterval(function(){--a,this.saleTime=Object(c.a)(a)}.bind(t),1e3)}}t.getList()}})},getList:function(){var t={timeid:this.choseId,page:this.page,pagesize:this.pagesize},s=this;Object(l._16)(t).then(function(t){t.isSuccess&&(s.saleProList=t.data.list.rows,s.total=t.data.list.total,s.loading=!1,setTimeout(function(){(parseInt(s.total)===parseInt(s.saleProList.length)&&parseInt(s.total)>0||0===parseInt(s.total))&&(s.loading=!0)},100))})},loadMore:function(){var t=this;t.loading=!0,t.page=++t.page,console.log("更多架子啊");var s={timeid:t.choseId,page:t.page,pagesize:t.pagesize};Object(l._16)(s).then(function(s){s.isSuccess&&(null!==s.data.list.rows&&s.data.list.rows.length>0?(t.saleProList=t.saleProList.concat(s.data.list.rows),t.total=s.data.list.total,t.loading=!1,parseInt(t.total)===parseInt(t.saleProList.length)&&parseInt(t.total)>0&&(t.loading=!0)):t.loading=!0)})},goTop:function(){console.log("回到顶部"),document.getElementById("flash").scrollIntoView({block:"start",behavior:"smooth"})}},beforeDestroy:function(){clearInterval(this.time)},computed:a()({},Object(r.b)(["number","carnum","isbind","score","news","newsnum","issign"]))},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("common-header",{attrs:{h_title:t.h_title,bgcolor:t.head_color}}),t._v(" "),e("return-top",{on:{returnTop:t.goTop}}),t._v(" "),e("div",{staticClass:"sale_height",attrs:{id:"flash"}}),t._v(" "),t.isShow?e("div",{staticClass:"sale"},[e("div",{staticClass:"sale_body"},[e("div",{staticClass:"sale_banner"},[e("img",{attrs:{src:t.headImg}})]),t._v(" "),e("div",{staticClass:"sale_tab_show"},[e("div",{staticClass:"sale_tab"},t._l(t.timeList,function(s,i){return e("div",{key:i,class:s.id==t.choseId?"sale_nav sale_active":"sale_nav",on:{click:function(e){return t.choseList(s)}}},[e("span",{staticClass:"sale_time"},[t._v(t._s(s.fromtime))]),t._v(" "),e("span",{staticClass:"sale_states"},[t._v(t._s(s.salesname))])])}),0)]),t._v(" "),t.saleProList.length>0?e("div",{staticClass:"sale_title"},[t._m(0),t._v(" "),t.endTimes>0?e("div",{staticClass:"sale_right"},[e("i",{staticClass:"iconfont icon-jinriqianggou"}),t._v(" "),0==t.chose_status?e("span",[t._v("距离下场开始：")]):t._e(),t._v(" "),1==t.chose_status?e("span",[t._v("距离本场开始：")]):t._e(),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t.saleTime.hou)+":"+t._s(t.saleTime.min)+":"+t._s(t.saleTime.sec))])]):t._e()]):t._e(),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"sale_list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},[t._l(t.saleProList,function(s,i){return e("div",{key:i,staticClass:"sale_pro"},[e("div",{staticClass:"pro_img",on:{click:function(e){return t.goPro("flash",s.goods_id)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.img,expression:"item.img"}],attrs:{src:s.img}})]),t._v(" "),e("div",{staticClass:"pro_info"},[e("div",{staticClass:"pro_title",on:{click:function(e){return t.goPro("flash",s.goods_id)}}},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"pro_progress"},[e("div",{staticClass:"prog"},[s.count_num/s.store*100<100?e("div",{style:{width:s.count_num/s.store*100+"%"}}):t._e(),t._v(" "),s.count_num/s.store*100>=100?e("div",{staticStyle:{width:"100%"}}):t._e()]),t._v(" "),e("span",[t._v("已抢"+t._s(s.count_num)+"份")])]),t._v(" "),e("div",{staticClass:"pro_spec"},[e("div",{staticClass:"pro_price"},[2!=s.deal_type?e("div",{staticClass:"pro_inter_img"},[1==s.deal_type||3==s.deal_type?e("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(s.price_sell)),t.isMember?e("span",{staticStyle:{color:"#ff8d97","font-size":"0.23rem"}},[t._v(" / 赚"+t._s(s.back_rebate))]):t._e()]):t._e(),t._v(" "),s.deal_type>=4?e("span",{staticClass:"peo_nowprice"},[t._v("￥"+t._s(s.price_sell)),t.isMember?e("span",{staticStyle:{color:"#ff8d97","font-size":"0.23rem"}},[t._v(" / 赚"+t._s(s.back_rebate))]):t._e()]):t._e(),t._v(" "),s.deal_type>=4?e("span",{staticClass:"pro_integral"},[t._v("+")]):t._e(),t._v(" "),1!=s.deal_type&&3!=s.deal_type?e("i",{staticClass:"iconfont icon-jifen1"}):t._e()]):t._e(),t._v(" "),2==s.deal_type?e("span",{staticClass:"pro_integral"},[t._v(t._s(s.point))]):t._e(),t._v(" "),1!=s.deal_type&&2!=s.deal_type&&3!=s.deal_type?e("span",{staticClass:"pro_integral"},[t._v(t._s(s.point))]):t._e()]),t._v(" "),e("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{staticStyle:{"font-size":"0.12rem",display:"inline-flex"}},[e("span",{staticClass:"pro_orig"},[t._v(t._s(s.price_market_from)+":")]),t._v(" "),e("span",{staticClass:"pro_orig line"},[t._v("¥"+t._s(s.price_market))])]),t._v(" "),e("div",{staticClass:"pro_icon"},[0==t.status?e("mt-button",{staticClass:"active",attrs:{size:"small"},on:{click:function(e){return t.goPro("flash",s.goods_id)}}},[t._v("立即抢购")]):t._e(),t._v(" "),1==t.status?e("mt-button",{staticClass:"start",attrs:{size:"small"},on:{click:function(e){return t.goPro("flash",s.goods_id)}}},[t._v("未开场")]):t._e()],1)])])])])}),t._v(" "),t.loading?t._e():e("div",{staticClass:"more_load"},[e("mt-spinner",{attrs:{type:"fading-circle"}})],1)],2),t._v(" "),t.saleProList.length==t.total&&t.total>0?e("div",{staticClass:"list_bottom"},[t._v("—————— 我是有底线的 ——————")]):t._e(),t._v(" "),0==t.saleProList.length?e("div",{staticClass:"sale_list_null"},[e("span",[t._v("当前时段下暂无商品抢购，敬请期待")])]):t._e()]),t._v(" "),e("div",{staticClass:"null_height"})]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"sale_left"},[s("span",[this._v("低价风暴 闪电促销")])])}]};var m=e("VU/8")(_,d,!1,function(t){e("evVV")},"data-v-6156a2f8",null);s.default=m.exports},evVV:function(t,s){}});
//# sourceMappingURL=45.888c5eba68b81fb6dc11.js.map